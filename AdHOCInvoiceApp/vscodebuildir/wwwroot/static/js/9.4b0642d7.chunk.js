(this["webpackJsonpgra-invoicer"]=this["webpackJsonpgra-invoicer"]||[]).push([[9],{472:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(5),c=s(20),r=s(26),n=s(146),i=s(38),o=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3"}).REACT_APP_OIDC_USER)),function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{isEnabled:!0,queryTag:"/?filter="},d=Object(i.a)(),m=u.isEnabled,j=(u.queryTag,function(){var t=Object(r.a)(Object(c.a)().mark((function t(){var s;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.get(e);case 2:return s=t.sent,t.abrupt("return",s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),h=Object(n.a)({queryKey:[t,s],queryFn:j,onSuccess:function(e){return o(e)},onError:function(e){return l(e)},enabled:m});return Object(a.a)({},h)})},476:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(5),c=s(20),r=s(26),n=s(100),i=s(400),o=s(38),l=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3"}).REACT_APP_OIDC_USER)),function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},u=Object(n.b)(),d=Object(o.a)(),m=function(){var t=Object(r.a)(Object(c.a)().mark((function t(s){var a;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log({postData:s}),console.log({url:e}),t.next=4,d.post(e,s);case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=Object(i.a)({mutationFn:m,onSuccess:function(e){u.invalidateQueries({queryKey:[t,""]}),s(e)},onError:function(e){return l(e)}});return Object(a.a)({},j)})},480:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(5),c=s(20),r=s(26),n=s(100),i=s(400),o=(s(147),s(38)),l=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},u=Object(n.b)(),d=Object(o.a)(),m=function(){var t=Object(r.a)(Object(c.a)().mark((function t(s){var a;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log({postData:s}),console.log({url:e}),t.next=4,d.put(e,s);case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=Object(i.a)({mutationFn:m,onSuccess:function(e){u.invalidateQueries({queryKey:[t,""]}),s(e)},onError:function(e){return l(e)}});return Object(a.a)({},j)}},490:function(e,t){},505:function(e,t){},506:function(e,t){},663:function(e,t,s){"use strict";s.r(t);var a=s(5),c=s(8),r=s(2),n=s.n(r),i=s(244),o=s(110),l=s(80),u=s(171),d=s(450),m=s(165),j=s(394),h=s(145),b=s(446),p=s(447),O=s(237),f=s(144),v=s(245),x=s(246),g=s(21),C=(s(249),s(52)),A=s(172),E=s(148),T=s(401),S=s(9),y=s(31),_=s(535),P=(s(248),s(59)),R=s(1);var N=function(e){var t=e.setuploadedData,s=e.previewData,i=(e.metadata,e.setMetadata,e.setCustomerList),u=e.setShow,d=(e.disabled,e.setIsSearched),j=Object(r.useState)([]),b=Object(c.a)(j,2),p=(b[0],b[1]),O=Object(r.useState)(""),f=Object(c.a)(O,2),v=f[0],x=f[1],C=Object(_.a)({accept:".xlsx,.xls,.csv",maxFiles:1,onDrop:function(e){p(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),A=C.acceptedFiles,E=C.getRootProps,T=C.getInputProps,N=Object(r.useState)([]),D=Object(c.a)(N,2),w=D[0],I=D[1],L=Object(r.useState)(0),U=Object(c.a)(L,2),V=U[0],F=(U[1],Object(r.useState)(0)),k=Object(c.a)(F,2),B=(k[0],k[1],Object(r.useState)(0)),H=Object(c.a)(B,2),G=H[0],q=H[1];n.a.useEffect((function(){t(A)}),[A]),n.a.useEffect((function(){}),[V]);var W=A.map((function(e){return Object(R.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)}));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(g.a,{}),Object(R.jsxs)("section",{className:"container",children:[Object(R.jsxs)("div",Object(a.a)(Object(a.a)({},E({className:"dropzone"})),{},{children:[Object(R.jsx)("input",Object(a.a)(Object(a.a)({},T()),{},{onDrop:function(){return console.log(A)}})),Object(R.jsx)("p",{style:{margin:20},children:"Click here to select file"})]})),Object(R.jsxs)("aside",{children:[Object(R.jsx)("h4",{children:"Files"}),Object(R.jsx)("ul",{style:{color:"green"},children:W})]}),Object(R.jsx)("div",{children:Object(R.jsx)(o.a,{children:Object(R.jsx)(l.a,{lg:"12",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-email",children:"Sheet Name"}),Object(R.jsx)("code",{style:{color:"darkred"},children:"*"}),Object(R.jsxs)("select",{className:"form-control",value:v,onChange:function(e){return function(e){x(e.target.value);for(var t=e.target.value,a=s.Sheets[t],c=Object.keys(a).map((function(e){return[e,a[e].v]})),r=[],n=[],i=[],o=[],l={},u=0;u<c.length;u++)if(c[u][1]){var d=c[u][0].replace(/[^\d.]/g,"");i.push(d);var m=c[u][0].replace(d,"");o.push(m),l["".concat(c[u][0])]=c[u][1],n.push(l),r.push({Row:d,Column:m,Cell:c[u][0],Value:c[u][1]})}var j=[];j.push({Data:r,Cells:l,Name:t,First:r[0],Last:r[r.length-1],Rows:i.filter((function(e,t,s){return s.indexOf(e)===t})),Columns:o.filter((function(e,t,s){return s.indexOf(e)===t}))}),I(j[0].Data),console.log(j[0]),q(Number(j[0].Last.Row))}(e)},children:[Object(R.jsx)("option",{value:"",children:"Select Sheet"}),s.SheetNames.map((function(e,t){return Object(R.jsx)("option",{children:e},t)}))]})]})})})}),Object(R.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(R.jsx)("p",{children:A.length>0?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("span",{children:"File attached "}),Object(R.jsx)(P.a,{color:"green"})]}):null}),Object(R.jsx)(m.a,{disabled:0===v.length,color:"primary",onClick:function(){u(!1),function(){var e=w,t=Object(y.a)(new Set(e)),s=t.filter((function(e){return"A"===e.Column})),a=t.filter((function(e){return"B"===e.Column})),c=t.filter((function(e){return"C"===e.Column})),r=t.filter((function(e){return"D"===e.Column})),n=t.filter((function(e){return"E"===e.Column})),o=t.filter((function(e){return"F"===e.Column})),l=t.filter((function(e){return"G"===e.Column})),u=t.filter((function(e){return"H"===e.Column})),m=[],j=[],h=[],b=[],p=[],O=[],f=[],v=[];s.forEach((function(e){return m.push(e.Value)})),a.forEach((function(e){return j.push(e.Value)})),c.forEach((function(e){return h.push(e.Value)})),r.forEach((function(e){return b.push(e.Value)})),n.forEach((function(e){return p.push(e.Value)})),o.forEach((function(e){return O.push(e.Value)})),l.forEach((function(e){return f.push(e.Value)})),u.forEach((function(e){return v.push(e.Value)}));var x=[];x.push(m,j,h,b,p,O,f,v);for(var g=[],C=[],A={},E=function(e){x.map((function(t,s){A[t[0]]=t[e];var a=Object(S.a)({},t[0],t[e]);C.push(a)})),(g=[].concat(Object(y.a)(g),[A])).push([A][0])},T=1;T<G;T++)E(T);for(var _=[],P=0;P<C.length;P+=8){var R=C.slice(P,P+8);_.push(R)}var N=[];_.map((function(e){var t={};e.map((function(e){t["".concat(Object.keys(e))]="".concat(Object.values(e))})),N.push(t)})),JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3"}).REACT_APP_OIDC_USER));var D=N.map((function(e){return{customerTin:e.GhanaCardTIN,customerName:e.Name,type:e.TypeOfBusinessPartner.substr(0,3).toUpperCase()||"CUS",customerTel:e.Phone,customerEmail:e.Email,ghPostGps:e.GhanaPost,city:e.City,address:e.Address,digitalAddress:e.GhanaPost}}));i(D),d(!0)}()},children:"Upload"})]})]})]})},D=s(503),w=function(e){var t=e.show,s=e.setShow,a=e.setCustomerList,r=e.setIsSearched,i=n.a.useState([]),m=Object(c.a)(i,2),j=m[0],h=m[1],b=n.a.useState({SheetNames:[],Sheets:{}}),p=Object(c.a)(b,2),O=p[0],f=p[1],x=n.a.useState({header:0,start:0,end:0}),g=Object(c.a)(x,2),C=g[0],A=g[1],E=n.a.useState(!0),S=Object(c.a)(E,2),y=S[0],_=S[1];return n.a.useEffect((function(){if(j.length>0){_(!1);var e=new FileReader;e.onabort=function(){return console.log("file reading was aborted")},e.onerror=function(){return console.log("file reading has failed")},e.onload=function(e){var t=e.target.result,s=D.read(t,{type:"binary"});f({SheetNames:s.SheetNames,Sheets:s.Sheets})},e.readAsArrayBuffer(j[0],"utf-8")}return function(){}}),[j]),Object(R.jsx)("div",{children:Object(R.jsx)(T.a,{className:"modal-dialog-centered modal-md",isOpen:t,children:Object(R.jsxs)(u.a,{className:"shadow",style:{height:"max-content"},children:[Object(R.jsx)(d.a,{className:"bg-white border-0",children:Object(R.jsxs)(o.a,{className:"align-items-center",children:[Object(R.jsx)(l.a,{xs:"8",children:Object(R.jsx)("h3",{className:"mb-0",children:"Drag and Drop File Here"})}),Object(R.jsx)(l.a,{xs:"4",children:Object(R.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){return s(!1)},children:Object(R.jsx)("span",{"aria-hidden":!0,children:"x"})})})]})}),Object(R.jsxs)(v.a,{children:[" ",Object(R.jsx)(N,{setuploadedData:h,previewData:O,metadata:C,setMetadata:A,setCustomerList:a,setdisabled:_,disabled:y,setShow:s,setIsSearched:r})]})]})})})},I=s.p+"static/media/GRA_INVOICER_BUSINESS_PARTNERS.19ff89cf.xlsx",L=s(95),U=(s(481),s(534)),V=s(502),F=s(180);function k(e){var t=e.message,s=e.showPrompt,a=e.setShowPrompt,c=e.customerToDelete,r=e.setLoading,n=(e.setCustomerList,e.getCustomerList),i=e.getSupplierList,o=e.resetFormBtn,l=Object(F.a)("/api/DeleteCustomer/".concat(null===c||void 0===c?void 0:c.customerID),"customer",null===c||void 0===c?void 0:c.customerID,(function(e){var t;"CUS"===c.type?(g.b.success("Customer successfully deleted from system"),null===o||void 0===o||null===(t=o.current)||void 0===t||t.onClick(),n()):(g.b.success("Supplier successfully deleted from system"),i());a(!1),r(!1)}),(function(e){var t;a(!1),g.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||"Invoice could not be saved. Please try again"),r(!1)})).mutate;return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(T.a,{className:"modal-dialog-centered modal-danger",contentClassName:"bg-gradient-danger",isOpen:s,children:[Object(R.jsxs)("div",{className:"modal-header",children:[Object(R.jsx)("h6",{className:"modal-title",id:"modal-title-notification",children:"Your attention is required"}),Object(R.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){a(!1)},children:Object(R.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(R.jsx)("div",{className:"modal-body",children:Object(R.jsxs)("div",{className:"py-3 text-center",children:[Object(R.jsx)("i",{className:"ni ni-bell-55 ni-3x"}),Object(R.jsx)("h4",{className:"heading mt-4",children:"Hi there..."}),Object(R.jsx)("p",{children:t})]})}),Object(R.jsxs)("div",{className:"modal-footer",children:[Object(R.jsx)(m.a,{className:"btn-white",color:"default",type:"button",onClick:function(){return e=c,r(!0),void(e.hasTrans?(g.b.warning("Customer has already been used in a transaction.  Try d instead"),a(!1)):(r(!0),l()));var e},children:"Yes"}),Object(R.jsx)(m.a,{className:"text-white ml-auto",color:"link","data-dismiss":"modal",type:"button",onClick:function(){a(!1)},children:"No"})]})]})})}var B=s(222),H=s(472),G=s(173),q=s(476),W=s(480),z=s(60),Q=(t.default=function(){var e,t=Object(z.c)(),s=(t.getUser,t.user),n=(t.logout,Object(U.a)({initialValues:{companyId:null===s||void 0===s?void 0:s.sub,customerName:"",customerTin:"",customerEmail:"",customerPhone:"",customerAddress:"",customerCity:"",customerDigitalAddress:"",customerType:"CUS"},validationSchema:V.c({customerName:V.d().required("Required"),customerTin:V.d().required("Required").nullable().min(11,"Must be 11  or 15 characters").max(15,"Must be 11  or 15 characters"),customerEmail:V.d().email("Invalid email address").nullable().required("Required"),customerPhone:V.d().required("Required").matches(/(\+\d{1,3}\s?)?((\(\d{3}\)\s?)|(\d{3})(\s|-?))(\d{3}(\s|-?))(\d{4})(\s?(([E|e]xt[:|.|]?)|x|X)(\s?\d+))?/g,"not a valid phone number")}),onSubmit:function(e){Et(e)}})),T=Object(r.useState)([]),S=Object(c.a)(T,2),y=S[0],_=S[1],N=Object(r.useState)(!1),D=Object(c.a)(N,2),F=D[0],X=D[1],Y=Object(r.useState)(!1),K=Object(c.a)(Y,2),J=K[0],M=K[1],Z=Object(r.useState)(!1),$=Object(c.a)(Z,2),ee=$[0],te=$[1],se=Object(r.useState)(!1),ae=Object(c.a)(se,2),ce=ae[0],re=ae[1],ne=Object(r.useState)(!1),ie=Object(c.a)(ne,2),oe=ie[0],le=ie[1],ue=Object(r.useState)(!1),de=Object(c.a)(ue,2),me=de[0],je=de[1],he=Object(r.useState)(""),be=Object(c.a)(he,2),pe=be[0],Oe=be[1],fe=Object(r.useState)(!1),ve=Object(c.a)(fe,2),xe=ve[0],ge=ve[1],Ce=Object(r.useState)("Customers List"),Ae=Object(c.a)(Ce,2),Ee=Ae[0],Te=Ae[1],Se=Object(r.useState)(!0),ye=Object(c.a)(Se,2),_e=ye[0],Pe=ye[1],Re=Object(r.useState)(!1),Ne=Object(c.a)(Re,2),De=Ne[0],we=Ne[1],Ie=Object(r.useState)(null),Le=Object(c.a)(Ie,2),Ue=Le[0],Ve=Le[1],Fe=Object(r.useState)(""),ke=Object(c.a)(Fe,2),Be=ke[0],He=ke[1],Ge=Object(G.a)(pe,500),qe=Object(c.a)(Ge,1)[0],We=Object(G.a)(Be,500),ze=Object(c.a)(We,1)[0],Qe=Object(r.useState)(!1),Xe=Object(c.a)(Qe,2),Ye=(Xe[0],Xe[1],Object(r.useState)(!0)),Ke=Object(c.a)(Ye,2),Je=Ke[0],Me=Ke[1],Ze=Object(r.useState)(!1),$e=Object(c.a)(Ze,2),et=$e[0],tt=$e[1],st=Object(r.useState)(!1),at=Object(c.a)(st,2),ct=at[0],rt=at[1],nt=Object(r.useState)("CUS"),it=Object(c.a)(nt,2),ot=it[0],lt=it[1],ut=Object(r.useRef)(),dt=Object(r.useRef)(null),mt=function(e){Je?(tt(!0),rt(!1)):(tt(!1),rt(!0)),X(!1);var t=e.map((function(e){return{customerID:e.id,customerName:e.name,customerTin:e.tin,customerEmail:e.email,customerPhone:e.telephone,customerAddress:e.address,customerCity:e.city,customerDigitalAddress:e.digitalAddress,type:e.type,status:e.status||"A",hasTrans:e.hasTrans||!1}}));t.length<1?(X(!1),_([])):(X(!1),ge(!0),_(t))},jt=Object(H.a)(qe?"/api/GetCompanyCustomers/".concat(qe):"/api/GetCompanyCustomers","customers",qe,mt,(function(e){X(!1),g.b.warning("You have no products/services saved yet")}),{isEnabled:!1,queryTag:"?search="}),ht=jt.refetch,bt=(jt.isLoading,Object(H.a)(ze?"/api/GetCompanySuppliers/".concat(ze):"/api/GetCompanySuppliers","suppliers",ze,mt,(function(e){X(!1),g.b.warning("You have no products/services saved yet")}),{isEnabled:!1,queryTag:"?search="})),pt=bt.refetch;bt.isLoading;Object(r.useEffect)((function(){ze.length>1&&pt(),0===Be.length&&ct&&pt()}),[ze,Be]),Object(r.useEffect)((function(){qe.length>1&&ht(),0===pe.length&&et&&ht()}),[qe,pe]);var Ot=Object(q.a)("/api/CreateCustomer",qe,(function(){var e,t;(X(!1),re((function(){return!1})),"SUP"===ot)?(g.b.success("Supplier successfully saved"),He(null===n||void 0===n||null===(e=n.values)||void 0===e?void 0:e.customerName)):(g.b.success("Customer successfully saved"),Oe(null===n||void 0===n||null===(t=n.values)||void 0===t?void 0:t.customerName));n.resetForm()}),(function(e){var t;console.log({err:e}),g.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.Message)||"Error creating customer"),X(!1)})),ft=Ot.mutate,vt=Ot.isLoading,xt=Ot.isSuccess;console.log({isSuccess:xt});var gt=Object(W.a)("/api/UpdateCreateCustomer/".concat(null===n||void 0===n||null===(e=n.values)||void 0===e?void 0:e.customerID),ze,(function(e){var t,s;(X(!1),re(!1),n.resetForm(),"SUP"===ot)?(g.b.success("Supplier successfully saved"),He(null===n||void 0===n||null===(t=n.values)||void 0===t?void 0:t.customerName)):(g.b.success("Customer successfully saved"),Oe(null===n||void 0===n||null===(s=n.values)||void 0===s?void 0:s.customerName));le(!1)}),(function(e){var t;console.log({err:e}),g.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.Message)||"Error updating customer"),X(!1)})),Ct=gt.mutate,At=gt.isLoading,Et=function(){oe?function(e){var t={id:(e=n.values).customerID,tin:e.customerTin,name:e.customerName,email:e.customerEmail,telephone:e.customerPhone,digitalAddress:e.customerDigitalAddress,city:e.customerCity,address:e.customerAddress,contactPersonName:"",contactPersonPhone:"",contactPersonPosition:"",status:_e?"A":"I",type:e.type};lt(null===t||void 0===t?void 0:t.type),X(!0),Ct(t)}(n):function(e){if((e=n.values).customerName&&e.customerTin&&e.customerPhone){var t,s=[e].map((function(e){return{companyId:e.companyId,customerTin:e.customerTin,customerName:e.customerName,type:e.customerType,customerTel:e.customerPhone,customerEmail:e.customerEmail,ghPostGps:e.customerDigitalAddress,city:e.customerCity,address:e.customerAddress,digitalAddress:e.customerDigitalAddress}}));lt(null===(t=s[0])||void 0===t?void 0:t.type),ft(s),X(!0)}else g.b.warning("Please fill all necessary information")}(n)},Tt=function(e){null==e.customerAddress&&(e=Object(a.a)(Object(a.a)({},e),{},{customerAddress:""})),null==e.customerDigitalAddress&&(e=Object(a.a)(Object(a.a)({},e),{},{customerDigitalAddress:""})),null==e.customerCity&&(e=Object(a.a)(Object(a.a)({},e),{},{customerCity:""})),null==e.customerPhone&&(e=Object(a.a)(Object(a.a)({},e),{},{customerPhone:""})),"A"===e.status?Pe(!0):"A"!==e.status&&Pe(!1),n.setValues(e),le(!0)},St=Object(q.a)("/api/CreateCustomer","",(function(){X(!1),g.b.success("Customer List successfully Added"),X(!1),_([]),ht(),re(!1)}),(function(e){g.b.error("Could not submit list. Please try again."),X(!1)})).mutate;return Object(r.useEffect)((function(){}),[n]),console.log(ce),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(A.a,{message:"This is your customer setup page. Manage your client list here",pageName:"Business Partner Setup"}),Object(R.jsx)(g.a,{}),Object(R.jsxs)(B.a,{children:[Object(R.jsx)(i.a,{className:"mt--7",fluid:!0,children:Object(R.jsxs)(o.a,{className:"mt-5",children:[y&&xe&&Object(R.jsx)(l.a,{className:"order-xl-2 mb-5 mb-xl-0",xs:"7",lg:"7",xl:"7",children:Object(R.jsxs)(u.a,{className:"shadow",style:{height:619},children:[Object(R.jsx)(d.a,{className:"bg-white border-0",children:Object(R.jsxs)(o.a,{className:"align-items-center",children:[Object(R.jsx)(l.a,{xs:"4",children:ce?Object(R.jsx)(l.a,{lg:"12",className:"text-align",style:{display:"flex"},children:Object(R.jsx)(m.a,{color:"success",onClick:function(){X(!0),St(y)},size:"md",children:"Submit Bulk List"})}):Object(R.jsx)(j.a,{className:"navbar-search navbar-search-light form-inline ",onSubmit:function(e){return e.preventDefault()},children:Object(R.jsx)(h.a,{className:"mb-0",children:Object(R.jsxs)(b.a,{className:"input-group-alternative",children:[Object(R.jsx)(p.a,{addonType:"prepend",style:{marginTop:8},children:Object(R.jsx)(O.a,{children:Object(R.jsx)("i",{className:"fas fa-search"})})}),Object(R.jsx)(f.a,{placeholder:"Search...",type:"text",value:pe||Be,onChange:function(e){je(!0),Je?(Oe(e.target.value),He("")):(He(e.target.value),Oe(""))},style:{width:300}}),Object(R.jsx)(p.a,{addonType:"append",children:Object(R.jsx)(O.a,{onClick:function(){return Oe("")},children:me&&Object(R.jsx)("i",{className:"fas fa-times"})})})]})})})}),Object(R.jsx)(l.a,{className:"text-right",xs:"8",children:Object(R.jsx)(m.a,{onClick:function(){re(!1),te(!ee),_([]),ge(!1),n.resetForm(),le(!1)},size:"sm",children:Object(R.jsx)(L.a,{})})})]})}),Object(R.jsxs)(v.a,{style:Q.body,children:[Object(R.jsx)("h3",{className:"pb-1",children:Ee}),Object(R.jsxs)(x.a,{className:"align-items-center  table-flush",responsive:!0,children:[Object(R.jsx)("thead",{className:"thead-light",children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{style:{width:"30%"},scope:"col",children:"Name"}),Object(R.jsx)("th",{style:{width:"25%"},scope:"col",children:"Ghana Card/TIN"}),Object(R.jsx)("th",{style:{width:"25%"},scope:"col",children:"Email Address"}),!ce&&Object(R.jsx)("th",{style:{textAlign:"right",width:"10%"},scope:"col",children:"Actions"})]})}),Object(R.jsx)("tbody",{children:y.map((function(e,t){return Object(R.jsxs)("tr",{style:{cursor:"pointer",lineHeight:0},ref:ut,children:[Object(R.jsx)("td",{onClick:function(){return Tt(e)},children:null===e||void 0===e?void 0:e.customerName}),Object(R.jsx)("td",{children:null===e||void 0===e?void 0:e.customerTin}),Object(R.jsx)("td",{children:null===e||void 0===e?void 0:e.customerEmail}),!ce&&Object(R.jsxs)("td",{style:{textAlign:"right",width:"20%",height:20,cursor:"pointer"},children:[Object(R.jsx)(L.b,{title:"Edit",style:{marginRight:20},onClick:function(){return Tt(e)}}),Object(R.jsx)(E.a,{title:"Remove",style:{marginRight:20},onClick:function(){return t=e,console.log(t),Ve(t),void we(!0);var t}})]})]},t)}))})]})]})]})})," ",Object(R.jsx)(l.a,{className:"order-xl-1 mb-5 mb-xl-0",sm:"12",xs:"12",lg:"5",xl:"5",children:Object(R.jsxs)(u.a,{className:"bg-secondary shadow",children:[Object(R.jsx)(d.a,{className:"bg-white border-5",children:Object(R.jsx)(o.a,{className:"align-items-center pl-3",children:Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10},children:[Object(R.jsx)(m.a,{color:"info",size:"sm",onClick:function(){Oe(""),He(""),Te("Customers List"),Me(!0),X(!0),te(!ee),ht(),re((function(){return!1}))},children:"View Existing Customers"}),Object(R.jsx)(m.a,{color:"primary",size:"sm",onClick:function(){Te("Suppliers List"),Oe(""),He(""),Me(!1),X(!0),te(!ee),pt(),re((function(){return!1}))},children:"View Existing Suppliers"})]}),Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(R.jsx)(m.a,{color:"info",size:"sm",title:"Download Customer List Excel Template",style:{width:"100%",height:29},children:Object(R.jsx)("a",{href:I,style:{color:"white"},children:"Download Template"})}),Object(R.jsx)(m.a,{title:"Upload your  excel file",color:"primary",onClick:function(){re(!0),_([]),M(!0)},size:"sm",style:{width:"100%",height:29},children:"Upload Excel File"})]})]}),Object(R.jsx)("h3",{className:"mb-0",children:"Add Business Partner"})]})})}),Object(R.jsx)(v.a,{children:Object(R.jsxs)(j.a,{children:[Object(R.jsx)("h6",{className:"heading-small text-muted",style:{marginTop:-20},children:"User information"}),Object(R.jsxs)("div",{className:"",style:{marginTop:-10},children:[Object(R.jsxs)(o.a,{children:[Object(R.jsx)(l.a,{lg:"6",style:{margin:0},children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-username",children:"Name"})," ",Object(R.jsxs)("code",{style:{color:"darkred"},children:["*"," ",n.touched.customerName&&n.errors.customerName]}),Object(R.jsx)(f.a,{className:"form-control font-sm",id:"customerName",name:"customerName",placeholder:"Full name",type:"text",value:n.values.customerName,onBlur:n.handleBlur,onChange:n.handleChange})]})}),Object(R.jsx)(l.a,{lg:"6",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-username",children:"Type"})," ",Object(R.jsxs)("code",{style:{color:"darkred"},children:["*"," ",n.touched.customerName&&n.errors.customerName]}),Object(R.jsxs)("select",{className:"form-control font-sm",id:"customerType",name:"customerType",value:n.values.customerType,onBlur:n.handleBlur,onChange:n.handleChange,style:{height:29,padding:"0px 5px"},children:[Object(R.jsx)("option",{value:"CUS",children:"Customer"}),Object(R.jsx)("option",{value:"SUP",children:"Supplier"})]})]})})]}),Object(R.jsxs)(o.a,{style:{marginTop:-15},children:[Object(R.jsx)(l.a,{lg:"6",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"customerTin",children:"Ghana Card/TIN"})," ",Object(R.jsxs)("code",{style:{color:"darkred"},children:["*"," ",n.touched.customerTin&&n.errors.customerTin]}),Object(R.jsx)(f.a,{className:"form-control font-sm",placeholder:"Ghana Card/TIN",id:"customerTin",name:"customerTin",type:"text",disabled:oe,value:n.values.customerTin,onBlur:n.handleBlur,onChange:n.handleChange,bsSize:"sm"})]})}),oe&&Object(R.jsx)(l.a,{lg:"6",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-status",children:"Status"})," ",Object(R.jsxs)(m.a,{className:"form-control font-sm",id:"status",name:"status",type:"button",color:"white",value:_e?"Active":"Inactive",onClick:function(){return Pe(!_e)},size:"sm",children:[Object(R.jsx)(P.d,{color:_e?"green":"red",style:{marginRight:20}})," ",_e?"Active":"Inactive"]})]})})]}),Object(R.jsxs)(o.a,{style:{marginTop:-15},children:[Object(R.jsx)(l.a,{lg:"6",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-email",children:"Email address"})," ",Object(R.jsxs)("code",{style:{color:"darkred"},children:["*"," ",n.touched.customerEmail&&n.errors.customerEmail]}),Object(R.jsx)(f.a,{className:"form-control font-sm",id:"customerEmail",name:"customerEmail",placeholder:"somename@somemail.com",type:"email",value:n.values.customerEmail,onBlur:n.handleBlur,onChange:n.handleChange,bsSize:"sm"})]})}),Object(R.jsx)(l.a,{lg:"6",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-last-name",children:"Phone Number"})," ",Object(R.jsxs)("code",{style:{color:"darkred"},children:["*"," ",n.touched.customerPhone&&n.errors.customerPhone]}),Object(R.jsx)(f.a,{className:"form-control font-sm",id:"customerPhone",name:"customerPhone",placeholder:"phone",type:"tel",value:n.values.customerPhone,onBlur:n.handleBlur,onChange:n.handleChange,bsSize:"sm"})]})})]})]}),Object(R.jsx)("hr",{className:"my-2"}),Object(R.jsx)("h6",{className:"heading-small text-muted",children:"Contact information"}),Object(R.jsxs)("div",{children:[Object(R.jsx)(o.a,{style:{marginTop:-10},children:Object(R.jsx)(l.a,{md:"12",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-address",children:"Address"}),Object(R.jsx)(f.a,{className:"form-control font-sm",id:"customerAddress",name:"customerAddress",placeholder:"Address",type:"text",value:n.values.customerAddress,onBlur:n.handleBlur,onChange:n.handleChange,bsSize:"sm"})]})})}),Object(R.jsxs)(o.a,{style:{marginTop:-15},children:[Object(R.jsx)(l.a,{lg:"6",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-city",children:"City"}),Object(R.jsx)(f.a,{className:"form-control font-sm",id:"customerCity",name:"customerCity",placeholder:"City",type:"text",value:n.values.customerCity,onBlur:n.handleBlur,onChange:n.handleChange,bsSize:"sm"})]})}),Object(R.jsx)(l.a,{lg:"6",children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)("label",{className:"form-control-label",htmlFor:"input-country",children:"Ghana Post Service"}),Object(R.jsx)(f.a,{className:"form-control font-sm",id:"customerDigitalAddress",name:"customerDigitalAddress",placeholder:"GA-XXX-XXXX",type:"text",value:n.values.customerDigitalAddress,onBlur:n.handleBlur,onChange:n.handleChange,bsSize:"sm"})]})})]}),Object(R.jsx)(o.a,{children:Object(R.jsxs)(l.a,{lg:"12",className:"text-align",style:{display:"flex",flexDirection:"row-reverse"},children:[Object(R.jsx)(m.a,{color:"success",onClick:n.handleSubmit,size:"sm",disabled:!1,children:oe?"Update":"Save"}),Object(R.jsx)(m.a,{style:{marginRight:10},color:"secondary",disabled:vt||At,ref:dt,onClick:function(){le(!1),n.resetForm()},size:"sm",children:"Clear"})]})})]})]})})]})})]})}),Object(R.jsx)(w,{show:J,setShow:M,setCustomerList:_,setIsSearched:ge}),Object(R.jsx)(k,{message:'Are you sure you want to proceed with deleting  "'.concat(null===Ue||void 0===Ue?void 0:Ue.customerName,'"?'),showPrompt:De,setShowPrompt:we,customerToDelete:Ue,setCustomerList:_,setLoading:X,getCustomerList:ht,getSupplierList:pt,resetFormBtn:dt}),F||At||vt?Object(R.jsx)(C.a,{}):null]})]})},{body:{marginTop:0,height:"inherit",maxHeight:"inherit",overflow:"auto",marginBottom:40}})}}]);