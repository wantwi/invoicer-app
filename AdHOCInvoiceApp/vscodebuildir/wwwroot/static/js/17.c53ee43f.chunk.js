(this["webpackJsonpgra-invoicer"]=this["webpackJsonpgra-invoicer"]||[]).push([[17],{667:function(e,t,a){"use strict";a.r(t);var r=a(9),c=a(5),o=a(20),s=a(26),n=a(8),i=a(2),l=a(172),p=a(110),d=a(80),u=a(171),m=a(450),O=a(145),h=a(165),R=a(245),j=a(401),b=a(144),E=(a(654),a(656),a(657),a(658),a(659),a(47)),A=a(1),_={items:~ej.ReportViewer.ToolbarItems.Parameters},v=function(e){var t=e.setInitialValue,a=e.setShowReport,r=e.reportParam,c=e.reportPath,o=Object(i.useRef)(null),s=Object(E.a)(),l=Object(i.useState)([]),p=Object(n.a)(l,2);p[0],p[1];console.log({auth:s}),Object(i.useEffect)((function(){return function(){t({}),a(!1)}}),[c]);return Object(A.jsx)(BoldReportViewerComponent,{id:"reportviewer-container",reportServerUrl:Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3"}).REACT_APP_REPORTSERVERURL,reportServiceUrl:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",reportPath:"".concat("/eVAT/eVAT_Report/").concat(c),onShowError:function(e){alert("Error code : "+e.errorCode+"\nError Detail : "+e.errorDetail+"\nError Message : "+e.errorMessage),e.cancel=!0},toolbarSettings:_,parameters:function(){var e=[];return Object.keys(r).forEach((function(t){var a={name:t,labels:[t],values:[r[t]],nullable:!1};e.push(a)})),e}(),ref:o,printMode:!0})},T=a(502),P=a(38),C=a(149),S=a.n(C),f=[{value:"JournalInvoiceReport",name:"Invoice Journal Report"},{value:"InvoicePurchaseReport",name:"Purchase Journal Report"},{value:"JournalRefundReport",name:"Refund Journal Report"},{value:"EvatDailySummaryReport",name:"EVAT Daily Summary Report"},{value:"InvoiceSummaryReport",name:"Invoice Summary Report"},{value:"DailySummaryReport",name:"Daily Summary Report"},{value:"EvatInvoiceSummaryReport",name:"EVAT Invoice Summary Report"},{value:"JournalInvoiceByCurrencyReport",name:"Journal Invoice By Currency Report"},{value:"PeriodicItemReport",name:"Periodic Item Report"}],x={};t.default=function(){var e=Object(P.a)(),t=Object(i.useState)(""),a=Object(n.a)(t,2),_=a[0],C=a[1],g=Object(i.useState)(!1),N=Object(n.a)(g,2),y=N[0],I=N[1],V=Object(i.useState)("auto"),L=Object(n.a)(V,2),w=L[0],D=L[1],U=Object(i.useState)(""),H=Object(n.a)(U,2),F=H[0],k=H[1],J=Object(i.useState)({}),W=Object(n.a)(J,2),B=W[0],M=W[1],Q=Object(i.useState)([]),q=Object(n.a)(Q,2),Y=q[0],G=q[1],K=Object(i.useState)({}),X=Object(n.a)(K,2),z=(X[0],X[1]),Z=Object(i.useState)(!0),$=Object(n.a)(Z,2),ee=$[0],te=$[1],ae=(Object(i.useRef)(null),Object(E.b)().user),re=Object(i.useState)(""),ce=Object(n.a)(re,2),oe=(ce[0],ce[1],Object(i.useState)(!1)),se=Object(n.a)(oe,2),ne=se[0],ie=se[1],le=function(){var t=Object(s.a)(Object(o.a)().mark((function t(a){var r,c,s;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},C(a),t.next=4,e.get("/api/GetReportMeta/Get".concat(a,"Meta"));case 4:c=t.sent,s=c.data,JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3"}).REACT_APP_OIDC_USER)),s&&(G(s),s.forEach((function(e){"userid"===e.paramName.toLowerCase()?r["".concat(e.paramName)]=ae.sub:r["".concat(e.paramName)]=""})),M(r),s.forEach((function(e){x["".concat(e.paramName)]="date"===e.type.toLowerCase?T.a().required("".concat(e.placeholder," is required")):"number"===e.type.toLowerCase?T.b().required("".concat(e.placeholder," is required")):T.d().required("".concat(e.placeholder," is required"))})),T.c().shape(x),G(s));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),pe=function(){ie(!1),I(!1),D("auto"),te(!0)},de=function(e){M((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(r.a)({},e.target.name,e.target.value))}))},ue=function(){return 0===Object.values(B).filter((function(e){return""===e})).length};return Object(i.useEffect)((function(){return pe(),function(){}}),[_]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(l.a,{message:"This is your report page. View all reports here",pageName:"Reports"}),Object(A.jsx)("div",{className:"mt--7",style:{width:"95%",margin:"auto"},children:Object(A.jsx)(p.a,{className:"mt-5",children:Object(A.jsx)(d.a,{className:"mb-5 mb-xl-0",lg:"12",xl:"12",children:Object(A.jsxs)(u.a,{className:"bg-white shadow",style:{height:w,overflow:"hidden"},children:[Object(A.jsx)(m.a,{className:"bg-secondary border-5",style:{height:100},children:Object(A.jsxs)(p.a,{className:"align-items-center",children:[Object(A.jsx)(d.a,{xs:"8",children:Object(A.jsx)(p.a,{children:Object(A.jsxs)(d.a,{xs:"8",children:[Object(A.jsx)("h3",{className:"mb-2",children:"Report"}),Object(A.jsx)(O.a,{children:Object(A.jsxs)("select",{className:"form-control font-sm",value:F,onChange:function(e){k(e.target.value),le(e.target.value),e.target.value.length>0?te(!0):te(!1),pe()},style:{height:29,padding:"0px 5px"},children:[Object(A.jsx)("option",{value:"",children:"Select report"}),f.map((function(e,t){return Object(A.jsx)("option",{value:e.value,children:e.name},t)}))]})})]})})}),Object(A.jsx)(d.a,{className:"text-right",xs:"4",children:ee?Object(A.jsx)(h.a,{hidden:!(F.length>0),color:"primary",size:"sm",onClick:function(){ie(!0),D("70vh"),te(!1)},children:"Open Report"}):null})]})}),Object(A.jsx)(R.a,{className:"mt--1",children:y?Object(A.jsx)(v,{reportParam:B,reportPath:_,setInitialValue:z,setShowReport:I}):null})]})})})}),Object(A.jsxs)(j.a,{className:"modal-dialog-centered modal-md",isOpen:ne,toggle:function(){return""},children:[Object(A.jsxs)("div",{className:"modal-header",children:[Object(A.jsx)("h1",{className:"modal-title",id:"exampleModalLabel",children:"Report Parameter"}),Object(A.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:pe,children:Object(A.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(A.jsxs)("div",{className:"modal-body",id:"report-modal",children:[Y.map((function(e,t){var a=e.type,o=(e.isRequired,e.placeholder),s=(e.value,e.paramName);return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(O.a,{children:[Object(A.jsxs)("h3",{hidden:"userid"===s.toLowerCase(),className:"mb-0",children:[o," "]},"".concat(t,"__").concat(s,"a")),"date"===a.toLowerCase()?Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(S.a,{id:s,name:s,maxDate:new Date,placeholderText:o,className:"form-control",showIcon:!0,dateFormat:"yyyy/MM/dd",selected:B[s],onChange:function(e){M((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(r.a)({},s,e))}))},style:{height:29,padding:"0px 5px"}})}):Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(b.a,{hidden:"userid"===s.toLowerCase(),name:s,id:s,type:"".concat(a.toLowerCase()),placeholder:o,onChange:de,value:B.paramName},"".concat(t,"_").concat(s))})]},"".concat(t,"__").concat(s,"b"))})})),Object(A.jsxs)(p.a,{children:[Object(A.jsx)(d.a,{xs:6,children:Object(A.jsx)(h.a,{color:"danger",size:"md",type:"submit",onClick:pe,style:{width:"100%"},children:"Cancel"})}),Object(A.jsx)(d.a,{xs:6,children:Object(A.jsx)(h.a,{color:"primary",size:"md",type:"submit",onClick:function(e){ue()&&(ie(!1),I(!0))},style:{width:"100%"},children:"View Report"})})]})]})]})]})}}}]);