(this["webpackJsonpgra-invoicer"]=this["webpackJsonpgra-invoicer"]||[]).push([[11],{475:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(5),n=a(20),r=a(26),c=a(148),i=a(38),l=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{isEnabled:!0,queryTag:"/?filter="},u=Object(i.a)(),h=d.isEnabled,j=(d.queryTag,function(){var t=Object(r.a)(Object(n.a)().mark((function t(){var a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get(e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),p=Object(c.a)({queryKey:[t,a],queryFn:j,onSuccess:function(e){return l(e)},onError:function(e){return o(e)},enabled:h});return Object(s.a)({},p)})},479:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(5),n=a(20),r=a(26),c=a(87),i=a(248),l=a(38),o=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},d=Object(c.b)(),u=Object(l.a)(),h=function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var s;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log({postData:a}),console.log({url:e}),t.next=4,u.post(e,a);case 4:return s=t.sent,t.abrupt("return",s.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=Object(i.a)({mutationFn:h,onSuccess:function(e){d.invalidateQueries({queryKey:[t,""]}),a(e)},onError:function(e){return o(e)}});return Object(s.a)({},j)})},483:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(5),n=a(20),r=a(26),c=a(87),i=a(248),l=(a(149),a(38)),o=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},d=Object(c.b)(),u=Object(l.a)(),h=function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var s;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log({postData:a}),console.log({url:e}),t.next=4,u.put(e,a);case 4:return s=t.sent,t.abrupt("return",s.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=Object(i.a)({mutationFn:h,onSuccess:function(e){d.invalidateQueries({queryKey:[t,""]}),a(e)},onError:function(e){return o(e)}});return Object(s.a)({},j)}},669:function(e,t,a){"use strict";a.r(t);var s=a(9),n=a(5),r=a(20),c=a(26),i=a(8),l=a(173),o=a(52),d=a(2),u=a(249),h=a(172),j=a(246),p=a(399),b=a(114),O=a(80),m=a(147),A=a(146),E=a(113),v=a(59),R=(a(649),a(650)),_=a.n(R),f=a(1);var T=function(e){var t=e.setshowAddUser,a=e.formik,s=e.isEditMode,n=e.userStatus,r=e.setUserStatus,c=e.setIsEditMode,i=e.handleAddUser,l=e.handleUpdateUser,o=e.handleInviteLinkResend,R=e.setPhone,T=e.loading,P=e.formattedPhone;return Object(d.useEffect)((function(){return function(){c(!1),null===a||void 0===a||a.resetForm(),R(""),r(!0)}}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(u.a,{className:"modal-dialog-centered modal-lg",isOpen:!0,toggle:function(){return console.log("toggled")},children:[Object(f.jsxs)("div",{className:"modal-header",children:[Object(f.jsx)("h1",{className:"modal-title",id:"exampleModalLabel",children:s?"Update User":"New User "}),Object(f.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){a.resetForm(),r(!0),c(!1),t(!1)},children:Object(f.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(f.jsx)("div",{className:"modal-body",style:{display:"flex"},children:Object(f.jsxs)(h.a,{className:" shadow",style:{width:"100%",height:"500px"},children:[Object(f.jsxs)(j.a,{children:[Object(f.jsx)("div",{style:{zIndex:1e5,display:"flex",flexDirection:"roq",justifyContent:"center",alignItems:"center",position:"absolute"}}),Object(f.jsxs)(p.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(f.jsxs)(b.a,{children:[Object(f.jsxs)(O.a,{lg:"6",children:[Object(f.jsxs)(m.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"First Name"})," ",Object(f.jsx)("code",{style:{color:"darkred"},children:a.errors.fname}),Object(f.jsx)(A.a,{className:"form-control",placeholder:"First name",id:"fname",name:"fname",type:"text",disabled:s,value:a.values.fname,onChange:a.handleChange})]})," "]}),Object(f.jsxs)(O.a,{lg:"6",children:[Object(f.jsxs)(m.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Last Name"})," ",Object(f.jsx)("code",{style:{color:"darkred"},children:a.errors.lname}),Object(f.jsx)(A.a,{className:"form-control",placeholder:"Last name",id:"lname",name:"lname",type:"text",disabled:s,value:a.values.lname,onChange:a.handleChange})]})," "]})]}),Object(f.jsxs)(b.a,{children:[Object(f.jsxs)(O.a,{lg:"6",children:[Object(f.jsxs)(m.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Email"})," ",Object(f.jsx)("code",{style:{color:"darkred"},children:a.errors.email}),Object(f.jsx)(A.a,{className:"form-control",placeholder:"Email",id:"email",name:"email",type:"email",disabled:s,value:a.values.email,onChange:a.handleChange})]})," "]}),Object(f.jsxs)(O.a,{lg:"6",children:[Object(f.jsxs)(m.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Cell Phone"})," ",Object(f.jsx)(_.a,{className:"form-control cellPhone",type:"tel",id:"cellPhone",name:"cellPhone",value:P,onChange:function(e){R(e.target.rawValue),a.handleChange(e)},options:{phone:!0,phoneRegionCode:"GH"}})]})," "]})]}),Object(f.jsx)(b.a,{children:Object(f.jsxs)(O.a,{lg:"12",children:[Object(f.jsxs)(m.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Username"})," ",Object(f.jsx)("code",{style:{color:"darkred"},children:a.errors.username}),Object(f.jsx)(A.a,{className:"form-control",placeholder:"Username",type:"tel",id:"username",name:"username",disabled:s,value:a.values.username,onChange:a.handleChange})]})," "]})}),Object(f.jsxs)(b.a,{children:[Object(f.jsxs)(O.a,{lg:"6",children:[Object(f.jsxs)(m.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"User Type"}),Object(f.jsxs)(A.a,{disabled:s,type:"select",className:"form-control",id:"userType",name:"userType",value:a.values.userType,onChange:a.handleChange,children:[Object(f.jsx)("option",{children:"Select User Type"}),Object(f.jsx)("option",{value:1,children:"Admin"}),Object(f.jsx)("option",{value:0,children:"Default"})]})]})," "]}),Object(f.jsxs)(O.a,{lg:"6",children:[Object(f.jsxs)(m.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Status"}),Object(f.jsxs)(E.a,{className:"form-control",color:"secondary",id:"userStatus",name:"userStatus",onClick:function(){return r(!n)},children:[Object(f.jsx)(v.d,{color:n?"green":"red",style:{marginRight:20}}),n?"Active":"Inactive"]})]})," "]})]})]})]}),Object(f.jsxs)("div",{className:"modal-footer",children:[" ",s?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(E.a,{color:"secondary",type:"button",onClick:function(){return o()},children:"Resend Invite Link"}),Object(f.jsx)(E.a,{color:"success",type:"button",onClick:function(){return l()},children:"Update"})]}):Object(f.jsx)(E.a,{color:"success",type:"button",onClick:function(){return i()},children:T?"Submitting":"Submit"})]})]})})]})})},P=a(97),C=a(117),S=a(116),g=a(245),x=a(454),N=a(247),U=a(484),y=a(537),I=a(505),L=a(21),D=a(475),V=a(174),w=a(479),k=a(483),F=a(60),H={userID:"",fname:"",lname:"",email:"",cellPhone:"",userType:"",username:""};t.default=function(){var e=Object(d.useState)(!1),t=Object(i.a)(e,2),a=t[0],u=t[1],p=Object(d.useState)(!0),m=Object(i.a)(p,2),R=m[0],_=m[1],q=Object(d.useState)([]),W=Object(i.a)(q,2),Q=(W[0],W[1]),B=Object(d.useState)(!0),K=Object(i.a)(B,2),Y=(K[0],K[1]),J=Object(d.useState)(!1),G=Object(i.a)(J,2),M=G[0],X=G[1],Z=Object(d.useState)(""),z=Object(i.a)(Z,2),$=z[0],ee=z[1],te=Object(V.a)($,500),ae=Object(i.a)(te,1)[0],se=Object(d.useState)(""),ne=Object(i.a)(se,2),re=ne[0],ce=ne[1],ie=Object(F.c)(),le=ie.getUser,oe=ie.user;ie.logout;Object(d.useEffect)(Object(c.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return e.abrupt("return",(function(){}));case 3:case"end":return e.stop()}}),e)}))),[]);var de=Object(y.a)({initialValues:H,validationSchema:I.c({email:I.d().email("Invalid Email Address").required("Required"),fname:I.d().required("Required"),lname:I.d().required("Required"),username:I.d().required("Required")}),onSubmit:function(e){return console.log(Object(n.a)(Object(n.a)({},e),{},{userStatus:R}))}}),ue=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),Object(D.a)(ae?"/api/GetUsers/".concat(ae):"/api/GetUsers","user",ae,(function(e){Y(!1)}),(function(e){Y(!1)}))),he=ue.refetch,je=ue.data,pe=void 0===je?[]:je;console.log({gha:pe});var be=function(e){var t;console.log({err:e}),L.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||"Error saving new user"),Y(!1)},Oe=Object(w.a)("/api/createUser","users",(function(e){L.b.success("User successfully saved"),Y(!1),u(!1),de.resetForm(),he()}),be),me=Oe.mutate,Ae=Oe.isLoading,Ee=Object(w.a)("/api/SendUserEmail","users",(function(){u(!1),L.b.success("Invite link sent successfully")}),(function(e){var t;L.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||"Could not send invite link")})),ve=Ee.mutate,Re=Ee.isLoading,_e=Object(k.a)("/api/UpdateUserDto/".concat(de.values.userID),"users",(function(e){L.b.success("User successfully updated"),Y(!1),u(!1),ee(""),de.resetForm(),he()}),be),fe=_e.mutate,Te=_e.isLoading;console.log({data:pe});var Pe=function(e){var t;X(!0),u(!0),ce(null===e||void 0===e?void 0:e.phoneNumber);var a=null===(t=[e])||void 0===t?void 0:t.map((function(e){return{userID:e.id,fname:e.firstName,lname:e.lastName,email:e.email,cellPhone:e.phoneNumber,userType:e.role,username:e.userName,userStatus:e.userStatus}}));de.setValues(a[0])};Object(U.debounce)((function(e){fetch("/api/GetUsers/".concat(null===oe||void 0===oe?void 0:oe.jk)).then((function(e){return e.json()})).then((function(e){Q(e)}))}),300);Object(d.useEffect)((function(){return ae.length>1&&he(),function(){}}),[ae]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(l.a,{message:"This is your user management page",pageName:"User Account Management"}),Object(f.jsx)(L.a,{}),Object(f.jsx)(C.ErrorBoundary,{FallbackComponent:S.a,onError:function(e,t){console.log("Logging",e,t)},children:Object(f.jsxs)(g.a,{className:"mt--7",fluid:!0,children:[Object(f.jsx)(b.a,{className:"mt-5",children:Object(f.jsx)(O.a,{className:"order-xl-2 mb-5 mb-xl-0",xl:"12",children:Object(f.jsxs)(h.a,{className:"shadow",style:{height:655},children:[Object(f.jsx)(x.a,{className:"bg-white border-0",children:Object(f.jsxs)(b.a,{className:"align-items-center",children:[Object(f.jsx)(O.a,{xs:"6",children:Object(f.jsx)(A.a,{className:"form-control",placeholder:"Search username",type:"text",value:$,onChange:function(e){return ee(e.target.value)}})}),Object(f.jsx)(O.a,{className:"text-right",xs:"6",children:Object(f.jsx)(E.a,{color:"success",onClick:function(){return u(!a)},size:"md",children:"Add New User"})})]})}),Object(f.jsxs)(j.a,{style:{height:500,maxHeight:500,overflow:"auto"},children:[(Te||Ae||Re)&&Object(f.jsx)(o.a,{}),Object(f.jsxs)(N.a,{className:"align-items-center  table-flush",responsive:!0,children:[Object(f.jsx)("thead",{className:"thead-light",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{style:{width:"30%"},scope:"col",children:"User Name"}),Object(f.jsx)("th",{style:{width:"10%"},scope:"col",children:"Role"}),Object(f.jsx)("th",{style:{width:"30%"},scope:"col",children:"Email Address"}),Object(f.jsx)("th",{style:{width:"20%"},scope:"col",children:"Phone Number"}),Object(f.jsx)("th",{style:{width:"10%"},scope:"col",children:"Status"}),Object(f.jsx)("th",{style:{textAlign:"right",width:"10%"},scope:"col",children:"Actions"})]})}),Object(f.jsx)("tbody",{children:(null===pe||void 0===pe?void 0:pe.length)>0?null===pe||void 0===pe?void 0:pe.map((function(e,t){return Object(f.jsxs)("tr",{onClick:function(){return Pe(e)},children:[Object(f.jsx)("td",{children:e.userName}),Object(f.jsx)("td",{children:1==e.role?"Admin":"Default"}),Object(f.jsx)("td",{children:e.email}),Object(f.jsx)("td",{children:e.phoneNumber}),Object(f.jsxs)("td",{children:[" ",Object(f.jsx)(v.d,{color:e.userStatus?"green":"red",style:{marginRight:20}}),e.userStatus?"Active":"Inactive"]}),Object(f.jsx)("td",{style:{textAlign:"right",width:"10%",height:20,cursor:"pointer"},onClick:function(){return Pe(e)},children:Object(f.jsx)(P.b,{})})]},t)})):null})]})]})]})})}),a&&Object(f.jsx)(T,{setshowAddUser:u,formik:de,userStatus:R,setUserStatus:_,isEditMode:M,setIsEditMode:X,handleAddUser:function(){var e=de.values;if(e.fname&&e.lname&&e.username){var t={firstName:e.fname,lastName:e.lname,userName:e.username,email:e.email,phone:re,role:Number(e.userType)};me(t)}else{L.b.warning("Please fill all necessary information")}},handleUpdateUser:function(){var e;Y(!0);var t=de.values,a=(e={Firstname:t.fname,Lastname:t.lname,Email:t.email,PhoneNumber:t.cellPhone},Object(s.a)(e,"PhoneNumber",t.cellPhone),Object(s.a)(e,"UserName",t.username),Object(s.a)(e,"UserStatus",R),Object(s.a)(e,"Role",Number(t.userType)),e);fe(a)},handleInviteLinkResend:function(){Y(!0),ve({Id:de.values.userID})},setPhone:ce,formattedPhone:re,loading:Ae})]})})]})}}}]);