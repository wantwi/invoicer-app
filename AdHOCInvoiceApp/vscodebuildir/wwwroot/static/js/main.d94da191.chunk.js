(this["webpackJsonpgra-invoicer"]=this["webpackJsonpgra-invoicer"]||[]).push([[4],{102:function(e,t,n){"use strict";t.a="data:image/png;base64,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"},106:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=n.covidRate,i=n.cstRate,r=(n.cstWithVat,n.getfundRate),c=n.nhilRate,o=(n.regularLeviesWithVat,n.tourismRate),s=(n.trsmWithVat,c/100),l=r/100,u=a/100,d=i/100,b=o/100,j=n.vatRate/100,p=e.isTaxable,h=0,f=0,v=0,m=0;if(!p)return v=e.quantity*e.price,{isINC:!1,taxable:!1,discount:Number(t),itemCode:e.itemCode,itemName:e.itemName,quantity:Number(e.quantity),price:Number(e.price),taxableAmount:Number(e.quantity)*Number(e.price),nhil:0,getf:0,covid:0,otherLevies:0,vatItemId:e.vatItemId,vatableAmt:h,vat:f,totalPayable:v,isTaxable:!1};if(null===e||void 0===e||!e.isTaxInclusive){var O=e.quantity*e.price,x=s*O,g=l*O,y=u*O;return v="NON"===(null===e||void 0===e?void 0:e.otherLevies)?(f=j*(h=O+x+g+y))+h-t:"CST"===(null===e||void 0===e?void 0:e.otherLevies)?(f=j*(h=O+x+g+y+(m=d*O)))+h-t:"TRSM"===(null===e||void 0===e?void 0:e.otherLevies)?(h=O+x+g+y)+(f=j*h)+(m=b*O)-t:(f=j*(h=O+x+g+y))+h,{isINC:!1,isTaxInclusive:!1,taxable:p,discount:Number(t),itemCode:e.itemCode,itemName:e.itemName,quantity:Number(e.quantity),price:Number(e.price),taxableAmount:O,nhil:x,getf:g,covid:y,otherLevies:m,vatItemId:e.vatItemId,vatableAmt:h,vat:f,totalPayable:v,isTaxable:p}}if(null!==e&&void 0!==e&&e.isTaxInclusive){!0;var A=0;A="CST"===(null===e||void 0===e?void 0:e.otherLevies)?(null===e||void 0===e?void 0:e.price)/((1+s+u+d+l)*(1+j)):"TRSM"===(null===e||void 0===e?void 0:e.otherLevies)?(null===e||void 0===e?void 0:e.price)/((1+s+u+b+l)*(1+j)):(null===e||void 0===e?void 0:e.price)/((1+s+u+l)*(1+j));var R=s*(A*=null===e||void 0===e?void 0:e.quantity),E=l*A,P=u*A;return"NON"===(null===e||void 0===e?void 0:e.otherLevies)||""===(null===e||void 0===e?void 0:e.otherLevies)?v=(f=j*(h=A+R+E+P))+h-t:"CST"===(null===e||void 0===e?void 0:e.otherLevies)?v=(f=j*(h=A+R+E+P+(m=d*A)))+h-t:"TRSM"===(null===e||void 0===e?void 0:e.otherLevies)&&(v=(h=A+R+E+P)+(f=j*h)+(m=b*A)-t),{isINC:!0,isTaxInclusive:!0,taxable:p,discount:Number(t),itemCode:e.itemCode,itemName:e.itemName,quantity:Number(e.quantity),price:Number(e.price),taxableAmount:A,nhil:R,getf:E,covid:P,otherLevies:m,vatItemId:e.vatItemId,vatableAmt:h,vat:f,totalPayable:v,isTaxable:p}}}},116:function(e,t,n){"use strict";n(2);var a=n(1);t.a=function(e){return Object(a.jsx)("div",{children:"Something went wrong!"})}},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var a=n(20),i=n(26),r=n(8),c=n(2),o=n(85),s=n(59),l=(n(102),n(113)),u=n(245),d=n(114),b=n(80),j=n(172),p=n(454),h=n(399),f=n(147),v=n(450),m=n(451),O=n(238),x=n(146),g=n(455),y=n(456),A=n(457),R=n(458),E=n(180),P=n(56),T=(n(52),n(365),n(21)),S=(n(256),n(257),n(61),n(182)),C=n(465),N=n(460),_=n(472),w=n(470),I=n(471),D=n(453),L=n(469),k=n(83),U=n(181),F=n(1),V=function(e){var t=e.handleClose,n=e.open,o=e.selectedInvoiceNo,s=(e.setShowRetryLoader,JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),Object(c.useState)(!1)),l=Object(r.a)(s,2),u=l[0],d=l[1],b=Object(k.a)("".concat("https://psl-app-vm3/EvatApi/api/v1","/Invoices/GetSignatureSales/").concat(o.invoiceNo),"invoice",o.invoiceNo,(function(){d(!1),T.b.success("Successs"),t()}),(function(e){d(!1),T.b.warning(e)})).refetch,j=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0),b();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=Object(U.a)("".concat("https://psl-app-vm3/EvatApi/api/v1","/Invoices?id=").concat(o.id),"invoices","",(function(){d(!1),t()}),(function(e){d(!1),t(),T.b.warning(e)})).mutate;return Object(F.jsx)("div",{children:Object(F.jsxs)(N.a,{open:n,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[" ",Object(F.jsx)(D.a,{id:"alert-dialog-title",children:"Error"}),Object(F.jsxs)(w.a,{style:{textAlign:"center"},children:[u?Object(F.jsx)(L.a,{size:24}):null,Object(F.jsx)(I.a,{id:"alert-dialog-description",children:null==o.ysdcregsig?"Your invoice does not have a signature. Please try again":o.ysdcregsig})]}),Object(F.jsxs)(_.a,{children:[Object(F.jsx)(C.a,{variant:"outlined",color:"secondary",onClick:t,children:"Cancel"}),Object(F.jsx)(C.a,{variant:"outlined",color:"warning",onClick:function(){d(!0),p()},children:"Refund"}),Object(F.jsx)(C.a,{variant:"outlined",color:"success",onClick:j,autoFocus:!0,children:"Retry"})]})]})})},H=n(223),B=n(175),W=n(123),Q=n(174),z=n(47),q=n(224),M=n(38),J=Object(c.createContext)(null),G=(t.b=function(){var e,t,n=Object(M.a)(),C=Object(z.a)().selectedBranch,N=Object(c.useState)(!1),_=Object(r.a)(N,2),w=_[0],I=_[1],D=Object(c.useState)([]),L=Object(r.a)(D,2),U=L[0],K=L[1],Y=Object(c.useState)(!1),X=Object(r.a)(Y,2),Z=(X[0],X[1],Object(c.useState)(1)),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(10),ae=Object(r.a)(ne,1)[0],ie=Object(c.useState)({totalItems:10,pageNumber:1,pageSize:10,totalPages:5}),re=Object(r.a)(ie,2),ce=re[0],oe=re[1],se=Object(c.useState)(!1),le=Object(r.a)(se,2),ue=(le[0],le[1],Object(c.useState)(!1)),de=Object(r.a)(ue,2),be=(de[0],de[1],Object(c.useState)({})),je=Object(r.a)(be,2),pe=(je[0],je[1],Object(c.useState)(!1)),he=Object(r.a)(pe,2),fe=he[0],ve=(he[1],Object(c.useState)("")),me=Object(r.a)(ve,2),Oe=me[0],xe=me[1],ge=Object(c.useState)(null),ye=Object(r.a)(ge,2),Ae=(ye[0],ye[1],Object(c.useState)(!1)),Re=Object(r.a)(Ae,2),Ee=(Re[0],Re[1]),Pe=Object(c.useState)(!1),Te=Object(r.a)(Pe,2),Se=Te[0],Ce=Te[1],Ne=Object(c.useState)({}),_e=Object(r.a)(Ne,2),we=_e[0],Ie=_e[1],De=Object(c.useState)(""),Le=Object(r.a)(De,2),ke=(Le[0],Le[1],Object(c.useState)("Partial")),Ue=Object(r.a)(ke,2),Fe=(Ue[0],Ue[1],Object(c.useState)(!1)),Ve=Object(r.a)(Fe,2),He=Ve[0],Be=Ve[1],We=Object(c.useState)(""),Qe=Object(r.a)(We,2),ze=Qe[0],qe=Qe[1],Me=Object(c.useState)([]),Je=Object(r.a)(Me,2),Ge=Je[0],Ke=Je[1],Ye=Object(c.useState)(0),Xe=Object(r.a)(Ye,2),Ze=Xe[0],$e=Xe[1],et=Object(c.useState)(""),tt=Object(r.a)(et,2),nt=tt[0],at=tt[1],it=Object(c.useState)(!1),rt=Object(r.a)(it,2),ct=(rt[0],rt[1]),ot=Object(c.useState)(!1),st=Object(r.a)(ot,2),lt=(st[0],st[1],Object(c.useState)(null)),ut=Object(r.a)(lt,2),dt=ut[0],bt=ut[1],jt=Object(c.useRef)(),pt=Object(Q.a)(Oe,500),ht=Object(r.a)(pt,1)[0],ft=Object(c.useState)(""),vt=Object(r.a)(ft,2),mt=vt[0],Ot=vt[1],xt=Object(c.useState)(""),gt=Object(r.a)(xt,2),yt=(gt[0],gt[1],Object(c.useState)(!1)),At=Object(r.a)(yt,2),Rt=At[0],Et=At[1],Pt=Object(c.useState)(""),Tt=Object(r.a)(Pt,2),St=(Tt[0],Tt[1],Object(c.useState)("")),Ct=Object(r.a)(St,2),Nt=Ct[0],_t=Ct[1],wt=React.useMemo((function(){return[{Header:"Invoice #",accessor:"invoiceNo",className:" text-left ",width:190},{Header:"Date",accessor:"date",className:" text-left ",width:140,Cell:function(e){var t=e.cell.value;return Object(F.jsx)(F.Fragment,{children:new Date(t).toLocaleDateString("en-GB")})}},{Header:"Customer",accessor:"customerName",className:" text-left ",Cell:function(e){var t=e.cell.value;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("span",{"data-tip":t,children:t}),Object(F.jsx)(W.a,{})]})},width:"auto"},{Header:function(){return Object(F.jsx)("span",{align:"left",style:{float:"left",width:"100%"},children:"Created By"})},accessor:"nameOfUser",className:" text-left ",Cell:function(e){var t=e.cell.value;return Object(F.jsx)(F.Fragment,{children:t})},width:"auto"},{Header:function(){return Object(F.jsx)("span",{align:"right",style:{float:"right",width:"100%"},children:"Currency"})},accessor:"currency",className:" text-right ",width:141},{Header:function(){return Object(F.jsx)("span",{align:"right",style:{float:"right",width:"100%"},children:"EX VAT amount"})},accessor:"totalExVatAmount",className:" text-right ",Cell:function(e){var t=e.cell.value;return Object(F.jsx)(F.Fragment,{children:Object(P.b)(t)})},width:141},{Header:function(){return Object(F.jsx)("span",{align:"right",style:{float:"right",width:"100%"},children:"Total Payable"})},accessor:"totalAmount",className:" text-right ",Cell:function(e){var t=e.cell.value;return Object(F.jsx)(F.Fragment,{children:Object(P.b)(t)})},width:139},{Header:function(){return Object(F.jsx)("div",{align:"center",children:"View"})},disableSortBy:!0,className:" text-center table-action",Cell:function(e){var t=e.cell.value;return Object(F.jsx)(l.a,{style:{padding:"2px 8px"},className:"badge-success",onClick:function(e){Ot(t)},title:"Preview",children:Object(F.jsx)(s.f,{})})},accessor:"id"}]}),[]),It=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),new AbortController,function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var i,r,c,o,s,l,u;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe(t),Ee(!0),i="",e.prev=3,Et(!0),bt("Fetching invoice detail..."),e.next=8,n.post("/api/GenerateVATInvoiceReportAsync",t);case 8:(r=e.sent)&&(c=r.data,o="application/pdf",_t(i="data:application/pdf;base64,"+c),Ce(!0),s=function(e){for(var t=e.substr("data:".concat(o,";base64,").length),n=atob(t),a=n.length,i=new Uint8Array(a);a--;)i[a]=n.charCodeAt(a);return new Blob([i],{type:o})},(l=document.createElement("a")).href=URL.createObjectURL(s(i)),l.download="Invoice Report",Ee(!1)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),console.log({error:e.t0}),Ee(!1),T.b.error((null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.data)||"System failed to download invoice");case 17:return e.prev=17,Et(!1),bt(null),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[3,12,17,21]])})));return function(t){return e.apply(this,arguments)}}());console.log({pageNumber:ee,pageInfo:ce}),Object(c.useEffect)((function(){at("GHS")}),[]),console.log({pageInfo:ce});var Dt=Object(k.a)("/api/GetSalesInvoicesDetail/".concat(mt),"invoice",mt,(function(e){Ot(""),Ee(!1),"SUCCESS"===e.signatureStatus?(Ee(!1),Ie(e),Ce(!0)):(Ee(!1),Be(!0))}),(function(e){qe(kt),Ee(!1)}),{isEnabled:!1}),Lt=(Dt.refetch,Dt.data,Dt.isLoading,Dt.isFetching,Object(q.a)("/api/GetTransactionSummary/".concat(Ze,"/").concat(ee,"/").concat(ae,"/").concat(null===C||void 0===C?void 0:C.code),"salesinvoices",ee,Number(Ze),ht,(function(e){var t,n,a;if(console.log({data:e}),K((null===e||void 0===e||null===(t=e.invoices)||void 0===t?void 0:t.items)||[]),oe(null===(n=e.invoices)||void 0===n?void 0:n.paging),Ke((null===e||void 0===e?void 0:e.summaries)||[]),0===(null===e||void 0===e||null===(a=e.invoices)||void 0===a?void 0:a.items.length)){var i,r,c,o=ht?"No invoice matched your search: "+ht:"No Invoice Available For "+(null===jt||void 0===jt||null===(i=jt.current)||void 0===i||null===(r=i.options[null===jt||void 0===jt||null===(c=jt.current)||void 0===c?void 0:c.selectedIndex])||void 0===r?void 0:r.innerText);return T.b.info(o),void bt(o)}bt(null)}),(function(e){}),{filterUrl:"/api/GetSalesInvoicesByCompanyId/".concat(ht)})),kt=Lt.data,Ut=Lt.refetch,Ft=(Lt.isFetching,Lt.isLoading);return Object(c.useEffect)((function(){return 0===ee&&(oe({totalItems:10,pageNumber:1,pageSize:10,totalPages:5}),te(1)),Ut(),function(){}}),[Ze,ee]),Object(c.useEffect)((function(){return ht.length>1&&Ut(),function(){}}),[ht]),console.log({use:kt}),Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(J.Provider,{value:{invoices:U,setInvoices:K},children:Object(F.jsxs)(H.a,{children:[Object(F.jsx)(E.a,{summary:Ge,currencyFilter:nt,setCurrencyFilter:at,period:Ze,setPeriod:$e,dayOfWeekSelRef:jt,pageName:"Sales Invoice"}),Object(F.jsxs)(u.a,{className:"mt--7",fluid:!0,children:[Object(F.jsx)(T.a,{}),Object(F.jsx)(d.a,{className:"my-5",children:Object(F.jsx)(b.a,{className:"mb-5 mb-xl-0",xl:"12",children:Object(F.jsxs)(j.a,{className:"shadow",children:[Object(F.jsx)(p.a,{className:"border-0",children:Object(F.jsxs)(d.a,{className:"align-items-center",children:[Object(F.jsx)("div",{className:"col",children:Object(F.jsx)(h.a,{className:"navbar-search navbar-search-light form-inline ",onSubmit:function(e){e.preventDefault()},children:Object(F.jsxs)(f.a,{className:"mb-0",children:[" ",Object(F.jsxs)(v.a,{className:"input-group-alternative",children:[Object(F.jsx)(m.a,{addonType:"prepend",style:{marginTop:7},children:Object(F.jsx)(O.a,{children:Object(F.jsx)("i",{className:"fas fa-search"})})}),Object(F.jsx)(x.a,{placeholder:"Search Transactions by Invoice No or Customer name",type:"text",value:Oe,onChange:function(e){if((null===Oe||void 0===Oe?void 0:Oe.length)>25)return xe((function(e){return e.substring(0,16)})),void bt("Your search query is too long");xe(e.target.value)},style:{width:400}}),Object(F.jsx)(m.a,{addonType:"append",children:Object(F.jsx)(O.a,{onClick:function(){return xe("")},children:fe&&Object(F.jsx)("i",{className:"fas fa-times"})})})]}),Oe.length>0&&Object(F.jsx)("button",{onClick:function(){te(1),xe(""),Ut()},className:"ml-4 btn btn-secondary",children:"Reset"})]})})}),Object(F.jsx)("div",{className:"col text-right mt-0",children:Object(F.jsxs)(l.a,{color:"primary",onClick:function(e){return I(!w)},size:"md",children:[Object(F.jsx)(s.h,{})," Create Invoice"]})})]})}),Object(F.jsx)("div",{style:G.body,children:Object(F.jsx)(B.a,{isLoading:Ft||Rt,columns:wt,data:(null===kt||void 0===kt||null===(e=kt.invoices)||void 0===e?void 0:e.items)||[],data2:U,setSelectedRow:Ot,getPrintPDF:It,pdfData:Nt,message:dt,sortKey:"date"})}),Object(F.jsx)(g.a,{className:"py-1",children:!Ft&&(null===kt||void 0===kt||null===(t=kt.invoices)||void 0===t?void 0:t.items.length)>0&&Object(F.jsx)("nav",{"aria-label":"...",children:null!==ce&&void 0!==ce&&ce.pageNumber?Object(F.jsxs)(y.a,{className:"pagination justify-content-center mb-0",listClassName:"justify-content-center mb-0",children:[Object(F.jsx)(A.a,{children:Object(F.jsxs)(R.a,{onClick:function(e){e.preventDefault(),ce.pageNumber>1&&(ee<1||te((function(e){return Number(e)-1})))},children:[Object(F.jsx)("i",{className:"fas fa-angle-left"}),Object(F.jsx)("span",{className:"sr-only",children:"Previous"})]})}),Object(F.jsx)(A.a,{children:Object(F.jsx)(R.a,{onClick:function(e){return te(1)},children:"1"})}),Object(F.jsx)(A.a,{className:"active",children:Object(F.jsx)(R.a,{onClick:function(e){return e.preventDefault()},children:ce.pageNumber})}),Object(F.jsx)(A.a,{children:Object(F.jsx)(R.a,{onClick:function(e){return te(ce.totalPages)},children:ce.totalPages})}),Object(F.jsx)(A.a,{children:Object(F.jsxs)(R.a,{onClick:function(e){ce.pageNumber<ce.totalPages&&ee!==ce.totalPages&&te((function(e){return Number(e)+1}))},children:[Object(F.jsx)("i",{className:"fas fa-angle-right"}),Object(F.jsx)("span",{className:"sr-only",children:"Next"})]})})]}):null})})]})})}),w?Object(F.jsx)(o.b,{refetch:Ut,setShowNewInvoiceModal:I}):null,Se&&Object(F.jsx)(S.a,{setShowReport:Ce,formData:we,getPrintPDF:It,pdfData:Nt,selectedInvoiceNo:ze}),Object(F.jsx)(V,{handleClose:function(){Be(!1)},open:He,selectedInvoiceNo:ze,setShowRetryLoader:ct})]})]})})})},{body:{marginTop:0,height:520,overflow:"auto"}})},173:function(e,t,n){"use strict";var a=n(8),i=n(245),r=n(114),c=n(80),o=n(2),s=n.n(o),l=(n(61),n(1));t.a=function(e){var t=e.message,n=e.pageName,o=void 0===n?"":n,u=s.a.useState(""),d=Object(a.a)(u,2),b=(d[0],d[1]);return s.a.useEffect((function(){var e=sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER),t=JSON.parse(e);t?b((function(e){return t.profile})):setTimeout((function(){}))}),[]),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"header pb-5 pt-5 pt-lg-5 d-flex align-items-center",style:{height:"200px",backgroundSize:"cover",backgroundPosition:"center top"},children:[Object(l.jsx)("span",{className:"mask bg-gradient-default opacity-8"}),Object(l.jsx)(i.a,{className:"d-flex align-items-center",fluid:!0,children:Object(l.jsx)(r.a,{children:Object(l.jsxs)(c.a,{lg:"12",md:"10",children:[Object(l.jsx)("h3",{className:"display-5 text-white",children:o}),Object(l.jsx)("p",{className:"text-white text-small",style:{fontSize:13,marginTop:-5,paddingTop:0},children:t})]})})})]})})}},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5),i=n(247),r=(n(56),n(2),n(145)),c=n(52),o=n(1),s=function(e){var t=e.columns,n=e.data,s=e.isLoading,l=(e.setSelectedRow,e.getPrintPDF),u=void 0===l?function(){return null}:l,d=e.sortKey,b=e.message,j=Object(r.useTable)({columns:t,data:n,initialState:{pageIndex:0,sortBy:[{id:d||"",desc:!0}]},defaultColumn:{width:"auto",maxWidth:150}},r.useSortBy,r.usePagination),p=j.getTableProps,h=j.getTableBodyProps,f=j.headerGroups,v=j.prepareRow,m=j.footerGroups,O=j.page;return Object(o.jsxs)("div",{id:"evat-table-wrapper",style:{position:"relative"},children:[s&&Object(o.jsx)("div",{id:"table-loader-wrapper",children:Object(o.jsx)(c.a,{})}),Object(o.jsx)("p",{id:"table-info",className:"text-info text-center",style:{zIndex:"1000",marginTop:"190px"},children:b}),Object(o.jsx)("div",{style:{position:"relative",lineHeight:1,height:"520px"},children:Object(o.jsxs)(i.a,Object(a.a)(Object(a.a)({},p()),{},{className:"align-items-center table-flush ",id:"index-table",responsive:!0,children:[Object(o.jsx)("thead",{className:"thead-light",children:f.map((function(e){return Object(o.jsx)("tr",Object(a.a)(Object(a.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(o.jsxs)("th",Object(a.a)(Object(a.a)({className:"thead-light",style:Object(a.a)({},e.getHeaderProps.style)},e.getHeaderProps(Object(a.a)(Object(a.a)({},e.getSortByToggleProps()),{},{style:{width:e.width}}))),{},{children:[e.render("Header"),Object(o.jsx)("span",{className:"",children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(o.jsx)("tbody",Object(a.a)(Object(a.a)({},h()),{},{style:{lineHeight:.5},children:O.map((function(e,t){return v(e),Object(o.jsx)("tr",Object(a.a)(Object(a.a)({},e.getRowProps()),{},{className:"table-record",onClick:function(){var t;return u(null===e||void 0===e||null===(t=e.original)||void 0===t?void 0:t.id)},children:e.cells.map((function(e){return Object(o.jsx)("td",Object(a.a)(Object(a.a)({},e.getCellProps({className:e.column.className,style:{width:e.column.width}})),{},{children:e.render("Cell")}))}))}))}))})),Object(o.jsx)("tfoot",{children:m.map((function(e){return Object(o.jsx)("tr",Object(a.a)(Object(a.a)({className:"bg-blueGray-50 text-blueGray-500 border-blueGray-100"},e.getFooterGroupProps()),{},{children:e.headers.map((function(e){return Object(o.jsx)("td",Object(a.a)(Object(a.a)({className:"border-t-0 px-6 align-middle text-right border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},e.getFooterProps()),{},{children:e.Footer&&e.render("Footer")}))}))}))}))})]}))})]})}},179:function(e,t,n){"use strict";n.p},180:function(e,t,n){"use strict";var a=n(8),i=n(2),r=n(245),c=n(114),o=n(80),s=n(172),l=n(246),u=n(400),d=(n(56),n(61),n(150)),b=(n(21),n(1));t.a=function(e){var t=e.pageName,n=void 0===t?"":t,j=e.summary,p=e.currencyFilter,h=(e.setCurrencyFilter,e.period),f=e.setPeriod,v=e.dayOfWeekSelRef,m=e.displayRecent,O=void 0===m||m,x=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),Object(i.useState)(j[1])),g=Object(a.a)(x,2),y=g[0],A=g[1];return Object(i.useEffect)((function(){A(j[1])}),[]),Object(i.useEffect)((function(){A(y)}),[p]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"header bg-gradient-info pb-5 pt-5 pt-md-5",children:Object(b.jsx)(r.a,{fluid:!0,children:Object(b.jsxs)("div",{className:"header-body",children:[Object(b.jsx)("h2",{className:"mt-1 mb-1",style:{color:"white"},children:n}),Object(b.jsx)(c.a,{children:Object(b.jsx)(o.a,{lg:"4",xl:"4",children:Object(b.jsx)(s.a,{className:"card-stats mb-0 mb-xl-0 bg",style:{height:60},children:Object(b.jsx)(l.a,{children:Object(b.jsxs)(c.a,{children:[Object(b.jsxs)("div",{className:"col",children:[Object(b.jsx)(u.a,{tag:"h5",className:"text-uppercase text-muted mb-0"}),Object(b.jsxs)("select",{className:"form-control",value:h,onChange:function(e){f(e.target.value)},ref:v,style:{height:30,fontSize:13,padding:0,paddingLeft:8},children:[O&&Object(b.jsx)("option",{value:0,children:"Recent"}),Object(b.jsx)("option",{value:1,children:"This Week"}),Object(b.jsx)("option",{value:2,children:"This Month"}),Object(b.jsx)("option",{value:3,children:"Last Month"}),Object(b.jsx)("option",{value:4,children:"This Year"}),Object(b.jsx)("option",{value:5,children:"Last Year"}),Object(b.jsx)("option",{value:6,children:"All Transactions"})]})]}),Object(b.jsx)(o.a,{className:"col-auto",children:Object(b.jsx)("div",{className:"icon icon-shape bg-info text-white rounded-circle shadow",style:{width:40,height:40,marginTop:-5},children:Object(b.jsx)(d.b,{size:"large"})})})]})})})})}),Object(b.jsx)("br",{})]})})})})}},181:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(5),i=n(20),r=n(26),c=n(87),o=n(248),s=n(38),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},d=Object(c.b)(),b=Object(s.a)(),j=function(){var t=Object(r.a)(Object(i.a)().mark((function t(n){var a,r,c,o,s,l;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.delete(e,n);case 2:if(!((null===(r=t.sent)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.status)>=400)){t.next=8;break}throw(l=new Error(null===(c=JSON.parse(null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.data))||void 0===c?void 0:c.message)).code=null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.status,console.log({useMutationError:l}),l;case 8:return t.abrupt("return",r.data);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=Object(o.a)({mutationFn:j,onSuccess:function(e){d.removeQueries({queryKey:[t,n]}),l(e)},onError:function(e){return u(e)}});return Object(a.a)({},p)}},182:function(e,t,n){"use strict";n(56),n(2);var a=n(249),i=n(113),r=(n(72),n(370),n(115),n(1));var c=function(e){var t=e.pdfData;return e.invoiceNo,Object(r.jsx)("embed",{title:"Invoice",autoSave:"true",src:"".concat(t),style:{height:"70vh"}})};t.a=function(e){var t=e.setShowReport,n=(e.formData,e.getPrintPDF,e.salesType,e.showSignature,e.bottom,e.pdfData),o=e.selectedInvoiceNo;return JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_ENV,Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(a.a,{className:"modal-dialog-centered modal-lg",isOpen:!0,toggle:function(){return console.log("toggled")},children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("h1",{className:"modal-title",id:"exampleModalLabel",children:"Invoice"}),Object(r.jsx)("div",{children:Object(r.jsx)(i.a,{"aria-label":"Close","data-dismiss":"modal",type:"button",size:"sm",onClick:function(){return t(!1)},children:Object(r.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})})]}),n&&Object(r.jsx)(c,{invoiceNo:o,pdfData:n})]})})}},186:function(e,t,n){},188:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/user.6537f30a.png"},215:function(e,t,n){"use strict";var a=n(20),i=n(26),r=n(8),c=n(2),o=n(38);t.a=function(e,t){var n=Object(c.useState)([]),s=Object(r.a)(n,2),l=s[0],u=s[1],d=Object(c.useState)(null),b=Object(r.a)(d,2),j=b[0],p=b[1],h=Object(c.useState)(e),f=Object(r.a)(h,2),v=f[0],m=f[1],O=Object(c.useState)(!1),x=Object(r.a)(O,2),g=x[0],y=x[1],A=Object(o.a)(),R=Object(c.useCallback)(Object(i.a)(Object(a.a)().mark((function e(){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,n=[],v.forEach((function(e){n.push(A.get(e))})),e.next=6,Promise.allSettled(n);case 6:if(i=e.sent){e.next=9;break}throw"Data was not fetched";case 9:u(i),t(i),p(null),y(!1),m([]),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),p(e.t0),y(!1),m([]);case 21:case"end":return e.stop()}}),e,null,[[1,16]])}))));return Object(c.useEffect)((function(){v.length>0&&R()}),[v]),console.log({data:l}),{data:l,error:j,isLoading:g,setUrls:m}}},217:function(e,t,n){"use strict";var a=n(5),i=n(31),r=(n(2),n(21)),c=n(249),o=n(172),s=n(246),l=n(399),u=n(114),d=n(80),b=n(147),j=n(146),p=n(113),h=n(106),f=n(1);t.a=function(e){var t=e.updateItemData,n=e.setUpdateItemData,v=e.setShowUpdate,m=e.gridData,O=e.setGridData,x=e.showDiscountField;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(c.a,{className:"modal-dialog-centered modal-md",isOpen:!0,toggle:function(){return console.log("toggled")},children:[Object(f.jsxs)("div",{className:"modal-header",children:[Object(f.jsx)("h4",{className:"",id:"exampleModalLabel",children:"Update Item"}),Object(f.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){return v(!1)},children:Object(f.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(f.jsxs)("div",{className:"modal-body",style:{marginTop:-30},children:[Object(f.jsx)("h5",{style:{color:"teal"},children:t.itemName}),Object(f.jsxs)(o.a,{className:"shadow",children:[Object(f.jsxs)(s.a,{children:[Object(f.jsx)(r.a,{}),Object(f.jsxs)(l.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(f.jsx)(u.a,{children:Object(f.jsxs)(d.a,{lg:"12",children:[Object(f.jsxs)(b.a,{children:[Object(f.jsx)("label",{hidden:!0,className:"form-control-label",children:"Item"}),Object(f.jsx)(j.a,{hidden:!0,className:"form-control font-sm",placeholder:"Item Name",type:"text",disabled:!0,value:t.itemName,bsSize:"sm"})]})," "]})}),Object(f.jsxs)(u.a,{style:{marginTop:-20},children:[Object(f.jsxs)(d.a,{lg:"4",children:[Object(f.jsxs)(b.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Quantity"}),Object(f.jsx)(j.a,{className:"form-control font-sm",placeholder:"Quantity",type:"number",value:t.quantity,onChange:function(e){return n(Object(a.a)(Object(a.a)({},t),{},{quantity:Number(e.target.value)}))},bsSize:"sm"})]})," "]}),Object(f.jsxs)(d.a,{lg:"4",children:[Object(f.jsxs)(b.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Price"}),Object(f.jsx)(j.a,{className:"form-control font-sm",placeholder:"Quantity",type:"number",disabled:!0,value:t.price,bsSize:"sm"})]})," "]}),x&&Object(f.jsxs)(d.a,{lg:"4",children:[Object(f.jsxs)(b.a,{children:[Object(f.jsx)("label",{className:"form-control-label",children:"Discount"}),Object(f.jsx)(j.a,{className:"form-control font-sm",placeholder:"Discount",type:"number",value:t.discount,onChange:function(e){return n(Object(a.a)(Object(a.a)({},t),{},{discount:Number(e.target.value)}))},bsSize:"sm"})]})," "]})]})]}),Object(f.jsx)(p.a,{size:"sm",color:"success",type:"button",onClick:function(){var e=t.itemName,n=t.isInclusive,r=m.findIndex((function(e,n){return n==t.index})),c=Object(i.a)(m),o=m[r];"CST Item"===e||"CST Inclusive Item"===e.trim()?n?(t.quantity,t.price):(t.price,t.quantity):"TRSM Item"===e&&(n?(t.quantity,t.price):(t.price,t.quantity)),t.isInclusive||t.isTaxable;var s=Object(h.a)(Object(a.a)(Object(a.a)({},t),{},{otherLevies:null===o||void 0===o?void 0:o.otherLeviesType,isTaxable:null===o||void 0===o?void 0:o.isTaxable,isTaxInclusive:null===o||void 0===o?void 0:o.isTaxInclusive}),null===t||void 0===t?void 0:t.discount),l=Object(a.a)(Object(a.a)(Object(a.a)({},t),s),{},{itemCode:null===o||void 0===o?void 0:o.itemCode,vatItemId:null===o||void 0===o?void 0:o.vatItemId});c[r].discount=Number(l.discount),c[r].quantity=Number(l.quantity),c[r].price=l.price,c[r].taxableAmount=null===l||void 0===l?void 0:l.taxableAmount,c[r].nhil=l.nhil,c[r].getf=null===l||void 0===l?void 0:l.getf,c[r].covid=null===l||void 0===l?void 0:l.covid,c[r].totalPayable=null===l||void 0===l?void 0:l.totalPayable,c[r].otherLevies=null===l||void 0===l?void 0:l.otherLevies,c[r].vat=null===l||void 0===l?void 0:l.vat,c[r].otherLeviesType=null===o||void 0===o?void 0:o.otherLeviesType,c[r].isTaxable=null===o||void 0===o?void 0:o.isTaxable,O(c),v(!1)},style:{width:"100%"},children:"Update"})]}),Object(f.jsx)("div",{className:"modal-footer"})]})]})]})})}},223:function(e,t,n){"use strict";var a=n(13),i=n(14),r=n(15),c=n(16),o=n(2),s=n(1),l=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={hasError:!1},i}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("Logging",e,t)}},{key:"render",value:function(){return this.state.hasError?Object(s.jsx)("div",{children:"Ooops....Something went wrong"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(o.Component);t.a=l},224:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5),i=n(20),r=n(26),c=n(148),o=n(38),s=(n(21),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{isEnabled:!0,filterUrl:"",shouldTransform:!0},j=Object(o.a)(),p=b.isEnabled,h=b.filterUrl,f=b.shouldTransform,v=void 0===f||f,m=function(){var t=Object(r.a)(Object(i.a)().mark((function t(){var n,a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l?h:e,t.next=3,j.get(n);case 3:return a=t.sent,t.abrupt("return",null===a||void 0===a?void 0:a.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=Object(c.a)({queryKey:[t,n,s,l],queryFn:m,onSuccess:function(e){return u(e)},onError:function(e){return d(e)},enabled:p,select:function(e){if(l&&v){var t={},n={};return n.paging={totalItems:e.length,pageNumber:1,pageSize:5,totalPages:1},n.items=e,t.invoices=n,t.summaries=e,t}return e}});return Object(a.a)(Object(a.a)({},O),{},{isLoading:O.isLoading&&"idle"!==O.fetchStatus})})},225:function(e,t,n){"use strict";var a=n(5),i=n(8),r=n(2),c=n(450),o=n(451),s=n(238),l=n(146),u=n(172),d=n(1),b=function(e){var t=e.filteredSuggestions,n=(e.activeSuggestionIndex,e.onClick),a=e.businessPartner;return t.length?Object(d.jsx)(u.a,{style:{position:"absolute",width:"100%",zIndex:"1000",margin:0,maxHeight:"200px",minWidth:"max-content",overflow:"auto"},children:t.map((function(e,t){return Object(d.jsx)("div",{className:"customer-item",style:{padding:"0px",borderBottom:"1px solid #e3e3e3",alignContent:"center",marginTop:5,marginBottom:3,cursor:"pointer"},children:Object(d.jsx)("ul",{onClick:function(){return n(e)},children:e.name})},t)}))}):Object(d.jsx)("div",{className:"no-suggestions",children:Object(d.jsxs)("em",{style:{color:"darkred"},children:[a," not found on the list"]})})};t.a=function(e){var t=e.suggestions,n=e.formData,u=e.setFormData,j=e.businessPartner,p=Object(r.useState)([]),h=Object(i.a)(p,2),f=h[0],v=h[1],m=Object(r.useState)(0),O=Object(i.a)(m,2),x=O[0],g=O[1],y=Object(r.useState)(!1),A=Object(i.a)(y,2),R=A[0],E=A[1],P=Object(r.useState)(""),T=Object(i.a)(P,2),S=T[0],C=T[1],N=function(e){var i=e.target.value,r=t.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())}));C(e.target.value),u(Object(a.a)(Object(a.a)({},n),{},{customer:i})),v(r),g(0),E(!0)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(c.a,{className:"input-group-alternative",children:[Object(d.jsx)(o.a,{addonType:"prepend",children:Object(d.jsx)(s.a,{children:Object(d.jsx)("i",{className:"fas fa-search"})})}),Object(d.jsx)(l.a,{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},className:"form-control-alternative",type:"text",placeholder:"Name",onChange:N,onKeyDown:N,value:S})]}),R&&S&&Object(d.jsx)(b,{filteredSuggestions:f,activeSuggestionIndex:x,onClick:function(e){v([]),C(e.name),u(Object(a.a)(Object(a.a)({},n),{},{customer:e.name,identity:e.tin,email:e.email,tel:e.telephone})),g(0),E(!1)},businessPartner:j})]})}},226:function(e,t,n){"use strict";var a=n(5),i=n(8),r=(n(85),n(2)),c=n(21),o=n(450),s=n(451),l=n(238),u=n(146),d=n(172),b=n(1),j=function(e){var t=e.filteredSuggestions,n=(e.activeSuggestionIndex,e.onClick);return t.length?Object(b.jsx)(d.a,{style:{position:"absolute",width:"93%",zIndex:"1000",margin:0,maxHeight:"200px",overflow:"auto"},children:t.map((function(e,t){return Object(b.jsx)("div",{className:"customer-item",style:{padding:"0px",borderBottom:"1px solid #e3e3e3",alignContent:"center",marginTop:5,marginBottom:3,cursor:"pointer"},children:Object(b.jsx)("ul",{onClick:function(){return n(e)},title:e.description,children:e.name})},t)}))}):Object(b.jsx)("div",{className:"no-suggestions",children:Object(b.jsx)("em",{style:{color:"darkred"},children:"No results found on the list"})})},p=function(e){var t=e.onChange,n=e.onFocus,a=e.value;return Object(b.jsx)(u.a,{className:"form-control-alternative",type:"text",placeholder:"Select Item",onChange:t,onKeyDown:t,value:a,onFocus:n})};t.a=function(e){var t=e.suggestions,n=e.formData,u=e.gridData,d=e.setFormData,h=e.setDisabled,f=e.setIsTaxable,v=e.isPurchasing,m=void 0!==v&&v,O=Object(r.useState)([]),x=Object(i.a)(O,2),g=x[0],y=x[1],A=Object(r.useState)(0),R=Object(i.a)(A,2),E=R[0],P=R[1],T=Object(r.useState)(!1),S=Object(i.a)(T,2),C=S[0],N=S[1],_=Object(r.useState)([]),w=Object(i.a)(_,2),I=w[0],D=w[1];Object(r.useEffect)((function(){D(null===u||void 0===u?void 0:u.map((function(e){return null===e||void 0===e?void 0:e.itemName})))}),[u]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(o.a,{className:"input-group-alternative",onClick:function(){N((function(e){return!e})),P(0),y(t)},children:[Object(b.jsx)(p,{onChange:function(e){var i=e.target.value,r=t.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())}));d(Object(a.a)(Object(a.a)({},n),{},{itemName:i})),y(r),P(0),N(!0)},value:n.itemName}),Object(b.jsx)(s.a,{addonType:"append",onClick:function(){return N(!1)},children:Object(b.jsx)(l.a,{children:Object(b.jsx)("i",{className:C?"fas fa-angle-up":"fas fa-angle-down"})})})]}),C&&Object(b.jsx)(j,{filteredSuggestions:g,activeSuggestionIndex:E,onClick:function(e){var t;(t=e.name,null===I||void 0===I?void 0:I.includes(t))?c.b.warning("".concat(e.name," already selected")):(y([]),d((function(t){return m?Object(a.a)(Object(a.a)({},t),{},{itemName:e.name,vatItemId:null===e||void 0===e?void 0:e.id}):(f(null===e||void 0===e?void 0:e.taxable),Object(a.a)(Object(a.a)({},n),{},{itemName:e.name,price:null===e||void 0===e?void 0:e.price,vatItemId:null===e||void 0===e?void 0:e.id,itemCode:null===e||void 0===e?void 0:e.code,otherLevies:null===e||void 0===e?void 0:e.otherLevies,isTaxInclusive:null===e||void 0===e?void 0:e.isTaxInclusive}))})),P(0),N(!1),h(!1))}})]})}},251:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(20),i=n(26),r=n(8),c=n(2),o=n(249),s=n(113),l=n(102),u=n(21),d=n(52),b=n(87),j=n(248),p=n(38),h=n(403),f=n(47),v=n(1);function m(e){var t=e.message,n=e.showPrompt,m=e.setshowPrompt,O=e.refundInvoice,x=e.reset,g=e.setOpen,y=e.refundTypeForPost,A=Object(c.useState)(!1),R=Object(r.a)(A,2),E=R[0],P=R[1],T=Object(b.b)(),S=Object(p.a)(),C=Object(f.a)(),N=C.selectedBranch,_=C.user,w=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var n,i,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.postData,i=t.refundType,P(!0),e.next=4,S.post("/api/PostRefund/".concat(i,"/").concat(null===N||void 0===N?void 0:N.code),n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(j.a)({mutationFn:w,onSuccess:function(){u.b.success("Invoice successfully refunded"),P(!1),m(!1),g(!1),T.invalidateQueries("invoice-preview-refund",null===O||void 0===O?void 0:O.invoiceNumber),x(Object(h.a)())},onError:function(e){var t;u.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||"Could not refund invoice. Please try again"),P(!1),m(!1)}}).mutate;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(o.a,{className:"modal-dialog-centered modal-danger",contentClassName:"bg-gradient-info",isOpen:n,children:[" ",E?Object(v.jsx)(d.a,{}):null,Object(v.jsxs)("div",{className:"modal-header",children:[Object(v.jsx)("h6",{className:"modal-title",id:"modal-title-notification",children:"Your attention is required"}),Object(v.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){return m(!1)},children:Object(v.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(v.jsx)("div",{className:"modal-body",children:Object(v.jsxs)("div",{className:"py-3 text-center",children:[Object(v.jsx)("img",{src:l.a,alt:"refund"}),Object(v.jsx)("h4",{className:"heading mt-4",children:"Hi there..."}),Object(v.jsx)("p",{children:t})]})}),Object(v.jsxs)("div",{className:"modal-footer",children:[Object(v.jsx)(s.a,{className:"btn-white",color:"default",type:"button",onClick:function(){return function(e){var t={},n="";if("NO REFUNDS"===(null===O||void 0===O?void 0:O.refundType))if("Full"==y)t={id:e.id,invoiceNumber:e.invoiceNo,customerTinghcard:e.customerTinghcard,nameOfUser:null===_||void 0===_?void 0:_.name},n="Full";else{var a=null===e||void 0===e?void 0:e.invoiceItemsToPost.filter((function(e){return Boolean(e.refundQuantity)}));t={id:e.id,invoiceNumber:e.invoiceNo,customerTinghcard:e.customerTinghcard,nameOfUser:null===_||void 0===_?void 0:_.name,invoiceItems:a.map((function(t,n){var a,i;return{refundQuantity:t.refundQuantity,refundAmount:t.refundQuantity*(null===e||void 0===e||null===(a=e.invoiceItems[n])||void 0===a?void 0:a.payablePrice)/(null===e||void 0===e||null===(i=e.invoiceItems[n])||void 0===i?void 0:i.quantity),vatItemId:t.id}}))},n="Partial"}else{var i=null===e||void 0===e?void 0:e.invoiceItemsToPost.filter((function(e){return Boolean(e.refundQuantity)}));t={id:e.id,invoiceNumber:e.invoiceNo,customerTinghcard:e.customerTinghcard,nameOfUser:null===_||void 0===_?void 0:_.name,invoiceItems:i.map((function(t,n){var a,i;return{refundQuantity:t.refundQuantity,refundAmount:t.refundQuantity*(null===e||void 0===e||null===(a=e.invoiceItems[n])||void 0===a?void 0:a.price)/(null===e||void 0===e||null===(i=e.invoiceItems[n])||void 0===i?void 0:i.quantity),vatItemId:t.id}}))},n="Partial"}I({postData:t,refundType:n})}(O)},children:"Confirm"}),Object(v.jsx)(s.a,{className:"text-white ml-auto",color:"link","data-dismiss":"modal",type:"button",onClick:function(){m(!1)},children:"Decline"})]})]})})}},257:function(e,t,n){"use strict";var a=n(20),i=n(26),r=n(5),c=n(8),o=n(2),s=n.n(o),l=n(249),u=n(113),d=n(399),b=n(147),j=n(450),p=n(451),h=n(238),f=n(146),v=n(172),m=n(114),O=n(80),x=n(72),g=(n(179),n(102)),y=n(21),A=n(473),R=n(466),E=n(123),P=n(1),T=function(e){var t=e.settogglePartialRefund,n=e.canFullRefund,a=void 0!==n&&n,i=s.a.useState("partial"),r=Object(c.a)(i,2),o=r[0],l=r[1];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(R.a,{color:"primary",value:o,exclusive:!0,onChange:function(e){if("partial"===e.target.value)l("partial"),t(!0);else{if(!a)return;l("full"),t(!1)}},"aria-label":"Platform",children:[Object(P.jsx)(A.a,{color:"warning",value:"partial",children:"Partial Refund"}),Object(P.jsx)(A.a,{color:"success",value:"full",children:Object(P.jsx)("span",{"data-tip":!0,"data-for":"discount-type",id:"discount-type",children:"Full Refund"})})]}),!a&&Object(P.jsx)(E.a,{id:"discount-type",place:"top",type:"info",effect:"float",children:Object(P.jsxs)("span",{children:["Full refund operation cannot be performed",Object(P.jsx)("br",{})," on this invoice because it has been",Object(P.jsx)("br",{})," partially refunded"]})})]})},S=n(56),C=n(246),N=(n(85),function(e){return Number(e.qtyToRefund)>e.availableQty?{msg:"Refund quantity must not be greater than available quantity",isError:!0}:e.qtyToRefund<=0?{msg:"Refund quantity is invalid",isError:!0}:{msg:null,isError:!1}});var _=function(e){var t=e.setShowUpdate,n=e.updateItemData,a=e.setUpdateItemData,i=e.invoicesPrePost,s=e.setInvoicesPrePost,j=e.setConfirmDisabled,p=e.setAmountToRefund,h=Object(o.useState)(1),x=Object(c.a)(h,2),g=(x[0],x[1],Object(o.useState)(null)),A=Object(c.a)(g,2),R=(A[0],A[1]);Object(o.useEffect)((function(){var e=N(n);if(e.isError)a((function(e){return Object(r.a)(Object(r.a)({},e),{},{qtyToRefund:""})}));else{var t=function(e){var t=e.payablePrice/e.quantity*e.qtyToRefund;return Number(t).toFixed(4)||0}(n);a((function(e){return Object(r.a)(Object(r.a)({},e),{},{priceAfterRefund:t})}))}return R(e.msg),function(){}}),[n.qtyToRefund]);var E=Object(o.useCallback)((function(e){a((function(t){return Object(r.a)(Object(r.a)({},t),{},{qtyToRefund:Number(e.target.value)})}))}),[n]);return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(l.a,{className:"modal-dialog-centered modal-md",isOpen:!0,toggle:function(){return console.log("toggled")},children:[Object(P.jsxs)("div",{className:"modal-header",children:[Object(P.jsx)("h1",{className:"modal-title",id:"exampleModalLabel",children:"Refund Item"}),Object(P.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){return t(!1)},children:Object(P.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(P.jsx)("div",{className:"modal-body",style:{display:"flex"},children:Object(P.jsxs)(v.a,{className:" shadow",style:{width:"100%",height:"380px"},children:[Object(P.jsxs)(C.a,{children:[Object(P.jsx)("div",{style:{zIndex:1e5,display:"flex",flexDirection:"roq",justifyContent:"center",alignItems:"center",position:"absolute"}}),Object(P.jsx)(y.a,{}),Object(P.jsxs)(d.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(P.jsx)(m.a,{children:Object(P.jsxs)(O.a,{lg:"12",children:[Object(P.jsxs)(b.a,{children:[Object(P.jsx)("label",{className:"form-control-label",children:"Item"}),Object(P.jsx)(f.a,{className:"form-control",placeholder:"Item Name",type:"text",disabled:!0,value:n.itemName})]})," "]})}),Object(P.jsxs)(m.a,{children:[Object(P.jsxs)(O.a,{lg:"6",md:"6",children:[Object(P.jsxs)(b.a,{children:[Object(P.jsx)("label",{className:"form-control-label",children:"Qty"}),Object(P.jsx)(f.a,{className:"form-control",placeholder:"Item Name",type:"text",disabled:!0,value:n.availableQty})]})," "]}),Object(P.jsxs)(O.a,{lg:"6",md:"6",children:[Object(P.jsxs)(b.a,{children:[Object(P.jsx)("label",{className:"form-control-label",children:"Amount Paid"}),Object(P.jsx)(f.a,{className:"form-control",placeholder:"Item Name",type:"text",disabled:!0,value:n.price})]})," "]})]}),Object(P.jsxs)(m.a,{children:[Object(P.jsxs)(O.a,{lg:"6",children:[Object(P.jsxs)(b.a,{children:[Object(P.jsx)("label",{className:"form-control-label",children:"Qty To Refund"}),Object(P.jsx)(f.a,{className:"form-control",placeholder:"Quantity",type:"number",name:"Quantity",value:n.qtyToRefund,onChange:E})]})," "]}),Object(P.jsxs)(O.a,{lg:"6",children:[Object(P.jsxs)(b.a,{children:[Object(P.jsx)("label",{className:"form-control-label",children:"Refund Amount"}),Object(P.jsx)(f.a,{className:"form-control",placeholder:"Quantity",type:"number",disabled:!0,value:n.priceAfterRefund})]})," "]})]})]})]}),Object(P.jsxs)("div",{className:"modal-footer",children:[Object(P.jsx)(u.a,{color:"warning",type:"button",onClick:function(){return t(!1)},children:"Cancel"}),Object(P.jsx)(u.a,{color:"success",type:"button",onClick:function(){var e=N(n);if(!e.isError){p((function(e){return e+parseFloat(n.priceAfterRefund)})),t(!1),j(!1);var c=i,o=c.findIndex((function(e,t){return t==n.index})),l=JSON.parse(JSON.stringify(c));return l[o].refundQuantity=n.qtyToRefund,l[o].availableQty=n.availableQty-n.qtyToRefund,l[o].price=l[o].unitPrice*l[o].availableQty,l[o].taxableAmount=n.price*n.availableQty,s(l),t(!1),void j(!1)}y.b.error(e.msg),a((function(e){return Object(r.a)(Object(r.a)({},e),{},{qtyToRefund:""})}))},children:"Update"})]})]})})]})})},w=n(247),I=n(97),D=function(e){var t=e.invoiceItems,n=e.handleEditItem,a=e.isRefunded,i=e.togglePartialRefund;return Object(P.jsxs)(w.a,{className:"table-flush",responsive:!0,children:[Object(P.jsx)("thead",{className:"thead",children:Object(P.jsxs)("tr",{style:{lineHeight:"10px"},children:[Object(P.jsx)("th",{scope:"col",style:{width:"10% !important"},children:"Code"}),Object(P.jsx)("th",{scope:"col",style:{width:"30%"},children:"Desc"}),Object(P.jsx)("th",{scope:"col",style:{width:"16%",textAlign:"right"},children:"Original Qty"}),Object(P.jsx)("th",{scope:"col",style:{width:"16%",textAlign:"right"},children:"Available Qty"}),Object(P.jsx)("th",{scope:"col",style:{width:"15%",textAlign:"right"},children:"Amount"}),!a&&i&&Object(P.jsx)("th",{scope:"col",style:{width:"11%",textAlign:"right"},children:"Actions"})]})}),Object(P.jsx)("tbody",{children:t.map((function(e,t){return Object(P.jsxs)("tr",{style:{lineHeight:"1px"},children:[Object(P.jsx)("td",{style:{fontSize:"10px"},children:e.itemCode}),Object(P.jsx)("td",{style:{fontSize:"10px"},children:e.itemDescription.length>20?e.itemDescription.substring(0,35)+"...":e.itemDescription}),Object(P.jsx)("td",{style:{fontSize:"10px",textAlign:"right"},children:null===e||void 0===e?void 0:e.originalQty}),Object(P.jsx)("td",{style:{fontSize:"10px",textAlign:"right"},children:Number(null===e||void 0===e?void 0:e.availableQty).toFixed(4)}),Object(P.jsx)("td",{style:{fontSize:"10px",textAlign:"right"},children:Object(S.b)(e.price)}),!a&&i&&Object(P.jsx)("td",{style:{fontSize:"10px",textAlign:"right",cursor:"pointer"},children:Object(P.jsx)(I.b,{color:"darkred",title:"Edit",style:{marginRight:20,cursor:"pointer"},onClick:function(){n(t)}})})]},t)}))})]})},L=(n(149),n(148)),k=n(403),U=n(52),F=n(38),V=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return new Intl.NumberFormat(t,{minimumFractionDigits:n,maximumFractionDigits:2}).format(Number(e)?e:0)};var H={header:{display:"flex"},bottomcomments:{display:"flex",justifyContent:"space-between"},leftHeader:{display:"flex",width:"50%",flexDirection:"column",alignItems:"flex-start"},rightHeader:{display:"flex",width:"50%",flexDirection:"column",alignItems:"flex-end"},title:{},body:{marginTop:0,minHeight:"340px",overflow:"auto"},footer:{display:"flex",flexDirection:"row",marginTop:10,height:"10%",overflow:"auto"},total:{display:"block",borderTop:"1px solid rgb(227, 227, 227)",padding:"10px",textAlign:"right",width:"100%"},comments:{height:100,width:"47%",overflow:"auto",flexDirection:"row",backgroundColor:"#eff4fd",borderRadius:10,padding:10,color:"#cecece",marginTop:40},tablehead:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}};t.a=function(e){var t=e.show,n=e.setOpen,s=e.setshowPrompt,A=e.setrefundInvoice,R=e.setPromptMessage,E=e.setRefundType,S=e.refundType,C=e.setRefundTypeForPost,N=e.reset,w=Object(o.useState)(""),I=Object(c.a)(w,2),B=I[0],W=I[1],Q=Object(o.useState)(!1),z=Object(c.a)(Q,2),q=z[0],M=z[1],J=Object(o.useState)({invoiceNo:"",invoiceItems:[]}),G=Object(c.a)(J,2),K=G[0],Y=G[1],X=Object(o.useState)(!1),Z=Object(c.a)(X,2),$=Z[0],ee=Z[1],te=Object(o.useState)(!1),ne=Object(c.a)(te,2),ae=ne[0],ie=ne[1],re=Object(o.useState)(!1),ce=Object(c.a)(re,2),oe=ce[0],se=ce[1],le=Object(o.useState)(!0),ue=Object(c.a)(le,2),de=ue[0],be=ue[1],je=Object(o.useState)(!1),pe=Object(c.a)(je,2),he=pe[0],fe=pe[1],ve=Object(o.useState)({itemName:"",quantity:0,price:0,priceAfterRefund:0,qtyToRefund:1}),me=Object(c.a)(ve,2),Oe=me[0],xe=me[1],ge=Object(o.useState)(!1),ye=Object(c.a)(ge,2),Ae=ye[0],Re=ye[1],Ee=Object(o.useState)([]),Pe=Object(c.a)(Ee,2),Te=Pe[0],Se=Pe[1],Ce=Object(o.useState)(0),Ne=Object(c.a)(Ce,2),_e=Ne[0],we=Ne[1],Ie=Object(o.useState)(!1),De=Object(c.a)(Ie,2),Le=De[0],ke=De[1],Ue=Object(F.a)(),Fe=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return Object(r.a)(Object(r.a)({},e),{},{originalQty:e.quantity,quantity:e.quantity,itemDescription:e.itemDescription,itemCode:e.itemCode,availableQty:e.quantity-e.quantityRefunded,unitPrice:e.unitPrice,price:e.payablePrice})}))},Ve=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ke(!0),e.next=4,Ue.get("/api/GetByInvoiceNoTaxpayerId/".concat(t));case 4:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,ke(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})));return function(t){return e.apply(this,arguments)}}(),He=Object(L.a)({queryKey:["invoice-preview-refund",B],queryFn:function(){return Ve(B)},enabled:!1,onSuccess:function(e){if(e.body){var t;if("SUCCESS"!=(null===e||void 0===e||null===(t=e.body)||void 0===t?void 0:t.signatureStatus))return void y.b.info("Invoice is without signature. Refund operation cannot be performed");M(!0),Y(e.body),Se(Fe(e.body.invoiceItems)),ie(e.isRefunded),we(0)}else y.b.warning("Invoice does not exist")},cacheTime:0,onError:function(e){var t,n,a;500!==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)?y.b.error((null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)||"Invoice could not be saved."):y.b.error((null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data)||"Technical error!")}}),Be=He.refetch,We=He.data;return Object(o.useEffect)((function(){de?(R("Do you want to proceed with the PARTIAL refund?"),C("Partial"),E("Partial")):(R("Do you want to proceed with a FULL refund?"),C("Full"),E("Full"))}),[de]),Object(o.useEffect)((function(){var e;"Full"==S&&(Se(Fe(null===We||void 0===We||null===(e=We.body)||void 0===e?void 0:e.invoiceItems)),we(K.totalAmount));"Partial"==S&&we(0)}),[S]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(y.a,{}),Le&&Object(P.jsx)(U.a,{}),Object(P.jsxs)(l.a,{className:"modal-dialog-centered modal-lg refund-modal-wrapper",isOpen:t,children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:15},children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(P.jsx)("img",{src:g.a,alt:"refund",style:{height:30,marginRight:20}}),Object(P.jsx)("h1",{className:"modal-title",id:"exampleModalLabel",children:"Refund Invoice"})]}),!q||oe||ae?Object(P.jsx)("button",{"aria-label":"Close",className:"close",type:"button",onClick:function(){W(""),M((function(e){return!1})),ee(!1),n(!1)},children:Object(P.jsx)("span",{"aria-hidden":!0,children:q?null:"x"})}):Object(P.jsx)(T,{settogglePartialRefund:be,canFullRefund:Boolean("NO REFUNDS"==(null===K||void 0===K?void 0:K.refundType))}),ae&&Object(P.jsx)(u.a,{onClick:function(){ie(!1),n(!1),W(""),M(!1),ee(!1),se(!1)},children:Object(P.jsx)("span",{"aria-hidden":!0,children:"x"})})]}),Object(P.jsx)("div",{className:"modal-header",children:Object(P.jsx)("div",{style:{width:"100%"},children:Object(P.jsx)(d.a,{className:"navbar-search navbar-search-light form-inline ",onSubmit:function(e){return function(e){e.preventDefault(),Be()}(e)},children:Object(P.jsx)(b.a,{className:"mb-0",children:Object(P.jsxs)(j.a,{className:"input-group-alternative",children:[Object(P.jsx)(p.a,{addonType:"prepend",className:"mt-2",children:Object(P.jsx)(h.a,{children:Object(P.jsx)("i",{className:"fas fa-search"})})}),Object(P.jsx)(f.a,{placeholder:"Search by Invoice No",type:"text",value:B,onChange:function(e){W(e.target.value),B.length>0&&ee(!0)},style:{width:650}}),Object(P.jsx)(p.a,{addonType:"append",children:Object(P.jsx)(h.a,{children:Object(P.jsx)("button",{"aria-label":"Close",className:"close",type:"button",onClick:function(){W(""),M(!1),ee(!1)},children:Object(P.jsx)("span",{"aria-hidden":!0,children:$?"x":null})})})})]})})})})}),Object(P.jsxs)(v.a,{hidden:!q,className:"shadow",style:{marginLeft:"10px",padding:"30px"},children:[Object(P.jsxs)("div",{style:H.header,children:[Object(P.jsx)("div",{style:H.leftHeader,children:Object(P.jsx)("img",{src:x.a})}),Object(P.jsxs)("div",{style:H.rightHeader,children:[Object(P.jsx)("h3",{children:"INVOICE "}),Object(P.jsxs)("h4",{children:["#",K.invoiceNo||""]}),Object(P.jsxs)("h6",{children:["Issued on :"," ",new Date(K.date).toDateString().substring(3)]}),Object(P.jsxs)("h6",{children:["Due Date:"," ",new Date(K.date).toDateString().substring(3)]})]})]}),Object(P.jsx)("div",{style:H.title,children:Object(P.jsxs)("h4",{children:["Invoice for: \xa0",Object(P.jsx)("b",{children:K.customerName})]})}),Object(P.jsx)("div",{style:H.body,children:Object(P.jsx)(D,{isRefunded:ae,togglePartialRefund:de,handleEditItem:function(e){var t=Te[e];xe(Object(r.a)(Object(r.a)({},t),{},{index:e,itemName:t.itemDescription,quantity:t.quantity,price:t.price,qtyToRefund:"",priceAfterRefund:""})),fe(!0)},invoiceItems:Te})}),Object(P.jsx)("div",{style:H.footer,children:Object(P.jsxs)("div",{style:H.total,children:[Object(P.jsxs)("h5",{children:["Total Paid (GH\u20b5)",V(K.totalAmountToRefund)]}),Object(P.jsxs)("h5",{children:["Total Amount to Refund (GH\u20b5)",V(_e)]})]})})]}),ae?Object(P.jsx)("p",{style:{backgroundColor:"pink",margin:10,color:"red",padding:10,fontWeight:600,borderRadius:10},children:"Invoice already refunded"}):Object(P.jsx)("div",{hidden:!q,style:{margin:"5px",float:"right"},children:Object(P.jsxs)(m.a,{children:[Object(P.jsx)(O.a,{lg:"8"}),Object(P.jsx)(O.a,{lg:"2",children:Object(P.jsx)(u.a,{disabled:!1,color:"warning","data-dismiss":"modal",style:{width:"100%"},onClick:function(){ie(!1),n(!1),W(""),M(!1),ee(!1),se(!1),N(Object(k.a)())},children:Object(P.jsx)("span",{className:"btn-inner--text",children:"Cancel"})})}),Object(P.jsx)(O.a,{lg:"2",children:Object(P.jsx)(u.a,{disabled:Ae,color:"success","data-dismiss":"modal",style:{width:"100%"},onClick:function(){var e=Te.findIndex((function(e){return null===e||void 0===e?void 0:e.refundQuantity}));if("Partial"!=S||-1!=e){if("NO REFUNDS"!==(null===K||void 0===K?void 0:K.refundType))return C("Partial"),R("Do you want to proceed with the PARTIAL refund?"),A(Object(r.a)(Object(r.a)({},K),{},{invoiceItemsToPost:Te})),ie(!1),void s(!0);Te.every((function(e){return 0==e.availableQty}))||"Full"==S?(C("Full"),R("Your current setup is a FULL refund. Do you want to proceed?")):(C("Partial"),R("Do you want to proceed with the PARTIAL refund?")),A(Object(r.a)(Object(r.a)({},K),{},{invoiceItemsToPost:Te})),ie(!1),s(!0)}else y.b.error("No item refunded yet")},children:Object(P.jsx)("span",{className:"btn-inner--text",children:"Submit"})})})]})})]}),he&&Object(P.jsx)(_,{updateItemData:Oe,setUpdateItemData:xe,setInvoicesPrePost:Se,invoicesPrePost:Te,setShowUpdate:fe,searchResults:K,setConfirmDisabled:Re,setAmountToRefund:we})]})}},38:function(e,t,n){"use strict";var a=n(149),i=n.n(a),r=(n(2),n(61)),c=n(47),o=i.a.create({baseURL:"/gra-invoicer",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF":1}});t.a=function(){return Object(c.a)(),o.interceptors.response.use((function(e){try{var t=JSON.parse(null===e||void 0===e?void 0:e.data);return e.data=JSON.parse(null===t||void 0===t?void 0:t.data),e}catch(n){return e}}),(function(e){if(console.log({error:e}),e.response){var t=e.response.status,n=(e.response.data,e.config);return 401!==t||n._retry||(n._retry=!0,Object(r.b)()),Promise.reject(e)}alert("NETWORK ERROR")})),o}},385:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/argon-react-white.e4dd3b41.png"},386:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/argon-react.128d71d3.png"},387:function(e,t,n){(function(e){!function(){var t,n,a={271:function(e){function t(e){var t=document.createElement("a");return t.href=e,t.search.split("?")[1]||""}e.exports={getQueryParamsString:t,parseUrlParams:function(e){var n=t(e);return""===n?{}:n.split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e}),{})},loadScript:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=document.createElement("script");n.type="text/javascript",n.onerror=function(){t(new Error("Script failed to load"))},n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}}}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return a[e](n,n.exports,r),n.loaded=!0,n.exports}r.m=a,r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return"sentry-browser.min.js"},r.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},n="asset_composer:",r.l=function(e,a,i,c){if(t[e])t[e].push(a);else{var o,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+i){o=d;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",n+i),o.src=e),t[e]=[a];var b=function(n,a){o.onerror=o.onload=null,clearTimeout(j);var i=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(e){return e(a)})),n)return n(a)},j=setTimeout(b.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=b.bind(null,o.onerror),o.onload=b.bind(null,o.onload),s&&document.head.appendChild(o)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://static.zdassets.com/ekr/",function(){var e={11:0};r.f.j=function(t,n){var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise((function(n,i){a=e[t]=[n,i]}));n.push(a[2]=i);var c=r.p+r.u(t),o=new Error;r.l(c,(function(n){if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+c+")",o.name="ChunkLoadError",o.type=i,o.request=c,a[1](o)}}),"chunk-"+t,t)}};var t=function(t,n){var a,i,c=n[0],o=n[1],s=n[2],l=0;if(c.some((function(t){return 0!==e[t]}))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);s&&s(r)}for(t&&t(n);l<c.length;l++)i=c[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.zEWebpackACJsonp=self.zEWebpackACJsonp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";var t=setTimeout;function n(e){return Boolean(e&&void 0!==e.length)}function a(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var a;try{a=n(e._value)}catch(e){return void s(t.promise,e)}o(t.promise,a)}else(1===e._state?o:s)(t.promise,e._value)}))):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d((a=n,r=t,function(){a.apply(r,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}var a,r}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,o(t,e))}),(function(e){n||(n=!0,s(t,e))}))}catch(e){if(n)return;n=!0,s(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(a);return c(this,new u(e,t,n)),n},i.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},i.all=function(e){return new i((function(t,a){if(!n(e))return a(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function c(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if("function"==typeof o)return void o.call(n,(function(t){c(e,t)}),a)}i[e]=n,0==--r&&t(i)}catch(e){a(e)}}for(var o=0;o<i.length;o++)c(o,i[o])}))},i.allSettled=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var a=Array.prototype.slice.call(e);if(0===a.length)return t([]);var i=a.length;function r(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var c=n.then;if("function"==typeof c)return void c.call(n,(function(t){r(e,t)}),(function(n){a[e]={status:"rejected",reason:n},0==--i&&t(a)}))}a[e]={status:"fulfilled",value:n},0==--i&&t(a)}for(var c=0;c<a.length;c++)r(c,a[c])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,a){if(!n(e))return a(new TypeError("Promise.race accepts an array"));for(var r=0,c=e.length;r<c;r++)i.resolve(e[r]).then(t,a)}))},i._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){t(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var b=i;function j(e){return new b((function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="json",a.onload=function(){if(200===a.status){var e=a.response,i="string"==typeof e?JSON.parse(e):e;t(i)}else{var r=new Error(a.statusText);r.status=a.status,n(r)}},a.onerror=function(){n(Error("Network error"))},a.send()}))}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.message=t,this.props=n,this.error=Error(this.message),this.isUserError=a,this.fingerprint=this.message})),f={},v={},m={};var O=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t.name,this.id=t.id,this.features=t.features,this.win=n,this.doc=n.document}var t,n;return t=e,n=[{key:"ready",value:function(){var e=this;return new b((function(t,n){e.createIframeElement().then((function(a){a.addEventListener("load",(function(){var i=a.contentWindow;i&&i.document?(i.ACFetch=j,t(i.document)):n(e.error())})),a.src="about:blank",e.doc.body.appendChild(a)}))}))}},{key:"injectMetadata",value:function(e,t){var n,a,i;e&&(e.zendesk=(n={},a=this.name,i={id:this.id,features:this.features},a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n),e.zEQueue=t)}},{key:"injectAssets",value:function(e,t){var n=this;if(e){var a=e.getElementsByTagName("head")[0];t.scripts.forEach((function(t){a.appendChild(n.createScriptElement(e,t.src))}))}}},{key:"parentDocumentReady",value:function(){var e=this;return new b((function(t,n){"loading"!==e.doc.readyState&&e.doc.body?t():e.doc.addEventListener("DOMContentLoaded",(function(){e.doc.body?t():n(new h("host page document.body not available"))}))}))}},{key:"createIframeElement",value:function(){var e=this;return this.parentDocumentReady().then((function(){var t=e.doc.createElement("iframe");return t.dataset.product=e.name,t.title="No content",t.role="presentation",t.tabIndex=-1,t.allow="microphone *",t.setAttribute("aria-hidden",!0),t.style.cssText="width: 0; height: 0; border: 0; position: absolute; top: -9999px",t}))}},{key:"createScriptElement",value:function(e,t){if(!e)return null;var n=e.createElement("script");return n.type="text/javascript",n.src=t,n}},{key:"error",value:function(){var e={product:this.name,id:this.id,features:this.features};return new h("iframe document not available to load product",e)}}],n&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var x=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.product=t,this.productIframe=new O(this.product,n)}var t,n;return t=e,n=[{key:"getProductAssets",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?m[this.product.name].assets:this.product.assets}},{key:"load",value:function(e,t){var n=this;return this.productIframe.ready().then((function(a){n.productIframe.injectMetadata(a,t),n.productIframe.injectAssets(a,e)})).catch((function(){return b.reject(n.loadProductError())}))}},{key:"loadProductError",value:function(){var e=this.product,t=e.name,n=e.id,a=e.features;return new h("failed to load product",{product:t,id:n,features:a})}}],n&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),g=r(271);var y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.zopimKey=t,this.win=n,this.doc=n.document}var t,n;return t=e,n=[{key:"getProductAssets",value:function(){return{zopimSrc:"".concat("https://v2.zopim.com/w","?").concat(this.zopimKey)}}},{key:"load",value:function(e){return new b((function(t,n){try{(0,g.loadScript)(e.zopimSrc),t()}catch(e){n(e)}}))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var A="__zE_ac_version",R=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version=this.getVersion(t),this.baseUrl="".concat("https://ekr.zdassets.com/","compose/").concat(n),this.snippetKey=n}var t,n;return t=e,(n=[{key:"resolveComposeUrl",value:function(){var e=this.baseUrl;return this.version&&(e+="?".concat(this.getSerializedVersionQueryParam()),this.displayWarning()),decodeURI(e)}},{key:"displayWarning",value:function(){console.warn("You are loading ".concat(this.version.name," version ").concat(this.version.string))}},{key:"getSerializedVersionQueryParam",value:function(){return"".concat(A,"=").concat(this.version.name,"/").concat(this.version.string)}},{key:"getVersion",value:function(e){var t;try{t=e.localStorage.getItem("ZD-ac-version")}catch(e){}var n=(0,g.parseUrlParams)(e.location.href)[A]||t;if(n){var a=n.split("/");if(this.validVersion(a[1]))return{name:a[0],string:a[1]}}return null}},{key:"validVersion",value:function(e){return e&&/^\w+$/.test(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.snippet=t}var t,n;return t=e,n=[{key:"getProducts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new b((function(a,i){var r=t.snippet.getParentWindow();if(n)r.zEACLoaded=!0,r.$zopim?a(v.products):a(f.products);else{var c=new R(r,e),o=function(e){var t=e.products;r.zEACLoaded=!0,a(t)},s=c.resolveComposeUrl();j(s).then(o).catch((function(n){404!==n.status&&400!==n.status?j(s).then((function(e){return o(e)})).catch((function(){return i(t.error(e))})):i(t.error(e))}))}}))}},{key:"loadProducts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e){var a=e.getProductAssets(n);return e.load(a,t.snippet.getZEQueue()).catch((function(e){return b.reject(e)}))}))}},{key:"getProductLoaders",value:function(e){var t=this.snippet.getParentWindow();return e.map((function(e){return"zopim_chat"===e.name?new y(e.id,t):new x(e,t)}))}},{key:"error",value:function(e){return new h("compose request failed",{key:e})}}],n&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.win=t,this.doc=t.document}var t,n;return t=e,n=[{key:"getKey",value:function(){return new b((function(e,t){return t(new h("Key is missing from snippet",{},!0))}))}},{key:"getZEQueue",value:function(){return null}},{key:"getParentWindow",value:function(){return this.win}}],n&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(c,e);var t,n,a,i,r=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(a);if(i){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r.apply(this,arguments)}return t=c,n=[{key:"getKey",value:function(){var e=this;return new b((function(t,n){var a=e.doc.zendeskHost;return a?e._isHostMapped(a)?j("https://".concat(a,"/embeddable/zendesk_host")).then((function(e){return t("web_widget/".concat(e.zendesk_host))})).catch((function(e){return n(new h(e.message))})):t("web_widget/".concat(a)):n(Error("Zendesk host is not defined"))}))}},{key:"getZEQueue",value:function(){return this.doc.zEQueue}},{key:"getParentWindow",value:function(){return this.win.parent}},{key:"_isHostMapped",value:function(e){return-1===e.indexOf(".zendesk.com")&&-1===e.indexOf(".zendesk-staging.com")}}],n&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(P);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(o,e);var t,n,a,i,r,c=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(i);if(r){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),c.apply(this,arguments)}return t=o,n=[{key:"getKey",value:function(){var e=this;return new b((function(t,n){var a=e._getScript(e.win.zE);if(a){var i=(0,g.parseUrlParams)(a.src);if(i&&i.key)return t(i.key)}return n(new h("Key is missing from snippet",{},!0))}))}},{key:"getZEQueue",value:function(){return this.win.zE._}},{key:"_getScript",value:function(e){return o.isSnippetPresent(this.win)||(e&&e.s?e.s:void 0)}}],a=[{key:"isSnippetPresent",value:function(e){return e.document.getElementById("ze-snippet")}}],n&&w(t.prototype,n),a&&w(t,a),Object.defineProperty(t,"prototype",{writable:!1}),o}(P);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function F(e,t){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(e,t)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(o,e);var t,n,a,i,r,c=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(i);if(r){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),c.apply(this,arguments)}return t=o,n=[{key:"getKey",value:function(){var e=this;return new b((function(t,n){var a=(0,g.getQueryParamsString)(o.getScriptSrc(e.win));return t("zopim_chat/".concat(a))}))}}],a=[{key:"getScriptSrc",value:function(e){if(e.$zopim&&e.$zopim.s)return e.$zopim.s.src;for(var t,n=document.getElementsByTagName("script"),a=/.*zopim.(com|net|org)\//,i=0,r=n.length;i<r;i++)if(t=n[i].src||"",a.test(t))return t}},{key:"isSnippetPresent",value:function(e){return!!o.getScriptSrc(e)}}],n&&U(t.prototype,n),a&&U(t,a),Object.defineProperty(t,"prototype",{writable:!1}),o}(P);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=null,q={autoSessionTracking:!1,enabled:!window.zESettings||void 0===window.zESettings.errorReporting||Boolean(window.zESettings.errorReporting),dsn:void 0,environment:void 0,release:"asset-composer@v58",sampleRate:1,defaultIntegrations:!1},M=function(){return new b((function(e){z?e(z):r.e(996).then(r.bind(r,858)).then((function(t){var n=t.BrowserClient,a=t.makeFetchTransport,i=t.defaultStackParser,r=t.Hub,c=t.Integrations,o=new n(W(W({},q),{},{integrations:[new c.InboundFilters,new c.FunctionToString,new c.HttpContext],transport:a,stackParser:i}));z=new r(o),e(z)}))}))};function J(e){return e&&e instanceof h?M().then((function(t){t.withScope((function(n){e.fingerprint&&n.setFingerprint(e.fingerprint),n.setLevel("warning"),t.captureException(e.error)})),window.console&&e.isUserError&&window.console.error(e.message)})):M().then((function(t){t.captureException(e)}))}!function(){try{if("function"!=typeof window.zE){var e=function(){var e=[],t=function(){e.push(arguments)};return t._=e,t.t=Date.now(),t}();window.zE=e,window.zEmbed=e}if(window.zEACLoaded)return;var t=function(e){return L.isSnippetPresent(e)?new L(e):e.document.zendeskHost&&e.document.zEQueue?new N(e):H.isSnippetPresent(e)?new H(e):new L(e)}(window),n=new E(t);t.getKey().then((function(e){return n.getProducts(e,!1)})).then((function(e){if(e&&e.length)return b.all(n.loadProducts(n.getProductLoaders(e),!1))})).catch((function(e){return J(e)}))}catch(e){J(e)}}()}()}()}).call(this,n(388).setImmediate)},393:function(e,t,n){"use strict";n.r(t);var a=n(185),i=n.n(a),r=n(2),c=n.n(r),o=n(227),s=n.n(o),l=n(36),u=n.n(l);window.React=c.a,window.createReactClass=s.a,window.ReactDOM=u.a,window.$=window.jQuery=i.a;var d=n(34),b=(n(186),n(187),n(188),n(189),n(462)),j=n(87),p=n(241),h=n(5),f=n(39),v=n(8),m=n(60),O=n(52),x=n(1),g=function(){var e=Object(r.useState)(!1),t=Object(v.a)(e,2),n=t[0],a=t[1],i=Object(m.c)().login,c=Object(r.useRef)();return Object(r.useEffect)((function(){sessionStorage.removeItem("BRANCH_INFO"),null===c||void 0===c||c.current.click()}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{style:y.container,children:[Object(x.jsx)("h1",{style:{color:"#f1f1f1",marginBottom:20},children:"Welcome to GRA's Invoicing App"}),n?Object(x.jsx)("button",{autoFocus:!0,className:"login-button",style:y.buttonWrap,ref:c,disabled:n,onClick:function(){a(!0),i()},children:"Loading..."}):Object(x.jsxs)("button",{autoFocus:!0,className:"login-button",style:y.buttonWrap,ref:c,disabled:n,onClick:function(){a(!0),i()},children:["Click\xa0to\xa0Login"," "]})]})})},y={main:{display:"flex",flexDirection:"row"},container:{height:"100vh",background:"rgb(37, 39, 60)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white"},buttonWrap:{width:"10%",borderRadius:30,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:50,background:"linear-gradient(hsl(192, 100%, 67%),hsl(280, 87%, 65%))",border:"none",color:"white"}},A=n(20),R=n(26),E=n(245),P=n(442),T=n(443),S=n(467),C=n(468),N=n(444),_=n(445),w=n(446),I=n(21),D=n(38),L=n(233),k=function(e){var t=Object(m.c)(),a=t.getUser,i=t.user,c=t.logout,o=t.setSelectedBranch,s=t.selectedBranch,l=Object(D.a)();Object(r.useLayoutEffect)((function(){var e=function(){var e=Object(R.a)(Object(A.a)().mark((function e(){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:if(e.sent){e.next=6;break}throw new Error;case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),I.b.error("Login to access this page"),login();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}),[]);var u=Object(r.useState)([]),d=Object(v.a)(u,2),b=d[0],j=d[1];return Object(r.useLayoutEffect)((function(){var e=function(){var e=Object(R.a)(Object(A.a)().mark((function e(){var t;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.get("/api/GetApps");case 3:t=e.sent,j(null===t||void 0===t?void 0:t.data.filter((function(e){return"00000000-0000-0000-0000-400000000000"!==(null===e||void 0===e?void 0:e.id)}))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(P.a,{className:"navbar-top navbar-dark",expand:"md",id:"navbar-main",children:Object(x.jsxs)(E.a,{fluid:!0,children:[Object(x.jsx)("h1",{className:"h1 mb-0 text-white text-uppercase d-none d-lg-inline-block",children:null!==i&&void 0!==i&&i.companyName?(null===i||void 0===i?void 0:i.companyName)+" "+(null===s||void 0===s?void 0:s.name):null===s||void 0===s?void 0:s.name}),Object(x.jsxs)(T.a,{className:"align-items-center d-none d-md-flex",navbar:!0,children:[Object(x.jsxs)(S.a,{nav:!0,children:[Object(x.jsx)(C.a,{className:"pr-0",nav:!0,children:Object(x.jsx)(N.a,{className:"align-items-center",children:Object(x.jsx)(N.a,{className:"ml-2 d-none d-lg-block",children:Object(x.jsx)("span",{className:"mb-0 text-sm font-weight-bold",children:Object(x.jsx)(L.a,{size:"2em"})})})})}),Object(x.jsx)(_.a,{className:"dropdown-menu-arrow",right:!0,children:null===b||void 0===b?void 0:b.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(w.a,{className:"noti-title",header:!0,tag:"div",children:Object(x.jsx)("a",{href:null===e||void 0===e?void 0:e.appPath,target:"_blank",className:"text-overflow m-0",style:{color:"#8898aa !important"},children:null===e||void 0===e?void 0:e.name})})})}))})]}),Object(x.jsxs)(S.a,{nav:!0,children:[Object(x.jsx)(C.a,{className:"pr-0",nav:!0,children:Object(x.jsxs)(N.a,{className:"align-items-center",children:[Object(x.jsx)("span",{className:"avatar avatar-sm rounded-circle",children:Object(x.jsx)("img",{alt:"...",src:n(209).default})}),Object(x.jsx)(N.a,{className:"ml-2 d-none d-lg-block",children:Object(x.jsx)("span",{className:"mb-0 text-sm font-weight-bold",children:null===i||void 0===i?void 0:i.given_name})})]})}),Object(x.jsxs)(_.a,{className:"dropdown-menu-arrow",right:!0,children:[Object(x.jsx)(w.a,{className:"noti-title",header:!0,tag:"div",children:Object(x.jsx)("h6",{className:"text-overflow m-0",children:"Welcome!"})}),Object(x.jsxs)(w.a,{onClick:function(){o(null)},children:[Object(x.jsx)("i",{className:"ni ni-user-run"}),Object(x.jsx)("span",{children:"Change Branch"})]}),Object(x.jsxs)(w.a,{href:"https://psl-app-vm3/evat-auth/identity/account/manage",tag:"a",children:[Object(x.jsx)("i",{className:"ni ni-single-02"}),Object(x.jsx)("span",{children:"Profile Settings"})]}),Object(x.jsxs)(w.a,{onClick:function(){c(),setTimeout("location.reload(true);",1500)},children:[Object(x.jsx)("i",{className:"ni ni-user-run"}),Object(x.jsx)("span",{children:"Logout"})]})]})]})]})]})})})},U=function(){return Object(x.jsx)(x.Fragment,{})},F=n(59),V=n(237),H=n(447),B=n(448),W=n(449),Q=n(114),z=n(80),q=n(399),M=n(450),J=n(146),G=n(451),K=n(238),Y=function(){return Object(x.jsxs)("span",{style:X,children:["v","2.0.0"]})},X={fontSize:"0.6em",textAlign:"center",display:"block"},Z=n(236),$=function(e){var t=Object(r.useState)(),n=Object(v.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(null),o=Object(v.a)(c,2),s=(o[0],o[1],function(){i((function(e){return!e}))}),l=function(){i(!1)};console.log(e.routes),Object(r.useLayoutEffect)((function(){var e=sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER);JSON.parse(e)}),[]);var u,b="/admin",j=function(e){var t=e.name,n=void 0===t?"Menu":t,a=e.items,i=void 0===a?[]:a,c=e.children,o=e.path,s=void 0===o?"":o,u=e.sub,j=void 0===u?"":u,p=e.open,h=void 0!==p&&p,f=e.iconPath,m=void 0===f?"":f,O=Object(r.useState)(h),g=Object(v.a)(O,2),y=g[0],A=g[1],R=Object(r.useState)(!1),E=Object(v.a)(R,2),P=E[0],T=E[1],S=Object(Z.useLocation)();Object(r.useLayoutEffect)((function(){return S.pathname=="/admin"+s?(T(!0),A(!0)):T(!1),function(){}}),[S]);var C=function(){return A(!y)};return console.log({items:i}),void 0===c?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"py-2 ",children:Object(x.jsx)(d.b,{to:b+j+s,children:Object(x.jsx)("span",{className:P?"isActive "+m:"isPending "+m,onClick:C,style:{marginBottom:"0.5rem"},children:Object(x.jsx)("span",{className:"pl-1",style:{display:"inline-block"},children:n})})})})}):Object(x.jsxs)("div",{className:"py-2 ",children:[Object(x.jsxs)("span",{onClick:C,style:{marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",width:"95%",cursor:"pointer"},children:[Object(x.jsx)("span",{children:n}),y?Object(x.jsx)(F.b,{}):Object(x.jsx)(F.c,{})]}),Object(x.jsxs)(V.a,{isOpen:y,children:[null===i||void 0===i?void 0:i.map((function(e,t){var n,a;return Object(x.jsx)(H.a,{children:Object(x.jsxs)(B.a,{to:b+j+(null===(n=i[t])||void 0===n?void 0:n.navicationPath),tag:d.c,onClick:l,children:[Object(x.jsx)("i",{className:null===(a=i[t])||void 0===a?void 0:a.icon}),e.name]})},t)})),Object(x.jsx)("div",{className:"d-flex",style:{flexDirection:"column",paddingLeft:"10px",background:"#eff0f3",width:"95%"},children:c})]})]})},p=function(e){var t,n,a,i,r,c,o,s,l,u,d,b,p,h,f,v,m,O,g,y,A,R,E,P,T,S,C,N,_,w,I,D,L,k,U,F,V=e.routes,H=void 0===V?[]:V;console.log({routes:H});var B=H.findIndex((function(e){return"Transactions"==e.name})),W=H.findIndex((function(e){return"Setup"==e.name})),Q=H.findIndex((function(e){return"Dashboard"==e.name})),z=H.findIndex((function(e){return"Reports"==e.name})),q=-1;-1!=B&&void 0!=H[B].menus[0]&&(q=0),console.log({setupIdx:W,DashboardIdx:Q,ReportsIdx:z,cancelIdx:q,transactionsIdx:B});return console.log("test",null===(t=H[B])||void 0===t?void 0:t.menus[q],H[B]),Object(x.jsxs)("div",{style:{paddingLeft:"30px"},className:"pdl-3 mt-4",children:[-1!==Q&&Object(x.jsx)(j,{path:null===(n=H[Q])||void 0===n?void 0:n.navicationPath,iconPath:null===(a=H[Q])||void 0===a?void 0:a.iconPath,items:[],name:"Dashboard"}),-1!==B&&Object(x.jsxs)(j,{items:[],open:!0,name:"Transactions",children:[Object(x.jsx)(j,{path:null===(i=H[B].menus[4])||void 0===i?void 0:i.navicationPath,iconPath:null===(r=H[B].menus[4])||void 0===r?void 0:r.iconPath,name:"Sales"}),Object(x.jsx)(j,{path:null===(c=H[B].menus[1])||void 0===c?void 0:c.navicationPath,iconPath:null===(o=H[B].menus[1])||void 0===o?void 0:o.iconPath,name:"Purchase"}),Object(x.jsx)(j,{path:null===(s=H[B].menus[2])||void 0===s?void 0:s.navicationPath,iconPath:null===(l=H[B].menus[2])||void 0===l?void 0:l.iconPath,name:"Refund"}),Object(x.jsx)(j,{path:null===(u=H[B].menus[3])||void 0===u?void 0:u.navicationPath,iconPath:null===(d=H[B].menus[3])||void 0===d?void 0:d.iconPath,name:"Purchase Return"}),-1!=q&&Object(x.jsxs)(j,{items:[],name:"Cancelation",children:[Object(x.jsx)(j,{items:[null===(b=H[B][3])||void 0===b?void 0:b.menus],name:"Purchase Return",path:null===(p=H[B])||void 0===p||null===(h=p.menus[q])||void 0===h||null===(f=h.menus[0])||void 0===f?void 0:f.navicationPath,iconPath:null===(v=H[B])||void 0===v||null===(m=v.menus[q])||void 0===m||null===(O=m.menus[0])||void 0===O?void 0:O.iconPath}),Object(x.jsx)(j,{path:null===(g=H[B].menus[q])||void 0===g||null===(y=g.menus[1])||void 0===y?void 0:y.navicationPath,iconPath:null===(A=H[B].menus[q])||void 0===A||null===(R=A.menus[1])||void 0===R?void 0:R.iconPath,items:[],name:"Refund"})]})]}),-1!==W&&Object(x.jsxs)(j,{open:!0,items:[],name:"Setups",children:[Object(x.jsx)(j,{items:[],name:"Item",path:null===(E=H[W])||void 0===E||null===(P=E.menus[1])||void 0===P?void 0:P.navicationPath,iconPath:null===(T=H[W])||void 0===T||null===(S=T.menus[1])||void 0===S?void 0:S.iconPath}),Object(x.jsx)(j,{items:[],name:"Business Partner",path:null===(C=H[W])||void 0===C||null===(N=C.menus[2])||void 0===N?void 0:N.navicationPath,iconPath:null===(_=H[W])||void 0===_||null===(w=_.menus[2])||void 0===w?void 0:w.iconPath}),Object(x.jsx)(j,{items:[],name:"Exchange Rate",path:null===(I=H[W])||void 0===I||null===(D=I.menus[0])||void 0===D?void 0:D.navicationPath,iconPath:null===(L=H[W])||void 0===L||null===(k=L.menus[0])||void 0===k?void 0:k.iconPath})]}),-1!==z&&Object(x.jsx)(j,{items:[H[z]],name:"Reports",path:null===(U=H[z])||void 0===U?void 0:U.navicationPath,iconPath:null===(F=H[z])||void 0===F?void 0:F.iconPath})]})},f=(e.bgColor,e.routes),m=e.logo;return m&&m.innerLink?u={to:m.innerLink,tag:d.b}:m&&m.outterLink&&(u={href:m.outterLink,target:"_blank"}),Object(x.jsx)(P.a,{className:"navbar-vertical fixed-left navbar-light bg-white",expand:"md",id:"sidenav-main",children:Object(x.jsxs)(E.a,{fluid:!0,style:{position:"relative"},children:[Object(x.jsx)("button",{className:"navbar-toggler",type:"button",onClick:s,children:Object(x.jsx)("span",{className:"navbar-toggler-icon"})}),m?Object(x.jsx)(W.a,Object(h.a)(Object(h.a)({className:"pt-3"},u),{},{children:Object(x.jsx)("img",{alt:m.imgAlt,className:"navbar-brand-img",src:m.imgSrc})})):null,Object(x.jsx)(T.a,{className:"align-items-center d-md-none",style:{background:"red"},children:Object(x.jsx)(S.a,{nav:!0,children:Object(x.jsxs)(_.a,{className:"dropdown-menu-arrow",right:!0,children:[Object(x.jsx)(w.a,{className:"noti-title",header:!0,tag:"div",children:Object(x.jsx)("h6",{className:"text-overflow m-0",children:"Welcome!"})}),Object(x.jsxs)(w.a,{to:"/admin/user-profile",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-single-02"}),Object(x.jsx)("span",{children:"My profile"})]}),Object(x.jsxs)(w.a,{to:"/admin/user-profile",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-settings-gear-65"}),Object(x.jsx)("span",{children:"Settings"})]}),Object(x.jsxs)(w.a,{to:"/admin/user-profile",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-calendar-grid-58"}),Object(x.jsx)("span",{children:"Activity"})]}),Object(x.jsxs)(w.a,{to:"/admin/user-profile",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-support-16"}),Object(x.jsx)("span",{children:"Support"})]}),Object(x.jsx)(w.a,{divider:!0}),Object(x.jsxs)(w.a,{href:"#pablo",onClick:function(e){return e.preventDefault()},children:[Object(x.jsx)("i",{className:"ni ni-user-run"}),Object(x.jsx)("span",{children:"Logout"})]})]})})}),Object(x.jsxs)(V.a,{navbar:!0,isOpen:a,children:[Object(x.jsx)("div",{className:"navbar-collapse-header d-md-none",children:Object(x.jsxs)(Q.a,{children:[m?Object(x.jsx)(z.a,{className:"collapse-brand",xs:"6",children:m.innerLink?Object(x.jsx)(d.b,{to:m.innerLink,children:Object(x.jsx)("img",{alt:m.imgAlt,src:m.imgSrc})}):Object(x.jsx)("a",{href:m.outterLink,children:Object(x.jsx)("img",{alt:m.imgAlt,src:m.imgSrc})})}):null,Object(x.jsx)(z.a,{className:"collapse-close",xs:"6",children:Object(x.jsxs)("button",{className:"navbar-toggler",type:"button",onClick:s,children:[Object(x.jsx)("span",{}),Object(x.jsx)("span",{})]})})]})}),Object(x.jsx)(q.a,{className:"mt-4 mb-3 d-md-none",children:Object(x.jsxs)(M.a,{className:"input-group-rounded input-group-merge",children:[Object(x.jsx)(J.a,{"aria-label":"Search",className:"form-control-rounded form-control-prepended",placeholder:"Search",type:"search"}),Object(x.jsx)(G.a,{addonType:"prepend",children:Object(x.jsx)(K.a,{children:Object(x.jsx)("span",{className:"fa fa-search"})})})]})}),Object(x.jsx)(T.a,{navbar:!0,style:{marginTop:-30},className:"sideBar",children:Object(x.jsx)(p,{routes:f})}),Object(x.jsx)("hr",{className:"my-0"})]}),Object(x.jsx)(Y,{})]})})};$.defaultProps={routes:[{}]};var ee=$,te=n(141),ne=(n(172),n(454),n(246),n(463),n(381),n(173),JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(9)]).then(n.bind(null,667))}))),ae=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(10)]).then(n.bind(null,668))})),ie=Object(r.lazy)((function(){return n.e(16).then(n.bind(null,664))})),re=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,666))})),ce=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(13),n.e(11)]).then(n.bind(null,669))})),oe=Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(15)]).then(n.bind(null,670))})),se=Object(r.lazy)((function(){return n.e(14).then(n.bind(null,665))})),le=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(7),n.e(17)]).then(n.bind(null,671))})),ue=[{path:"/dashboard",name:"Dashboard",icon:"ni ni-single-copy-04 text-primary",component:se,layout:"/admin"},{path:"/index",name:"Sales Invoices",icon:"ni ni-single-copy-04 text-primary",component:te.b,layout:"/admin"},{path:"/purchases",name:"Purchase Invoices",icon:"ni ni-archive-2 text-primary",component:re,layout:"/admin"},{path:"/refunds",name:"Refunds",icon:"ni ni-money-coins text-primary",component:ie,layout:"/admin"},{path:"/customers",name:"Business Partner Setup",icon:"ni ni-circle-08 text-primary",component:ne,layout:"/admin"},{path:"/items",name:"Item Setup",icon:"ni ni-bag-17 text-primary",component:ae,layout:"/admin"},{path:"/currency",name:"Exchange Rate Setup",icon:"ni ni-money-coins text-primary",component:oe,layout:"/admin"},{path:"/reports",name:"Reports",icon:"ni ni-books text-primary",component:le,layout:"/admin"},{path:"/user-accounts",name:"User Account Management",icon:"ni ni-circle-08 text-primary",component:ce,layout:"/admin"}],de=n(72),be=n.p+"static/media/logo.763254ec.png",je=n(47),pe=function(e){var t=e.loggingOut,n=void 0!==t&&t,a=Object(je.a)(),i=a.setSelectedBranch,c=a.branches,o=Object(r.useState)(""),s=Object(v.a)(o,2),l=s[0],u=s[1];Object(r.useRef)();return Object(r.useEffect)((function(){var e=null;return n&&(e=setTimeout((function(){window.location.href="https://evat-suite.persolqa.com"}),1e3)),function(){null!==e&&e()}}),[]),Object(x.jsx)("div",{id:"loading-screen",children:Object(x.jsx)("div",{className:"loading-branches",children:n?Object(x.jsx)("h1",{children:"Logging out..."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-grid mb-4",style:{placeContent:"center"},children:Object(x.jsx)("img",{src:be,style:{width:"200px",height:"80px"}})}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(x.jsx)("label",{htmlFor:"branch",className:"text-left d-block",children:"Select your branch"}),Object(x.jsxs)("select",{id:"branch",value:l,className:"form-control",onChange:function(e){var t=c.find((function(t){return(null===t||void 0===t?void 0:t.code)===e.target.value}));sessionStorage.setItem("BRANCH_INFO",JSON.stringify(t)),i(t),u(e.target.value)},children:[Object(x.jsx)("option",{selected:!0,value:"",children:"Select branch"}),null===c||void 0===c?void 0:c.map((function(e){return Object(x.jsx)("option",{className:"form-control",value:null===e||void 0===e?void 0:e.code,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.code)}))]}),Object(x.jsx)("div",{className:"text-right py-5",children:Object(x.jsx)("button",{autoFocus:!0,type:"submit",className:"btn btn-primary",hidden:!0,children:"Continue"})})]})]})})})},he=(n(61),n(117)),fe=n(116),ve=function(e){var t=c.a.useRef(null),n=Object(r.useState)(null),a=Object(v.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)([]),l=Object(v.a)(s,2),u=l[0],d=l[1],b=Object(r.useState)({transactions:[],setups:[],report:[],dashboard:[]}),j=Object(v.a)(b,2),p=(j[0],j[1],Object(je.a)()),m=(p.auth,p.getBranches),g=p.branches,y=p.isLoadingBraches,P=p.selectedBranch,T=p.isErrorLoadingBranches,S=(p.setSelectedBranch,Object(r.useState)([])),C=Object(v.a)(S,2),N=(C[0],C[1]),_=Object(D.a)();Object(r.useRef)();c.a.useLayoutEffect((function(){m()})),Object(r.useLayoutEffect)((function(){var e=function(){var e=Object(R.a)(Object(A.a)().mark((function e(){var t,n,a,i,r;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("/api/GetMenus");case 3:a=e.sent,i=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.navicationPath})),console.log({po:a}),r=u.filter((function(e){return i.includes(e.path)})),console.log({usemenus:r}),d(null===a||void 0===a?void 0:a.data),N(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.navicationPath}))),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),console.log({error:e.t0}),I.b.error("Could not fetch menus. Logging out.."),d([]),window.location.href="".concat("/gra-invoicer","/login");case 18:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}),[i]),c.a.useLayoutEffect((function(){var e=sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER),t=JSON.parse(e);o((function(e){var n;return null===t||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.role}))}),[]);console.log({hey:P});return y?Object(x.jsx)("div",{id:"loading-screen",children:Object(x.jsxs)("div",{className:"loading-branches",children:[Object(x.jsx)("img",{src:be}),Object(x.jsx)("h1",{children:"Loading branch info"})]})}):T?Object(x.jsx)("div",{id:"loading-screen",children:Object(x.jsx)("h1",{children:"Error Loading Branches branches"})}):null!==g&&void 0!==g&&g.length?null!==P&&void 0!==P&&P.code?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ee,Object(h.a)(Object(h.a)({},e),{},{routes:u,logo:{innerLink:"/admin/index",imgSrc:de.a,imgAlt:"..."}})),Object(x.jsx)(r.Suspense,{fallback:Object(x.jsx)(O.a,{}),children:Object(x.jsx)(he.ErrorBoundary,{FallbackComponent:fe.a,onError:function(e,t){console.log("Logging",e,t)},children:Object(x.jsxs)("div",{className:"main-content",ref:t,children:[Object(x.jsx)(k,Object(h.a)(Object(h.a)({},e),{},{brandText:function(t){for(var n=0;n<u.length;n++)if(-1!==e.location.pathname.indexOf(u[n].layout+u[n].path))return u[n].name;return"Brand"}(e.location.pathname)})),Object(x.jsxs)(f.Switch,{children:[ue.map((function(e,t){return console.log({prop:e}),Object(x.jsx)(f.Route,{path:"/admin"+e.path,component:e.component},t)})),Object(x.jsx)(f.Redirect,{from:"*",to:"/admin/index"})]}),Object(x.jsx)(E.a,{fluid:!0,children:Object(x.jsx)(U,{})})]})})})]}):Object(x.jsx)(pe,{}):Object(x.jsx)(x.Fragment,{children:"No branch info available"})},me=(n.p,n(459)),Oe=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(P.a,{className:"navbar-top navbar-horizontal navbar-dark",expand:"md",children:Object(x.jsxs)(E.a,{className:"px-4",children:[Object(x.jsx)(W.a,{to:"/",tag:d.b,children:Object(x.jsx)("img",{alt:"...",src:n(385).default})}),Object(x.jsx)("button",{className:"navbar-toggler",id:"navbar-collapse-main",children:Object(x.jsx)("span",{className:"navbar-toggler-icon"})}),Object(x.jsxs)(me.a,{navbar:!0,toggler:"#navbar-collapse-main",children:[Object(x.jsx)("div",{className:"navbar-collapse-header d-md-none",children:Object(x.jsxs)(Q.a,{children:[Object(x.jsx)(z.a,{className:"collapse-brand",xs:"6",children:Object(x.jsx)(d.b,{to:"/",children:Object(x.jsx)("img",{alt:"...",src:n(386).default})})}),Object(x.jsx)(z.a,{className:"collapse-close",xs:"6",children:Object(x.jsxs)("button",{className:"navbar-toggler",id:"navbar-collapse-main",children:[Object(x.jsx)("span",{}),Object(x.jsx)("span",{})]})})]})}),Object(x.jsxs)(T.a,{className:"ml-auto",navbar:!0,children:[Object(x.jsx)(H.a,{children:Object(x.jsxs)(B.a,{className:"nav-link-icon",to:"/",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-planet"}),Object(x.jsx)("span",{className:"nav-link-inner--text",children:"Dashboard"})]})}),Object(x.jsx)(H.a,{children:Object(x.jsxs)(B.a,{className:"nav-link-icon",to:"/auth/register",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-circle-08"}),Object(x.jsx)("span",{className:"nav-link-inner--text",children:"Register"})]})}),Object(x.jsx)(H.a,{children:Object(x.jsxs)(B.a,{className:"nav-link-icon",to:"/auth/login",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-key-25"}),Object(x.jsx)("span",{className:"nav-link-inner--text",children:"Login"})]})}),Object(x.jsx)(H.a,{children:Object(x.jsxs)(B.a,{className:"nav-link-icon",to:"/admin/user-profile",tag:d.b,children:[Object(x.jsx)("i",{className:"ni ni-single-02"}),Object(x.jsx)("span",{className:"nav-link-inner--text",children:"Profile"})]})})]})]})]})})})},xe=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("footer",{className:"py-5",children:Object(x.jsx)(E.a,{children:Object(x.jsxs)(Q.a,{className:"align-items-center justify-content-xl-between",children:[Object(x.jsx)(z.a,{xl:"6",children:Object(x.jsxs)("div",{className:"copyright text-center text-xl-left text-muted",children:["\xa9 ",(new Date).getFullYear()," ",Object(x.jsx)("a",{className:"font-weight-bold ml-1",href:"https://www.creative-tim.com?ref=adr-auth-footer",target:"_blank",children:"Creative Tim"})]})}),Object(x.jsx)(z.a,{xl:"6",children:Object(x.jsxs)(T.a,{className:"nav-footer justify-content-center justify-content-xl-end",children:[Object(x.jsx)(H.a,{children:Object(x.jsx)(B.a,{href:"https://www.creative-tim.com?ref=adr-auth-footer",target:"_blank",children:"Creative Tim"})}),Object(x.jsx)(H.a,{children:Object(x.jsx)(B.a,{href:"https://www.creative-tim.com/presentation?ref=adr-auth-footer",target:"_blank",children:"About Us"})}),Object(x.jsx)(H.a,{children:Object(x.jsx)(B.a,{href:"http://blog.creative-tim.com?ref=adr-auth-footer",target:"_blank",children:"Blog"})}),Object(x.jsx)(H.a,{children:Object(x.jsx)(B.a,{href:"https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md?ref=adr-auth-footer",target:"_blank",children:"MIT License"})})]})})]})})})})},ge=function(e){var t=c.a.useRef(null),n=Object(f.useLocation)();c.a.useEffect((function(){return document.body.classList.add("bg-default"),function(){document.body.classList.remove("bg-default")}}),[]),c.a.useEffect((function(){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,t.current.scrollTop=0}),[n]);var a;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"main-content",ref:t,children:[Object(x.jsx)(Oe,{}),Object(x.jsxs)("div",{className:"header bg-gradient-info py-7 py-lg-8",children:[Object(x.jsx)(E.a,{children:Object(x.jsx)("div",{className:"header-body text-center mb-7",children:Object(x.jsx)(Q.a,{className:"justify-content-center",children:Object(x.jsxs)(z.a,{lg:"5",md:"6",children:[Object(x.jsx)("h1",{className:"text-white",children:"Welcome!"}),Object(x.jsx)("p",{className:"text-lead text-light",children:"Use these awesome forms to login or create new account in your project for free."})]})})})}),Object(x.jsx)("div",{className:"separator separator-bottom separator-skew zindex-100",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0",children:Object(x.jsx)("polygon",{className:"fill-default",points:"2560 0 2560 100 0 100"})})})]}),Object(x.jsx)(E.a,{className:"mt--8 pb-5",children:Object(x.jsx)(Q.a,{className:"justify-content-center",children:Object(x.jsxs)(f.Switch,{children:[(a=ue,a.map((function(e,t){return"/auth"===e.layout?Object(x.jsx)(f.Route,{path:e.layout+e.path,component:e.component},t):null}))),Object(x.jsx)(f.Redirect,{from:"*",to:"/auth/login"})]})})})]}),Object(x.jsx)(xe,{})]})},ye=(n(387),n(170)),Ae=n(249),Re=n(113);function Ee(e){var t=Object(r.useState)(0),n=Object(v.a)(t,2),a=n[0],i=n[1],c=Object(j.b)(),o=Object(ye.b)(),s=o.activate,l=o.getRemainingTime;Object(r.useEffect)((function(){var e=setInterval((function(){i(Math.ceil(l()/1e3))}),500);return function(){clearInterval(e)}}));var u=Object(r.useCallback)((function(){c.invalidateQueries("salesinvoices"),s()}));return Object(x.jsx)("div",{children:Object(x.jsxs)(Ae.a,{className:"modal-dialog-centered modal-warning",contentClassName:"bg-gradient-info",isOpen:e.open,children:[" ",Object(x.jsx)("div",{className:"modal-header",children:Object(x.jsx)("h6",{className:"modal-title",id:"modal-title-notification",children:"Your attention is required"})}),Object(x.jsxs)("div",{className:"modal-body",children:[Object(x.jsx)("h2",{children:"Are you still here?"}),Object(x.jsxs)("h3",{children:["Logging out in ",a," seconds"]})]}),Object(x.jsx)("div",{className:"modal-footer",children:Object(x.jsx)(Re.a,{className:"btn-white",color:"default",type:"button",onClick:u,children:"I'm still here"})})]})})}var Pe=function(){var e=Object(r.useState)("Active"),t=Object(v.a)(e,2),n=(t[0],t[1]),a=Object(r.useState)(0),i=Object(v.a)(a,2),c=i[0],o=i[1],s=Object(r.useState)(!1),l=Object(v.a)(s,2),u=l[0],d=l[1],b=Object(m.c)().logout;return Object(x.jsx)(ye.a,{timeout:3e5,promptBeforeIdle:15e3,throttle:500,onPrompt:function(){n("Prompted"),d(!0)},onIdle:function(){n("Idle"),d(!1),I.b.warn("Logging you out..."),b()},onActive:function(){n("Active"),d(!1)},onAction:function(){o(c+1)},children:Object(x.jsx)(Ee,{open:u})})},Te=function(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Pe,{}),Object(x.jsx)(ve,Object(h.a)({},e))]})},Se=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(f.Switch,{children:[Object(x.jsx)(f.Route,{path:"/auth/login",render:function(e){return Object(x.jsx)(g,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/auth/logout",render:function(e){return Object(x.jsx)(pe,{loggingOut:!0})}}),Object(x.jsx)(f.Route,{path:"/admin",render:function(e){return Object(x.jsx)(Te,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/customers",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/items",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/refunds",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/reports",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/user-accounts",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/currency",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/dashboard",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/admin/profile",render:function(e){return Object(x.jsx)(ve,Object(h.a)({},e))}}),Object(x.jsx)(f.Route,{path:"/auth",render:function(e){return Object(x.jsx)(ge,Object(h.a)({},e))}}),Object(x.jsx)(f.Redirect,{from:"/",to:"/auth/login"})]}),Object(x.jsx)(I.a,{})]})};var Ce=n(242);Object(Ce.a)("ORg4AjUWIQA/Gnt2VFhhQlJBfV5AQmBIYVp/TGpJfl96cVxMZVVBJAtUQF1hSn5VdkRiW31bcXRTQWhe");var Ne=new b.a({defaultOptions:{queries:{refetchOnMount:!1,refetchOnWindowFocus:!1}}});console.log=function(){},console.error=function(){},console.debug=function(){},u.a.render(Object(x.jsx)(d.a,{basename:"/gra-invoicer",children:Object(x.jsx)(j.a,{client:Ne,children:Object(x.jsxs)(m.b,{children:[Object(x.jsx)(Se,{}),Object(x.jsx)(p.a,{initialIsOpen:!1})]})})}),document.getElementById("root"))},47:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n(2),i=n(60),r=function(){return Object(a.useContext)(i.a)};t.a=r},52:function(e,t,n){"use strict";n(2),n.p;var a=n(469),i=n(1);t.a=function(){return Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",height:"50vh",left:0,right:270,top:0,bottom:0,zIndex:9999999},children:Object(i.jsx)(a.a,{size:48})})}},56:function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));var a=n(5),i=n(20),r=n(26),c=n(8),o=n(2),s=n(172),l=n(247),u=n(72),d=(n(179),n(85)),b=n(97),j=n(59),p=n(217),h=n(115),f=n.n(h),v=n(61),m=n(1),O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return new Intl.NumberFormat(t,{minimumFractionDigits:n,maximumFractionDigits:2}).format(Number(e)?e:0)};var x={header:{display:"flex",height:"20%",marginBottom:20},bottomcomments:{display:"flex",justifyContent:"space-between"},leftHeader:{display:"flex",width:"50%",flexDirection:"column",alignItems:"flex-start"},rightHeader:{display:"flex",width:"50%",flexDirection:"column",alignItems:"flex-end"},title:{height:"14%",backgroundColor:"#eff4fd",borderRadius:10,padding:10,marginBottom:3},body:{marginTop:0,height:"280px",maxHeight:"280px",overflow:"auto"},footer:{display:"flex",marginTop:10,height:"30%",justifyContent:"flex-end"},total:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end",paddingTop:10,width:"50%",height:"100%",borderTop:"1px  solid #e3e3e3",lineHeight:0},comments:{height:64,width:"47%",overflow:"auto",flexDirection:"row",backgroundColor:"#eff4fd",borderRadius:10,padding:10,color:"#cecece",position:"absolute",bottom:30},tablehead:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}};t.a=function(){var e,t=Object(o.useContext)(d.a),n=t.formData,h=t.gridData,g=t.setGridData,y=t.comments,A=t.vatAndLeviesScheme,R=(A.covidRate,A.cstRate,A.cstWithVat,A.getfundRate,A.nhilRate,A.regularLeviesWithVat,A.tourismRate,A.trsmWithVat,A.vatRate,Object(o.useState)(null)),E=Object(c.a)(R,2),P=E[0],T=E[1];Object(o.useEffect)(Object(r.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)();case 2:return t=e.sent,T(t),e.abrupt("return",(function(){}));case 5:case"end":return e.stop()}}),e)}))),[]);var S=Object(o.useState)({itemName:"",quantity:0,price:0,discount:0}),C=Object(c.a)(S,2),N=C[0],_=C[1],w=Object(o.useState)(!1),I=Object(c.a)(w,2),D=I[0],L=I[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(s.a,{className:"shadow",style:{width:"60%",height:"550px",marginLeft:"10px",padding:"15px",position:"relative"},children:[Object(m.jsxs)("div",{style:x.header,children:[Object(m.jsx)("div",{style:x.leftHeader,children:Object(m.jsx)("img",{src:u.a,style:{height:45,width:"45%"}})}),Object(m.jsxs)("div",{style:x.rightHeader,children:[Object(m.jsx)("h3",{children:null===P||void 0===P||null===(e=P.profile)||void 0===e?void 0:e.companyname}),Object(m.jsx)("h4",{style:{margin:0},children:"INVOICE"}),Object(m.jsxs)("h6",{children:["Issued on :"," ",null!==n&&void 0!==n&&n.date?f()(null===n||void 0===n?void 0:n.date).format("D MMM, YYYY"):"N/A"]}),Object(m.jsxs)("h6",{children:["Due Date:"," ",null!==n&&void 0!==n&&n.dueDate?f()(null===n||void 0===n?void 0:n.dueDate).format("D MMM, YYYY"):"N/A"]})]})]}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-even",marginTop:"-20px",marginBottom:"0px"},children:[Object(m.jsx)("h5",{children:"Invoice for"}),Object(m.jsxs)("h5",{children:[": \xa0",n.customer]})]}),Object(m.jsx)("div",{style:x.body,children:Object(m.jsxs)(l.a,{className:"table-flush",responsive:!0,style:{tableLayout:"auto"},children:[Object(m.jsx)("thead",{className:"thead",children:Object(m.jsxs)("tr",{style:{lineHeight:"10px"},children:[Object(m.jsx)("th",{scope:"col",style:{width:"30%"},children:"Item"}),Object(m.jsx)("th",{scope:"col",style:{width:"10%",textAlign:"right"},children:"Quantity"}),Object(m.jsx)("th",{scope:"col",style:{width:"20%",textAlign:"right"},children:"Price"}),Object(m.jsx)("th",{scope:"col",style:{width:"20%",textAlign:"right"},children:"Amount"}),Object(m.jsx)("th",{scope:"col",style:{width:"10%"},children:"Action"})]})}),Object(m.jsx)("tbody",{children:h.map((function(e,t){return Object(m.jsxs)("tr",{style:{lineHeight:"1px"},children:[Object(m.jsx)("td",{style:{fontSize:"10px",cursor:"pointer"},title:e.itemName,children:e.itemName.substring(0,20)}),Object(m.jsx)("td",{style:{fontSize:"10px",textAlign:"right"},children:e.quantity}),Object(m.jsx)("td",{style:{fontSize:"10px",textAlign:"right"},children:O(e.price)}),Object(m.jsx)("td",{style:{fontSize:"10px",textAlign:"right"},children:O(e.quantity*e.price)}),Object(m.jsxs)("td",{style:{fontSize:"10px",textAlign:"right",cursor:"pointer"},children:[Object(m.jsx)(b.b,{color:"green",title:"Edit",style:{marginRight:20},onClick:function(){return function(e,t){_({index:t,itemName:e.itemName,quantity:e.quantity,price:e.price,discount:Number(e.discount),isInclusive:e.isINC,isTaxable:e.taxable,otherLevies:(null===e||void 0===e?void 0:e.otherLevies)||0}),L(!0)}(e,t)}}),Object(m.jsx)(j.i,{color:"darkred",title:"Remove",onClick:function(){g(h.filter((function(t,n){return t.itemCode!==e.itemCode})))}})]})]},t)}))})]})}),Object(m.jsx)("div",{style:x.footer,children:Object(m.jsxs)("div",{style:x.total,children:[Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:["SUBTOTAL (EXCL) :","   ",O(h.reduce((function(e,t){return e+t.taxableAmount}),0))]}),Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:["DISCOUNT : ","   ",null!==n&&void 0!==n&&n.discountType?"general"===(null===n||void 0===n?void 0:n.discountType)?O(h.reduce((function(e,t){return e+t.discount}),0)):O(null===n||void 0===n?void 0:n.totalDiscount):"0.00"]}),Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:["NHIL (",A.nhilRate,"%): ","   ",O(h.reduce((function(e,t){return e+t.nhil}),0))]}),Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:["GETF (",A.getfundRate,"%):"," ",O(h.reduce((function(e,t){return e+t.getf}),0))]}),Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:["COVID19 (",A.covidRate,"%):",O(h.reduce((function(e,t){return e+t.covid}),0))," "]}),Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:["(CST: ",null===A||void 0===A?void 0:A.cstRate,"%) / (TOURISM: ",null===A||void 0===A?void 0:A.tourismRate,"%):"," ",O(h.reduce((function(e,t){return e+t.otherLevies}),0))," "]}),Object(m.jsxs)("h6",{style:{padding:0,margin:0},hidden:!0,children:["TOURISM (TOURISM",null===A||void 0===A?void 0:A.tourismRate,"%):"," ",O(h.reduce((function(e,t){return e+t.otherLevies}),0))," "]}),Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:["VAT (",null===A||void 0===A?void 0:A.vatRate,"%):",O(h.reduce((function(e,t){return e+t.vat}),0))," "]})," ",Object(m.jsxs)("h6",{style:{padding:0,margin:0},children:[Object(m.jsx)("hr",{className:"my-1"}),Object(m.jsxs)("strong",{children:["TOTAL PAYABLE",":"," "]}),n.currency," ",null!==n&&void 0!==n&&n.discountType?"selective"===(null===n||void 0===n?void 0:n.discountType)?O(h.reduce((function(e,t){return e+t.totalPayable}),0)-(null===n||void 0===n?void 0:n.totalDiscount)):O(null===n||void 0===n?void 0:n.totalDiscount):O(h.reduce((function(e,t){return e+t.totalPayable}),0))]})]})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"shadow-5xl",style:Object(a.a)(Object(a.a)({},x.comments),{},{top:465}),children:Object(m.jsx)("h6",{children:y||"No remarks"})})})]}),D&&Object(m.jsx)(p.a,{updateItemData:N,setUpdateItemData:_,setShowUpdate:L,gridData:h,setGridData:g,showDiscountField:null===n||void 0===n?void 0:n.discountType})]})}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return h}));var a=n(5),i=n(20),r=n(26),c=n(8),o=n(2),s=n.n(o),l=n(38),u=n(148),d=n(1),b=s.a.createContext(),j=function(){return Object(o.useContext)(b)},p=JSON.parse(sessionStorage.getItem("BRANCH_INFO"))||{};console.log({branchInfo:p});var h=function(e){var t=e.children,n=Object(o.useState)(!1),s=Object(c.a)(n,2),j=s[0],h=s[1],f=Object(o.useState)({name:(null===p||void 0===p?void 0:p.name)||null,code:(null===p||void 0===p?void 0:p.code)||null,taxScheme:(null===p||void 0===p?void 0:p.taxScheme)||null}),v=Object(c.a)(f,2),m=v[0],O=v[1];console.log({selectedBranch:m});var x=Object(o.useState)(),g=Object(c.a)(x,2),y=g[0],A=g[1],R=Object(l.a)(),E=function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/bff/user");case 2:return t=e.sent,console.log({response:t}),e.abrupt("return",null===t||void 0===t?void 0:t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var n,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.forEach((function(e){n[null===e||void 0===e?void 0:e.type]=null===e||void 0===e?void 0:e.value})),h(!0),A(n),e.next=6,R.get("/api/GetCompanyName");case 6:r=e.sent,c=r.data,A((function(e){return Object(a.a)(Object(a.a)({},e),{},{companyName:c+", "})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/api/GetBranches");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=Object(u.a)({queryKey:["user"],queryFn:E,enabled:!1,onSuccess:P,onError:function(e){console.log({onErrorResponse:e}),h(!1),window.location="".concat("/gra-invoicer","/login")}}),C=S.refetch,N=S.isLoading,_=Object(u.a)({enabled:!1,queryKey:["branches"],queryFn:T}),w=_.refetch,I=_.data,D=_.isLoading,L=_.isError;return console.log({branches:I}),Object(d.jsx)(b.Provider,{value:{isAuthenticated:j,user:y,setUser:A,setIsAuthenticated:h,login:function(){console.log("green","/gra-invoicer");window.location.href="".concat("/gra-invoicer","/bff/login?returnUrl=").concat("/gra-invoicer","/admin/index"),console.log("Location","/gra-invoicer",window.location.href)},logout:function(){var e=y["bff:logout_url"];window.location.href="".concat(e,"&returnUrl=/auth/logout")},getUser:C,isLoading:N,getBranches:w,isLoadingBraches:D,branches:I,setSelectedBranch:O,selectedBranch:m,isErrorLoadingBranches:L},children:t})}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(20),i=n(26),r=n(112),c={authority:"https://psl-app-vm3/evat-auth",client_id:"evat-invoicing-ui",client_root:"https://psl-app-vm3/EvatApi/api/v1",redirect_uri:Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_REDIRECT_URI,post_logout_redirect_uri:Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_POST_LOGOUT_REDIRECT,response_type:"code",scope:Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_scope,pkce:!1,monitorSession:!1},o=new r.UserManager(c);r.Log.logger=console,r.Log.level=r.Log.INFO;var s=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.getUser());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.signinRedirect());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},72:function(e,t,n){"use strict";t.a="data:image/png;base64,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"},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5),i=n(20),r=n(26),c=n(148),o=n(38),s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{isEnabled:!1},d=Object(o.a)(),b=u.isEnabled,j=function(){var t=Object(r.a)(Object(i.a)().mark((function t(){var n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.get(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=Object(c.a)({queryKey:[t,n],queryFn:j,onSuccess:function(e){return s(e)},onError:function(e){return l(e)},enabled:b});return Object(a.a)(Object(a.a)({},p),{},{isLoading:p.isLoading&&"idle"!==p.fetchStatus})}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var a=n(8),i=n(31),r=n(20),c=n(26),o=n(5),s=n(2),l=n(225),u=n(226),d=n(21),b=(n(251),n(255),n(172)),j=n(246),p=n(399),h=n(114),f=n(80),v=n(146),m=n(113),O=n(141),x=(n(252),n(52)),g=n(39),y=n(151),A=n.n(y),R=n(87),E=n(248),P=n(38),T=n(106),S=n(215),C=n(47),N=n(83),_=n(1),w=[{id:"7466f25a-773e-488f-af26-c443cf8f1950",code:"GHS",name:"Ghana Cedis",homeCurrency:!0},{id:"6b333df2-39aa-427e-91b4-fa9ea6b5af07",code:"USD",name:"US Dollar",homeCurrency:!1},{id:"fe7713c9-c701-44a6-991c-8fec88522539",code:"EUR",name:"Euro",homeCurrency:!1},{id:"67dee4f7-3cb8-41bf-96d2-a4d179dc859d",code:"GBP",name:"Great Britain Pounds",homeCurrency:!1}];var I=function(e){var t=e.refetch,n=Object(g.useHistory)(),y=(Object(R.b)(),Object(P.a)()),I=Object(s.useContext)(O.a).invoices,D=Object(s.useContext)(V),L=D.formData,k=D.setFormData,U=D.gridData,F=D.setGridData,H=D.setShowNewInvoiceModal,B=D.comments,W=D.setComments,Q=D.vatAndLeviesScheme,z=D.setvatAndLeviesScheme,q=Object(s.useState)(!1),M=Object(a.a)(q,2),J=M[0],G=M[1],K=Object(s.useState)([]),Y=Object(a.a)(K,2),X=(Y[0],Y[1],Object(s.useState)(!1)),Z=Object(a.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.useState)([]),ne=Object(a.a)(te,2),ae=ne[0],ie=ne[1],re=Object(s.useState)(!1),ce=Object(a.a)(re,2),oe=ce[0],se=ce[1],le=Object(s.useState)(!1),ue=Object(a.a)(le,2),de=ue[0],be=ue[1],je=Object(s.useState)(!0),pe=Object(a.a)(je,2),he=pe[0],fe=pe[1],ve=Object(s.useState)(0),me=Object(a.a)(ve,2),Oe=me[0],xe=me[1],ge=Object(s.useState)([]),ye=Object(a.a)(ge,2),Ae=ye[0],Re=ye[1],Ee=Object(s.useState)("GHS"),Pe=Object(a.a)(Ee,2),Te=Pe[0],Se=Pe[1],Ce=Object(s.useState)(!1),Ne=Object(a.a)(Ce,2),_e=(Ne[0],Ne[1],Object(s.useState)(1)),we=Object(a.a)(_e,2),Ie=we[0],De=we[1],Le=Object(s.useState)(1),ke=Object(a.a)(Le,2),Ue=ke[0],Fe=ke[1],Ve=Object(s.useState)([]),He=Object(a.a)(Ve,2),Be=He[0],We=He[1],Qe=Object(s.useState)("".concat((new Date).getFullYear(),"-").concat((new Date).getMonth()+1,"-").concat((new Date).getDate())),ze=Object(a.a)(Qe,2),qe=ze[0],Me=(ze[1],Q.covidRate,Q.cstRate,Q.cstWithVat,Q.getfundRate,Q.nhilRate,Q.regularLeviesWithVat,Q.tourismRate,Q.trsmWithVat,Q.vatRate,Object(s.useState)({discountAmount:!1,itemDiscountAmnt:!1})),Je=Object(a.a)(Me,2),Ge=Je[0],Ke=Je[1],Ye=Object(s.useState)(""),Xe=Object(a.a)(Ye,2),Ze=Xe[0],$e=Xe[1],et=Object(C.a)(),tt=et.selectedBranch,nt=et.user;console.log({user:nt}),JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),Object(s.useEffect)((function(){if("selective"===(null===L||void 0===L?void 0:L.discountType)&&(null===U||void 0===U||!U.length)&&null!==L&&void 0!==L&&L.totalDiscount)return d.b.error("Please add Item(s) first"),void k((function(e){return Object(o.a)(Object(o.a)({},e),{},{totalDiscount:""})}));var e=U.reduce((function(e,t){return e+t.totalPayable}),0);return parseFloat(null===L||void 0===L?void 0:L.totalDiscount)>=e?(d.b.error("Discount amount must be less than total payable"),void k((function(e){return Object(o.a)(Object(o.a)({},e),{},{totalDiscount:0})}))):function(){}}),[null===L||void 0===L?void 0:L.discountType,null===L||void 0===L?void 0:L.totalDiscount]);var at=Object(S.a)(["/api/GetCustomers/".concat(null===tt||void 0===tt?void 0:tt.code),"/api/GetCurrency","/api/GetProductList/".concat(Te)],(function(e){var t=e[2],n=e[1],a=e[0];if("fulfilled"===(null===t||void 0===t?void 0:t.status)&&(console.log({requstCallback1:null===t||void 0===t?void 0:t.value.data}),We(null===t||void 0===t?void 0:t.value.data)),"fulfilled"===(null===n||void 0===n?void 0:n.status)&&(console.log({requstCallback2:null===n||void 0===n?void 0:n.value.data}),(null===n||void 0===n?void 0:n.value.data.length)>0?Re(null===n||void 0===n?void 0:n.value.data):Re(w)),"fulfilled"===(null===a||void 0===a?void 0:a.status)){var i;console.log({requstCallback3:null===a||void 0===a?void 0:a.value.data});var r=null===a||void 0===a?void 0:a.value.data.filter((function(e){return"A"===e.status}));ie(r),$e(null===a||void 0===a||null===(i=a.value.data.find((function(e){return"cash customer"==e.name})))||void 0===i?void 0:i.tin)}})),it=(at.data,at.error,at.isLoading),rt=at.setUrls,ct=Object(N.a)("/api/GetVatAndLeviesByScheme/".concat(qe,"/").concat((null===tt||void 0===tt?void 0:tt.taxScheme)||0),"taxScheme",null===L||void 0===L?void 0:L.date,(function(e){console.log({GetVatAndLeviesByScheme:e}),z(e)})).refetch;Object(s.useEffect)((function(){return ct(),function(){}}),[null===L||void 0===L?void 0:L.date]);var ot=function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),e.next=3,y.post("/api/PostInvoice/".concat(null===tt||void 0===tt?void 0:tt.code),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=Object(E.a)({mutationFn:ot,onSuccess:function(){d.b.success("Invoice successfully saved"),t(),H(!1),se(!1)},onError:function(e){var t,n,a,i,r;if(500===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))return d.b.error((null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.data)||(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)||"Error creating invoice"),void se(!1);d.b.error((null===e||void 0===e||null===(n=e.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)||(null===e||void 0===e?void 0:e.message)||"Invoice could not be saved."),se(!1)}}).mutate,lt=((new Date).toISOString().split("T")[0],function(){var e=Object(c.a)(Object(r.a)().mark((function e(){var t,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Boolean(null===U||void 0===U?void 0:U.length)){e.next=3;break}return d.b.error("Please add invoice item(s)"),e.abrupt("return");case 3:if(t={date:new Date(null===L||void 0===L?void 0:L.date).toISOString(),dueDate:L.dueDate?new Date(L.dueDate).toISOString():(new Date).toISOString(),remarks:B,nameOfUser:null===nt||void 0===nt?void 0:nt.name,customerName:L.customer,customerTinghcard:L.identity,transactionType:"SALES",currency:L.currency,forexRate:Ue,amount:U.reduce((function(e,t){return e+t.totalPayable}),0),invoiceItems:U.map((function(e){return{price:e.taxableAmount,itemCode:e.itemCode,itemDescription:e.itemName,unitPrice:e.price,itemDiscount:e.discount,taxCode:"",quantity:e.quantity,vatItemId:e.vatItemId}}))},null===L||void 0===L||!L.discountType){e.next=14;break}if("selective"!==(null===L||void 0===L?void 0:L.discountType)||null!==L&&void 0!==L&&L.totalDiscount){e.next=8;break}return d.b.error("Provide discount amount"),e.abrupt("return");case 8:if(n=U.reduce((function(e,t){return e+t.taxableAmount}),0),!("selective"===(null===L||void 0===L?void 0:L.discountType)&(null===L||void 0===L?void 0:L.totalDiscount)>=n)){e.next=12;break}return d.b.error("Discount amount is invalid"),e.abrupt("return");case 12:t.totalDiscount=Number(L.totalDiscount).toFixed(4),t.discountType=String(L.discountType).toUpperCase();case 14:pt&&(t.customerTinghcard=Ze,t.customerName="".concat(L.customer,"(cash customer)")),J?st(t):d.b.warning("Please add an item first");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ut=function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var a,i,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(new Date).toISOString(),e.next=3,y.get("/api/checkIfRatesExist/".concat(null===tt||void 0===tt?void 0:tt.code,"/").concat(t,"/").concat(a));case 3:(i=e.sent)&&(c=i.data,console.log({data:c}),c.length>0?(Fe(c[0].exchangeRate),De("(GHS ".concat(c[0].exchangeRate,"/").concat(c[0].currencyCode,")"))):(d.b.warning("There are no exchange rates set for today. Redirecting you to currency set up to add exchange rates"),setTimeout((function(){n.push("/admin/currency")}),3e3)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){return function(){}}),[I]),Object(s.useEffect)((function(){rt(["/api/GetCustomers/".concat(null===tt||void 0===tt?void 0:tt.code),"/api/GetCurrency","/api/GetProductList/".concat(Te)]),k((function(e){return Object(o.a)(Object(o.a)({},e),{},{currency:Te})}))}),[Te]);var dt,bt=Object(s.useState)(!0),jt=Object(a.a)(bt,2),pt=jt[0],ht=jt[1];return Object(s.useEffect)((function(){return k((function(e){return Object(o.a)(Object(o.a)({},e),{},{identity:"",date:new Date(Date.now())})})),function(){}}),[pt]),Object(_.jsxs)(_.Fragment,{children:[oe?Object(_.jsx)(x.a,{}):null,Object(_.jsxs)(b.a,{className:"bg-secondary shadow",style:{width:"40%",height:"550px"},children:[Object(_.jsxs)(j.a,{children:[Object(_.jsx)("div",{style:{zIndex:1e5,display:"flex",flexDirection:"roq",justifyContent:"center",alignItems:"center",position:"absolute"},children:" "}),Object(_.jsx)(d.a,{}),Object(_.jsxs)(p.a,{children:[Object(_.jsx)("h6",{className:"heading-small text-muted mb-2",children:"Invoice Details"}),Object(_.jsx)("div",{className:"pl-lg-4"}),Object(_.jsx)(h.a,{style:{marginBottom:5},children:Object(_.jsxs)(f.a,{lg:"12",children:[Object(_.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(_.jsxs)("label",{className:"form-control-label label-mb-0 ",style:{alignSelf:"center"},children:["Customer ",Object(_.jsx)("code",{style:{color:"darkred"},children:"*"})]}),Object(_.jsxs)("span",{children:[Object(_.jsx)("input",{id:"custType",disabled:Boolean(U.length),className:"m-2 mb-1",type:"checkbox",onChange:function(e){ht(e.target.checked),k((function(e){return Object(o.a)(Object(o.a)({},e),{},{customer:""})})),ee(!1)},checked:Boolean(pt),value:pt}),Object(_.jsx)("label",{htmlFor:"custType",children:"Cash Customer"})]})]}),pt?Object(_.jsx)(v.a,{className:"form-control font-sm",placeholder:"Cash customer name",value:L.customer,onChange:function(e){return k(Object(o.a)(Object(o.a)({},L),{},{customer:e.target.value}))},bsSize:"sm"}):Object(_.jsx)(l.a,{suggestions:ae,formData:L,setFormData:k,businessPartner:"Customer"})]})}),Object(_.jsxs)(h.a,{style:{marginBottom:5},children:[Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsxs)("label",{htmlFor:"custTin",className:"form-control-label",children:[" ","Ghana Card/TIN"]}),Object(_.jsx)(v.a,{disabled:!0,id:"custTin",className:"form-control font-sm",bsSize:"sm",placeholder:"Ghana Card / TIN",value:L.identity,onChange:function(e){return k(Object(o.a)(Object(o.a)({},L),{},{identity:e.target.value}))}})]}),Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsxs)("label",{htmlFor:"currency",className:"form-control-label ",children:["Currency ",1===Ie?"":Ie]}),Object(_.jsx)("select",{className:"form-control font-sm",id:"currency",value:Te,onChange:function(e){Se(e.target.value),"GHS"!==e.target.value?ut(e.target.value):De("")},disabled:Boolean(U.length),style:{height:29,padding:"0px 5px"},children:Ae.map((function(e,t){return Object(_.jsx)("option",{name:e.name,id:e.code,value:e.code,children:e.code},t)}))})," "]})]}),Object(_.jsxs)(h.a,{style:{marginBottom:5},children:[Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsxs)("label",{htmlFor:"invoiceDate",className:"form-control-label label-mb-0",children:["Invoice Date ",Object(_.jsx)("code",{style:{color:"darkred"},children:"*"})]}),Object(_.jsx)(A.a,{id:"invoiceDate",maxDate:new Date,placeholderText:"Invoice date",className:"form-control font-sm",showIcon:!0,dateFormat:"yyyy/MM/dd",disabled:Boolean(null===U||void 0===U?void 0:U.length),selected:L.date,minDate:new Date(2023,0,1),onChange:function(e){k(Object(o.a)(Object(o.a)({},L),{},{date:e,dueDate:null}))},style:{height:29,padding:"0px 5px"}})]}),Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsx)("label",{htmlFor:"dueDate",className:"form-control-label label-mb-0",children:"Due Date"}),Object(_.jsx)(A.a,{id:"dueDate",minDate:L.date?L.date:null,placeholderText:"Due date",className:"form-control font-sm",disabled:!L.date||Boolean(null===U||void 0===U?void 0:U.length),showIcon:!0,dateFormat:"yyyy/MM/dd",selected:L.dueDate,onChange:function(e){console.log({e:e}),k(Object(o.a)(Object(o.a)({},L),{},{dueDate:e}))},style:{height:29,padding:"0px 5px"}})]})]}),Object(_.jsxs)(h.a,{style:{marginBottom:5},children:[Object(_.jsxs)(f.a,{"data-tip":!0,"data-for":"discount-type",lg:"6",style:{position:"relative"},children:[Object(_.jsx)("label",{className:"form-control-label",htmlFor:"discountType",children:"Discount\xa0Type"}),Object(_.jsxs)("select",{"data-tip":"discount-type",id:"discountType",className:"form-control font-sm",value:L.discountType,onChange:function(e){switch(k(Object(o.a)(Object(o.a)({},L),{},{discountType:e.target.value})),e.target.value){case"general":Ke({discountAmount:!1,itemDiscountAmnt:!0});break;case"selective":Ke({discountAmount:!0,itemDiscountAmnt:!1});break;default:Ke({discountAmount:!1,itemDiscountAmnt:!1})}},style:{height:29,padding:"0px 5px"},children:[Object(_.jsx)("option",{value:"",children:"No discount"}),Object(_.jsx)("option",{value:"selective",children:"Selective"})]})," "]}),Ge.discountAmount&&Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsx)("label",{className:"form-control-label label-mb-0",htmlFor:"discountAmt",children:"Discount\xa0Amount"}),Object(_.jsx)(v.a,{type:"number",className:"form-control",placeholder:"Discount amount",id:"discountAmt",step:.01,min:0,value:null===L||void 0===L?void 0:L.totalDiscount,onChange:function(e){return k(Object(o.a)(Object(o.a)({},L),{},{totalDiscount:e.target.value}))},bsSize:"sm"})]})]}),Object(_.jsx)(h.a,{children:Object(_.jsx)(f.a,{lg:"6",children:Object(_.jsx)("button",{style:{backgroundColor:"transparent",border:"none",marginBottom:-50,marginTop:5},type:"button",onClick:function(){null!==L&&void 0!==L&&L.date?L.customer||pt&&L.customer?ee(!0):d.b.warning("Please enter customer name first"):d.b.warning("Please enter invoice date first")},children:$?null:Object(_.jsx)("span",{"aria-hidden":!0,children:Object(_.jsx)("h4",{children:"+ Add Item"})})})})}),$&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(h.a,{style:{marginBottom:5,marginTop:-20,position:"relative"},children:[Object(_.jsxs)(f.a,{lg:"12",children:[Object(_.jsx)("label",{className:"form-control-label label-mb-0",htmlFor:"input-email",children:"Item"}),it?Object(_.jsx)("p",{children:"Please wait, loading items ..."}):Object(_.jsx)(u.a,{gridData:U,suggestions:Be,formData:L,setFormData:k,setDisabled:fe,setIsTaxable:be})]}),Object(_.jsxs)(f.a,{style:{position:"absolute"},sm:"12",md:12,children:[Object(_.jsx)("input",{className:"form-control-checkbox",id:"isTaxable",type:"checkbox",checked:de,onClick:function(){},hidden:!0}),null!==L&&void 0!==L&&L.itemName?Object(_.jsx)("label",{className:"form-control-label font-sm",htmlFor:"isTaxable",style:{color:"teal",fontSize:11,position:"absolute",right:20,top:10},children:de?"Taxable":"Non-Taxable"}):null]})]}),Object(_.jsxs)(h.a,{style:{marginBottom:10},children:[Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsx)("label",{className:"form-control-label label-mb-0",htmlFor:"qty",children:"Quantity"}),Object(_.jsx)(v.a,{disabled:he,className:"form-control-alternative",id:"qty",placeholder:"Quantity",type:"number",value:null===L||void 0===L?void 0:L.quantity,onChange:function(e){k(Object(o.a)(Object(o.a)({},L),{},{quantity:e.target.value}))},onBlur:function(){k((function(e){return Object(o.a)(Object(o.a)({},e),{},{quantity:Number(null===L||void 0===L?void 0:L.quantity).toFixed(4)})}))}})]}),Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsxs)("label",{className:"form-control-label label-mb-0",htmlFor:"price",children:["Price(",L.currency,")"," ",de&&(L.isTaxInclusive?"-Tax Incl.":"-Tax Excl.")]}),Object(_.jsx)(v.a,{className:"form-control-alternative",id:"price",placeholder:"Price",type:"number",value:L.price,min:"1",onChange:function(e){return k(Object(o.a)(Object(o.a)({},L),{},{price:e.target.value}))},onBlur:function(){k((function(e){return Object(o.a)(Object(o.a)({},e),{},{price:Number(null===L||void 0===L?void 0:L.price).toFixed(4)})}))}})]})]}),Object(_.jsxs)(h.a,{hidden:!0,style:{marginBottom:5},children:[Object(_.jsxs)(f.a,{lg:"6",style:{paddingTop:"0px"},children:[Object(_.jsx)("input",{className:"form-control-checkbox",id:"isTaxable",type:"checkbox",checked:de}),"\xa0 \xa0",Object(_.jsxs)("label",{className:"form-control-label",htmlFor:"isTaxable",children:["Is it taxable?","     "]})]}),Ge.itemDiscountAmnt&&Object(_.jsxs)(f.a,{lg:"6",children:[Object(_.jsx)("label",{className:"form-control-label label-mb-0",htmlFor:"discountAmnt",children:"Discount Amount"}),Object(_.jsx)(v.a,{className:"form-control-alternative font-sm",id:"discountAmnt",placeholder:"Discount Amount",type:"number",step:.01,value:Oe,min:"0",onChange:function(e){return xe(e.target.value)},onKeyDown:(dt=L.price,void((""!=dt&&dt<1e-5||"e"==dt)&&d.b.info("Please make sure quantity is at greater than 0"))),bsSize:"sm"})]})]}),Object(_.jsx)(h.a,{style:{marginBottom:13},children:Object(_.jsxs)(f.a,{lg:"12",children:[Object(_.jsx)("label",{className:"form-control-label label-mb-0",htmlFor:"remarks",children:"Remarks"}),Object(_.jsx)(v.a,{disabled:!1,className:"form-control-alternative",id:"remarks",placeholder:"Remarks",type:"text",value:B,onChange:function(e){return W(e.target.value)}})]})}),Object(_.jsxs)(h.a,{children:[Object(_.jsx)(f.a,{lg:"6",children:Object(_.jsx)(m.a,{disabled:!(L.quantity>0||oe),color:"primary",onClick:function(){return function(e){if("NON"===e.otherLevies||("CST"===e.otherLevies?(e.price,e.quantity):"TRSM"===e.otherLevies&&(e.price,e.quantity)),""===e.itemName)d.b.warning("Please select an item first");else if(""===e.quantity)d.b.warning("Please provide a value for quantity");else if(""===e.price)d.b.warning("Please provide a value for price");else{var t=Object(T.a)(Object(o.a)(Object(o.a)({},e),{},{isTaxable:de}),Oe,Q);F((function(n){return[].concat(Object(i.a)(n),[Object(o.a)(Object(o.a)({},t),{},{otherLeviesType:e.otherLevies})])})),k(Object(o.a)(Object(o.a)({},L),{},{itemName:"",quantity:1,price:""})),xe(0),G(!0),fe(!0)}}(L)},type:"button",style:{width:"100%"},size:"sm",children:"ADD ITEM"})}),Object(_.jsx)(f.a,{lg:"6",children:Object(_.jsx)(m.a,{disabled:oe,color:"success",type:"button",onClick:lt,style:{width:"100%"},size:"sm",children:oe?"Submitting...":"SUBMIT INVOICE"})})]}),Object(_.jsx)(h.a,{})]})]})]}),Object(_.jsx)("div",{className:"modal-footer"})]})]})},D=n(56),L=n(249),k=n(117),U=n(116),F={customer:"",identity:"",email:"",tel:"",itemName:"",quantity:"",price:"",isTaxable:!0,vatItemId:"",currency:"",discountType:"",totalDiscount:"",date:"",dueDate:""},V=Object(s.createContext)(null),H=function(e,t){console.log("Logging",e,t)};t.b=function(e){var t=e.setShowNewInvoiceModal,n=e.refetch,i=Object(s.useState)(F),r=Object(a.a)(i,2),c=r[0],o=r[1],l=Object(s.useState)([]),u=Object(a.a)(l,2),d=u[0],b=u[1],j=Object(s.useState)(""),p=Object(a.a)(j,2),h=p[0],f=p[1],v=Object(s.useState)({covidRate:0,cstRate:0,cstWithVat:0,getfundRate:0,nhilRate:0,regularLeviesWithVat:0,tourismRate:0,trsmWithVat:0,vatRate:0}),O=Object(a.a)(v,2),x=O[0],g=O[1];return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(L.a,{style:{maxWidth:"max-content",margin:"30px auto"},isOpen:!0,toggle:function(){return console.log("toggled")},children:[Object(_.jsxs)("div",{className:"modal-header",style:{zIndex:100,padding:"10px 30px"},children:[Object(_.jsx)("h2",{className:"modal-title",id:"exampleModalLabel",children:"Create your invoice"}),Object(_.jsx)(m.a,{"aria-label":"Close","data-dismiss":"modal",type:"button",onClick:function(){return t(!1)},size:"sm",children:Object(_.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(_.jsx)("div",{className:"modal-body ",style:{display:"flex",width:"70vw",marginTop:-30,resize:"both",overflow:"auto",justifyContent:"center"},children:Object(_.jsxs)(k.ErrorBoundary,{FallbackComponent:U.a,onError:H,children:[" ",Object(_.jsxs)(V.Provider,{value:{formData:c,gridData:d,setFormData:o,setGridData:b,setShowNewInvoiceModal:t,init:F,comments:h,setComments:f,vatAndLeviesScheme:x,setvatAndLeviesScheme:g},children:[Object(_.jsx)(I,{refetch:n}),Object(_.jsx)(D.a,{})]})]})})]})})}}},[[393,5,6]]]);