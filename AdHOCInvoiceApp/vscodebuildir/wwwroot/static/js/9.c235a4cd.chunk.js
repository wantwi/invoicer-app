(this["webpackJsonpgra-invoicer"]=this["webpackJsonpgra-invoicer"]||[]).push([[9],{475:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s(5),c=s(20),r=s(26),n=s(148),o=s(38),i=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{isEnabled:!0,queryTag:"/?filter="},d=Object(o.a)(),m=u.isEnabled,j=(u.queryTag,function(){var t=Object(r.a)(Object(c.a)().mark((function t(){var s;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.get(e);case 2:return s=t.sent,t.abrupt("return",s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),h=Object(n.a)({queryKey:[t,s],queryFn:j,onSuccess:function(e){return i(e)},onError:function(e){return l(e)},enabled:m});return Object(a.a)({},h)})},479:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(5),c=s(20),r=s(26),n=s(87),o=s(248),i=s(38),l=(JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},u=Object(n.b)(),d=Object(i.a)(),m=function(){var t=Object(r.a)(Object(c.a)().mark((function t(s){var a;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log({postData:s}),console.log({url:e}),t.next=4,d.post(e,s);case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=Object(o.a)({mutationFn:m,onSuccess:function(e){u.invalidateQueries({queryKey:[t,""]}),s(e)},onError:function(e){return l(e)}});return Object(a.a)({},j)})},483:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(5),c=s(20),r=s(26),n=s(87),o=s(248),i=(s(149),s(38)),l=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},u=Object(n.b)(),d=Object(i.a)(),m=function(){var t=Object(r.a)(Object(c.a)().mark((function t(s){var a;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log({postData:s}),console.log({url:e}),t.next=4,d.put(e,s);case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=Object(o.a)({mutationFn:m,onSuccess:function(e){u.invalidateQueries({queryKey:[t,""]}),s(e)},onError:function(e){return l(e)}});return Object(a.a)({},j)}},493:function(e,t){},508:function(e,t){},509:function(e,t){},667:function(e,t,s){"use strict";s.r(t);var a=s(5),c=s(8),r=s(2),n=s.n(r),o=s(245),i=s(114),l=s(80),u=s(172),d=s(454),m=s(113),j=s(399),h=s(147),b=s(450),p=s(451),O=s(238),v=s(146),f=s(246),x=s(247),g=s(21),C=(s(252),s(52)),A=s(173),E=s(150),T=s(249),S=s(9),R=s(31),_=s(538),P=(s(251),s(59)),y=s(1);var N=function(e){var t=e.setuploadedData,s=e.previewData,o=(e.metadata,e.setMetadata,e.setCustomerList),u=e.setShow,d=(e.disabled,e.setIsSearched),j=(e.isPartner,Object(r.useState)([])),b=Object(c.a)(j,2),p=(b[0],b[1]),O=Object(r.useState)(""),v=Object(c.a)(O,2),f=v[0],x=v[1],C=Object(_.a)({accept:".xlsx,.xls,.csv",maxFiles:1,onDrop:function(e){p(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),A=C.acceptedFiles,E=C.getRootProps,T=C.getInputProps,N=Object(r.useState)([]),D=Object(c.a)(N,2),w=D[0],I=D[1],L=Object(r.useState)(0),U=Object(c.a)(L,2),V=U[0],F=(U[1],Object(r.useState)(0)),k=Object(c.a)(F,2),B=(k[0],k[1],Object(r.useState)(0)),H=Object(c.a)(B,2),G=H[0],q=H[1];n.a.useEffect((function(){t(A)}),[A]),n.a.useEffect((function(){}),[V]);var W=A.map((function(e){return Object(y.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)}));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(g.a,{}),Object(y.jsxs)("section",{className:"container",children:[Object(y.jsxs)("div",Object(a.a)(Object(a.a)({},E({className:"dropzone"})),{},{children:[Object(y.jsx)("input",Object(a.a)(Object(a.a)({},T()),{},{onDrop:function(){return console.log(A)}})),Object(y.jsx)("p",{style:{margin:20},children:"Click here to select file"})]})),Object(y.jsxs)("aside",{children:[Object(y.jsx)("h4",{children:"Files"}),Object(y.jsx)("ul",{style:{color:"green"},children:W})]}),Object(y.jsx)("div",{children:Object(y.jsx)(i.a,{children:Object(y.jsx)(l.a,{lg:"12",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-email",children:"Sheet Name"}),Object(y.jsx)("code",{style:{color:"darkred"},children:"*"}),Object(y.jsxs)("select",{className:"form-control",value:f,onChange:function(e){return function(e){x(e.target.value);for(var t=e.target.value,a=s.Sheets[t],c=Object.keys(a).map((function(e){return[e,a[e].v]})),r=[],n=[],o=[],i=[],l={},u=0;u<c.length;u++)if(c[u][1]){var d=c[u][0].replace(/[^\d.]/g,"");o.push(d);var m=c[u][0].replace(d,"");i.push(m),l["".concat(c[u][0])]=c[u][1],n.push(l),r.push({Row:d,Column:m,Cell:c[u][0],Value:c[u][1]})}var j=[];j.push({Data:r,Cells:l,Name:t,First:r[0],Last:r[r.length-1],Rows:o.filter((function(e,t,s){return s.indexOf(e)===t})),Columns:i.filter((function(e,t,s){return s.indexOf(e)===t}))}),I(j[0].Data),console.log(j[0]),q(Number(j[0].Last.Row))}(e)},children:[Object(y.jsx)("option",{value:"",children:"Select Sheet"}),s.SheetNames.map((function(e,t){return Object(y.jsx)("option",{disabled:"legend"===e.toLowerCase(),children:e},t)}))]})]})})})}),Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)("p",{children:A.length>0?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{children:"File attached "}),Object(y.jsx)(P.a,{color:"green"})]}):null}),Object(y.jsx)(m.a,{disabled:0===f.length,color:"primary",onClick:function(){u(!1),function(){var e=w,t=Object(R.a)(new Set(e)),s=t.filter((function(e){return"A"===e.Column})),a=t.filter((function(e){return"B"===e.Column})),c=t.filter((function(e){return"C"===e.Column})),r=t.filter((function(e){return"D"===e.Column})),n=t.filter((function(e){return"E"===e.Column})),i=t.filter((function(e){return"F"===e.Column})),l=t.filter((function(e){return"G"===e.Column})),u=t.filter((function(e){return"H"===e.Column})),m=[],j=[],h=[],b=[],p=[],O=[],v=[],f=[];s.forEach((function(e){return m.push(e.Value)})),a.forEach((function(e){return j.push(e.Value)})),c.forEach((function(e){return h.push(e.Value)})),r.forEach((function(e){return b.push(e.Value)})),n.forEach((function(e){return p.push(e.Value||"")})),i.forEach((function(e){return O.push(e.Value||"")})),l.forEach((function(e){return v.push(e.Value||"")})),u.forEach((function(e){return f.push(e.Value)}));var x=[];x.push(m,j,h,b,p,O,v,f);for(var g=[],C=[],A={},E=function(e){x.map((function(t,s){A[t[0]]=t[e];var a=Object(S.a)({},t[0],t[e]);C.push(a)})),(g=[].concat(Object(R.a)(g),[A])).push([A][0])},T=1;T<G;T++)E(T);for(var _=[],P=0;P<C.length;P+=8){var y=C.slice(P,P+8);_.push(y)}var N=[];_.map((function(e){var t={};e.map((function(e){t["".concat(Object.keys(e))]="".concat(Object.values(e))})),N.push(t)})),JSON.parse(sessionStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"/gra-invoicer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORITY:"https://psl-app-vm3/evat-auth",REACT_APP_BASENAME:"/gra-invoicer",REACT_APP_ClientCorsOrigin:"https://psl-app-vm3",REACT_APP_CLIENT_ID:"evat-invoicing-ui",REACT_APP_CLIENT_ROOT:"https://psl-app-vm3/EvatApi/api/v1",REACT_APP_CLIENT_ROOT_V2:"https://psl-app-vm3/EvatApi/api/v2",REACT_APP_CLIENT_ROOT_V3:"https://psl-app-vm3/EvatApi/api/v3",REACT_APP_CLIENT_SECRET:"L#?+;@e&?7D40p0kYO93e>u}18qI7^",REACT_APP_DASHBOARD_URL:"https://reports.cimsgh.com/bi/site/site1/dashboards/7b5d6da7-6ff6-45c6-800c-fc893d09f5de/EVAT/Sec.%20GRA%20QA%20DASHBOARD?showmydashboards=1&isembed=true&hide_tool=dp&export=true%27",REACT_APP_DEFAULT_USER:"user",REACT_APP_REPORTSERVERPath:"/eVAT/eVAT_Report/",REACT_APP_REPORTSERVERURL:"http://192.168.0.71/ReportServer_SSRS/",REACT_APP_REPORTSERVICEURL:"https://psl-app-vm3/EvatApi/api/v1/ReportViewer",REACT_APP_SYNCFUSSION_LICENSE:"ORg4AjUWIQA/Gnt2VFhiQlJPd11dXmJWd1p/THNYflR1fV9DaUwxOX1dQl9gSXtTfkVkWn1adHZQT2A=",REACT_APP_URL:"https://psl-app-vm3",REACT_APP_VERSION:"2.0.0"}).REACT_APP_OIDC_USER)),console.log({results:N});var D=N.map((function(e){return{customerTin:e.GhanaCardTIN,customerName:e.Name,type:e.TypeOfBusinessPartner.substr(0,3).toUpperCase()||"CUS",customerTel:e.Phone,customerEmail:e.Email,ghPostGps:e.GhanaPost,city:e.City,address:e.Address,digitalAddress:e.GhanaPost}}));o(D),d(!0)}()},children:"Upload"})]})]})]})},D=s(506),w=function(e){var t=e.show,s=e.setShow,a=e.setCustomerList,r=e.setIsSearched,o=n.a.useState([]),m=Object(c.a)(o,2),j=m[0],h=m[1],b=n.a.useState({SheetNames:[],Sheets:{}}),p=Object(c.a)(b,2),O=p[0],v=p[1],x=n.a.useState({header:0,start:0,end:0}),g=Object(c.a)(x,2),C=g[0],A=g[1],E=n.a.useState(!0),S=Object(c.a)(E,2),R=S[0],_=S[1];return n.a.useEffect((function(){if(j.length>0){_(!1);var e=new FileReader;e.onabort=function(){return console.log("file reading was aborted")},e.onerror=function(){return console.log("file reading has failed")},e.onload=function(e){var t=e.target.result,s=D.read(t,{type:"binary"});v({SheetNames:s.SheetNames,Sheets:s.Sheets})},e.readAsArrayBuffer(j[0],"utf-8")}return function(){}}),[j]),Object(y.jsx)("div",{children:Object(y.jsx)(T.a,{className:"modal-dialog-centered modal-md",isOpen:t,children:Object(y.jsxs)(u.a,{className:"shadow",style:{height:"max-content"},children:[Object(y.jsx)(d.a,{className:"bg-white border-0",children:Object(y.jsxs)(i.a,{className:"align-items-center",children:[Object(y.jsx)(l.a,{xs:"8",children:Object(y.jsx)("h3",{className:"mb-0",children:"Drag and Drop File Here"})}),Object(y.jsx)(l.a,{xs:"4",children:Object(y.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){return s(!1)},children:Object(y.jsx)("span",{"aria-hidden":!0,children:"x"})})})]})}),Object(y.jsxs)(f.a,{children:[" ",Object(y.jsx)(N,{setuploadedData:h,previewData:O,metadata:C,setMetadata:A,setCustomerList:a,setdisabled:_,disabled:R,setShow:s,setIsSearched:r})]})]})})})},I=s.p+"static/media/GRA_INVOICER_BUSINESS_PARTNERS.5479206a.xlsx",L=s(97),U=(s(484),s(537)),V=s(505),F=s(181);function k(e){var t=e.message,s=e.showPrompt,a=e.setShowPrompt,c=e.customerToDelete,r=e.setLoading,n=(e.setCustomerList,e.getCustomerList),o=e.getSupplierList,i=e.resetFormBtn,l=Object(F.a)("/api/DeleteCustomer/".concat(null===c||void 0===c?void 0:c.customerID),"customer",null===c||void 0===c?void 0:c.customerID,(function(e){var t;"CUS"===c.type?(g.b.success("Customer successfully deleted from system"),null===i||void 0===i||null===(t=i.current)||void 0===t||t.onClick(),n()):(g.b.success("Supplier successfully deleted from system"),o());a(!1),r(!1)}),(function(e){a(!1),console.log({useMutationError:e}),g.b.error((null===e||void 0===e?void 0:e.message)||"Invoice could not be saved. Please try again"),r(!1)})).mutate;return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(T.a,{className:"modal-dialog-centered modal-danger",contentClassName:"bg-gradient-danger",isOpen:s,children:[Object(y.jsxs)("div",{className:"modal-header",children:[Object(y.jsx)("h6",{className:"modal-title",id:"modal-title-notification",children:"Your attention is required"}),Object(y.jsx)("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(){a(!1)},children:Object(y.jsx)("span",{"aria-hidden":!0,children:"\xd7"})})]}),Object(y.jsx)("div",{className:"modal-body",children:Object(y.jsxs)("div",{className:"py-3 text-center",children:[Object(y.jsx)("i",{className:"ni ni-bell-55 ni-3x"}),Object(y.jsx)("h4",{className:"heading mt-4",children:"Hi there..."}),Object(y.jsx)("p",{children:t})]})}),Object(y.jsxs)("div",{className:"modal-footer",children:[Object(y.jsx)(m.a,{className:"btn-white",color:"default",type:"button",onClick:function(){return e=c,r(!0),void(e.hasTrans?(g.b.warning("Customer has already been used in a transaction.  Try d instead"),a(!1)):(r(!0),l()));var e},children:"Yes"}),Object(y.jsx)(m.a,{className:"text-white ml-auto",color:"link","data-dismiss":"modal",type:"button",onClick:function(){a(!1)},children:"No"})]})]})})}var B=s(223),H=s(475),G=s(174),q=s(479),W=s(483),z=s(60),Q=s(87),X=(t.default=function(){var e,t=Object(z.c)(),s=(t.getUser,t.user),n=(t.logout,t.selectedBranch),T=(Object(Q.b)(),Object(U.a)({initialValues:{companyId:null===s||void 0===s?void 0:s.sub,customerName:"",customerTin:"",customerEmail:"",customerPhone:"",customerAddress:"",customerCity:"",customerDigitalAddress:"",customerType:"CUS"},validationSchema:V.c({customerName:V.d().required("Required"),customerTin:V.d().required("Required").nullable().min(11,"Must be 11  or 15 characters").max(15,"Must be 11  or 15 characters"),customerEmail:V.d().email("Invalid email address").nullable().required("Required"),customerPhone:V.d().required("Required").matches(/(\+\d{1,3}\s?)?((\(\d{3}\)\s?)|(\d{3})(\s|-?))(\d{3}(\s|-?))(\d{4})(\s?(([E|e]xt[:|.|]?)|x|X)(\s?\d+))?/g,"not a valid phone number")}),onSubmit:function(e){_t(e)}})),S=Object(r.useState)([]),R=Object(c.a)(S,2),_=R[0],N=R[1],D=Object(r.useState)(!1),F=Object(c.a)(D,2),Y=F[0],K=F[1],J=Object(r.useState)(!1),M=Object(c.a)(J,2),Z=M[0],$=M[1],ee=Object(r.useState)(!1),te=Object(c.a)(ee,2),se=te[0],ae=te[1],ce=Object(r.useState)(!1),re=Object(c.a)(ce,2),ne=re[0],oe=re[1],ie=Object(r.useState)(!1),le=Object(c.a)(ie,2),ue=le[0],de=le[1],me=Object(r.useState)(!1),je=Object(c.a)(me,2),he=je[0],be=je[1],pe=Object(r.useState)(""),Oe=Object(c.a)(pe,2),ve=Oe[0],fe=Oe[1],xe=Object(r.useState)(!1),ge=Object(c.a)(xe,2),Ce=ge[0],Ae=ge[1],Ee=Object(r.useState)("Customer List"),Te=Object(c.a)(Ee,2),Se=Te[0],Re=Te[1],_e=Object(r.useState)(!0),Pe=Object(c.a)(_e,2),ye=Pe[0],Ne=Pe[1],De=Object(r.useState)(!1),we=Object(c.a)(De,2),Ie=we[0],Le=we[1],Ue=Object(r.useState)(null),Ve=Object(c.a)(Ue,2),Fe=Ve[0],ke=Ve[1],Be=Object(r.useState)(""),He=Object(c.a)(Be,2),Ge=He[0],qe=He[1],We=Object(G.a)(ve,500),ze=Object(c.a)(We,1)[0],Qe=Object(G.a)(Ge,500),Xe=Object(c.a)(Qe,1)[0],Ye=Object(r.useState)(!1),Ke=Object(c.a)(Ye,2),Je=(Ke[0],Ke[1],Object(r.useState)(!0)),Me=Object(c.a)(Je,2),Ze=Me[0],$e=Me[1],et=Object(r.useState)(!1),tt=Object(c.a)(et,2),st=tt[0],at=tt[1],ct=Object(r.useState)(!1),rt=Object(c.a)(ct,2),nt=rt[0],ot=rt[1],it=Object(r.useState)("CUS"),lt=Object(c.a)(it,2),ut=lt[0],dt=lt[1],mt=Object(r.useRef)(),jt=Object(r.useRef)();console.log("this file rendered");var ht=function(e){if(console.log("dhjshds",{data:e}),0==(null===e||void 0===e?void 0:e.length))return g.b.info("No record available"),N([]),void K(!1);Ze?(at(!0),ot(!1)):(at(!1),ot(!0)),K(!1);var t,s=e.map((function(e){return{customerID:e.id,customerName:e.name,customerTin:e.tin,customerEmail:e.email,customerPhone:e.telephone,customerAddress:e.address,customerCity:e.city,customerDigitalAddress:e.digitalAddress,type:e.type,status:e.status||"A",hasTrans:e.hasTrans||!1}}));s.length<1?(K(!1),N([])):(K(!1),Ae(!0),console.log({val:T.values}),null!==T&&void 0!==T&&null!==(t=T.values)&&void 0!==t&&t.customerName?N([T.values]):N(s))},bt=Object(H.a)(ze?"/api/GetCompanyCustomers/".concat(ze,"/").concat(null===n||void 0===n?void 0:n.code):"/api/GetCompanyCustomerslist/".concat(null===n||void 0===n?void 0:n.code),"customers",ze,ht,(function(e){K(!1),g.b.warning("You have no products/services saved yet")}),{isEnabled:!1,queryTag:"?search="}),pt=bt.refetch,Ot=bt.isLoading,vt=Object(H.a)(Xe?"/api/GetCompanySuppliers/".concat(Xe,"/").concat(null===n||void 0===n?void 0:n.code):"/api/GetCompanySupplierslist/".concat(null===n||void 0===n?void 0:n.code),"suppliers",Xe,ht,(function(e){K(!1),g.b.warning("You have no products/services saved yet")}),{isEnabled:!1,queryTag:"?search="}),ft=vt.refetch;vt.isLoading;Object(r.useEffect)((function(){Xe.length>1&&ft(),0===Ge.length&&nt&&ft()}),[Xe,Ge]),Object(r.useEffect)((function(){ze.length>1&&pt(),0===ve.length&&st&&pt()}),[ze,ve]);var xt=Object(q.a)("/api/CreateCustomer",ze,(function(){var e,t;(K(!1),oe((function(){return!1})),"SUP"===ut)?(qe(null===T||void 0===T||null===(e=T.values)||void 0===e?void 0:e.customerName),g.b.success("Supplier successfully saved")):(g.b.success("Customer successfully saved"),fe(null===T||void 0===T||null===(t=T.values)||void 0===t?void 0:t.customerName));T.resetForm()}),(function(e){var t;console.log({err:e}),g.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.Message)||"Error creating customer"),K(!1)})),gt=xt.mutate,Ct=xt.isLoading,At=xt.isSuccess;console.log({isSuccess:At});var Et=Object(W.a)("/api/UpdateCreateCustomer/".concat(null===T||void 0===T||null===(e=T.values)||void 0===e?void 0:e.customerID),Xe,(function(e){return function(e){var t,s;K(!1),oe(!1),T.resetForm(),"SUP"===ut?(ft(),g.b.success("Supplier successfully saved"),qe(null===T||void 0===T||null===(t=T.values)||void 0===t?void 0:t.customerName)):(pt(),g.b.success("Customer successfully saved"),fe(null===T||void 0===T||null===(s=T.values)||void 0===s?void 0:s.customerName)),de(!1)}(0)}),(function(e){var t;console.log({err:e}),g.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.Message)||"Error updating customer"),K(!1)})),Tt=Et.mutate,St=Et.isLoading,Rt=Et.isFetched;Object(r.useEffect)((function(){var e,t;Rt&&null!==T&&void 0!==T&&null!==(e=T.values)&&void 0!==e&&e.customerName&&qe(null===T||void 0===T||null===(t=T.values)||void 0===t?void 0:t.customerName);return function(){}}),[Rt]);var _t=function(){ue?function(e){var t={id:(e=T.values).customerID,tin:e.customerTin,name:e.customerName,email:e.customerEmail,telephone:e.customerPhone,digitalAddress:e.customerDigitalAddress,city:e.customerCity,address:e.customerAddress,contactPersonName:"",contactPersonPhone:"",contactPersonPosition:"",status:ye?"A":"I",type:e.type};dt(null===t||void 0===t?void 0:t.type),K(!0),Tt(t)}(T):function(e){if((e=T.values).customerName&&e.customerTin&&e.customerPhone){var t,s=[e].map((function(e){return{companyId:e.companyId,customerTin:e.customerTin,customerName:e.customerName,type:e.customerType,customerTel:e.customerPhone,customerEmail:e.customerEmail,ghPostGps:e.customerDigitalAddress,city:e.customerCity,address:e.customerAddress,digitalAddress:e.customerDigitalAddress,branchCode:null===n||void 0===n?void 0:n.code}}));dt(null===(t=s[0])||void 0===t?void 0:t.type),gt(s),K(!0)}else g.b.warning("Please fill all necessary information")}(T)},Pt=function(e){console.log({customer:e}),null==e.customerAddress&&(e=Object(a.a)(Object(a.a)({},e),{},{customerAddress:""})),null==e.customerDigitalAddress&&(e=Object(a.a)(Object(a.a)({},e),{},{customerDigitalAddress:""})),null==e.customerCity&&(e=Object(a.a)(Object(a.a)({},e),{},{customerCity:""})),null==e.customerPhone&&(e=Object(a.a)(Object(a.a)({},e),{},{customerPhone:""})),"A"===e.status?Ne(!0):"A"!==e.status&&Ne(!1),T.setValues(Object(a.a)(Object(a.a)({},e),{},{customerType:e.type})),de(!0)},yt=Object(q.a)("/api/CreateCustomer","",(function(){K(!1),g.b.success("Customer List successfully Added"),K(!1),N([]),pt(),oe(!1)}),(function(e){g.b.error("Could not submit list. Please try again."),K(!1)})).mutate;return Object(r.useEffect)((function(){}),[T]),console.log(ne),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(A.a,{message:"This is your customer setup page. Manage your client list here",pageName:"Business Partner Setup"}),Object(y.jsx)(g.a,{}),Object(y.jsxs)(B.a,{children:[Object(y.jsx)(o.a,{className:"mt--7",fluid:!0,children:Object(y.jsxs)(i.a,{className:"mt-5",children:[_&&Ce&&Object(y.jsx)(l.a,{className:"order-xl-2 mb-5 mb-xl-0",xs:"7",lg:"7",xl:"7",children:Object(y.jsxs)(u.a,{className:"shadow",style:{height:619},children:[Object(y.jsx)(d.a,{className:"bg-white border-0",children:Object(y.jsxs)(i.a,{className:"align-items-center",children:[Object(y.jsx)(l.a,{xs:"4",children:ne?Object(y.jsx)(l.a,{lg:"12",className:"text-align",style:{display:"flex"},children:Object(y.jsx)(m.a,{color:"success",onClick:function(){K(!0),yt(_.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{branchCode:null===n||void 0===n?void 0:n.code})})))},size:"md",disabled:0===_.length,children:"Submit Bulk List"})}):Object(y.jsx)(j.a,{className:"navbar-search navbar-search-light form-inline ",onSubmit:function(e){return e.preventDefault()},children:Object(y.jsx)(h.a,{className:"mb-0",children:Object(y.jsxs)(b.a,{className:"input-group-alternative",children:[Object(y.jsx)(p.a,{addonType:"prepend",style:{marginTop:8},children:Object(y.jsx)(O.a,{children:Object(y.jsx)("i",{className:"fas fa-search"})})}),Object(y.jsx)(v.a,{placeholder:"Search...",type:"text",value:ve||Ge,onChange:function(e){be(!0),Ze?(fe(e.target.value),qe("")):(qe(e.target.value),fe(""))},style:{width:300}}),Object(y.jsx)(p.a,{addonType:"append",children:Object(y.jsx)(O.a,{onClick:function(){return fe("")},children:he&&Object(y.jsx)("i",{className:"fas fa-times"})})})]})})})}),Object(y.jsx)(l.a,{className:"text-right",xs:"8",children:Object(y.jsx)(m.a,{onClick:function(){oe(!1),ae(!se),N([]),Ae(!1),T.resetForm(),de(!1)},size:"sm",children:Object(y.jsx)(L.a,{})})})]})}),Object(y.jsxs)(f.a,{style:X.body,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between p-0 m-0",children:[Object(y.jsx)("h3",{className:"pb-1",children:Se}),Object(y.jsx)("span",{children:Ot&&"Refreshing..."})]}),Object(y.jsxs)(x.a,{className:"align-items-center  table-flush",responsive:!0,children:[Object(y.jsx)("thead",{className:"thead-light",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:"30%"},scope:"col",children:"Name"}),Object(y.jsx)("th",{style:{width:"25%"},scope:"col",children:"Ghana Card/TIN"}),Object(y.jsx)("th",{style:{width:"25%"},scope:"col",children:"Email Address"}),!ne&&Object(y.jsx)("th",{style:{textAlign:"right",width:"10%"},scope:"col",children:"Actions"})]})}),Object(y.jsx)("tbody",{children:_.map((function(e,t){return Object(y.jsxs)("tr",{style:{cursor:"pointer",lineHeight:0},ref:mt,children:[Object(y.jsx)("td",{onClick:function(){return Pt(e)},children:null===e||void 0===e?void 0:e.customerName}),Object(y.jsx)("td",{children:null===e||void 0===e?void 0:e.customerTin}),Object(y.jsx)("td",{children:null===e||void 0===e?void 0:e.customerEmail}),!ne&&Object(y.jsxs)("td",{style:{textAlign:"right",width:"20%",height:20,cursor:"pointer"},children:[Object(y.jsx)(L.b,{title:"Edit",style:{marginRight:20},onClick:function(){return Pt(e)}}),Object(y.jsx)(E.a,{title:"Remove",style:{marginRight:20},onClick:function(){return t=e,console.log(t),ke(t),void Le(!0);var t}})]})]},t)}))})]})]})]})})," ",Object(y.jsx)(l.a,{className:"order-xl-1 mb-5 mb-xl-0",sm:"12",xs:"12",lg:"5",xl:"5",children:Object(y.jsxs)(u.a,{className:"bg-secondary shadow",children:[Object(y.jsx)(d.a,{className:"bg-white border-5",children:Object(y.jsx)(i.a,{className:"align-items-center pl-3",children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10},children:[Object(y.jsx)(m.a,{color:"info",size:"sm",onClick:function(){fe(""),qe(""),Re("Customer List"),$e(!0),K(!0),ae(!se),pt(),de(!1),T.resetForm(),oe((function(){return!1}))},children:"View Existing Customers"}),Object(y.jsx)(m.a,{color:"primary",size:"sm",onClick:function(){Re("Supplier List"),fe(""),qe(""),$e(!1),K(!0),ae(!se),ft(),de(!1),T.resetForm(),oe((function(){return!1}))},children:"View Existing Suppliers"})]}),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(y.jsx)(m.a,{color:"info",size:"sm",title:"Download Customer List Excel Template",style:{width:"100%",height:29},children:Object(y.jsx)("a",{href:I,style:{color:"white"},children:"Download Template"})}),Object(y.jsx)(m.a,{title:"Upload your  excel file",color:"primary",onClick:function(){oe(!0),N([]),$(!0)},size:"sm",style:{width:"100%",height:29},children:"Upload Excel File"})]})]}),Object(y.jsx)("h3",{className:"mb-0",children:"Add Business Partner"})]})})}),Object(y.jsx)(f.a,{children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)("h6",{className:"heading-small text-muted",style:{marginTop:-20},children:"User information"}),Object(y.jsxs)("div",{className:"",style:{marginTop:-10},children:[Object(y.jsxs)(i.a,{children:[Object(y.jsx)(l.a,{lg:"6",style:{margin:0},children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-username",children:"Name"})," ",Object(y.jsxs)("code",{style:{color:"darkred"},children:["*"," ",T.touched.customerName&&T.errors.customerName]}),Object(y.jsx)(v.a,{className:"form-control font-sm",id:"customerName",name:"customerName",placeholder:"Full name",disabled:ue,type:"text",value:T.values.customerName,onBlur:T.handleBlur,onChange:T.handleChange})]})}),Object(y.jsx)(l.a,{lg:"6",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-username",children:"Type"})," ",Object(y.jsxs)("code",{style:{color:"darkred"},children:["*"," ",T.touched.customerName&&T.errors.customerName]}),Object(y.jsxs)("select",{className:"form-control font-sm",id:"customerType",disabled:ue,name:"customerType",value:T.values.customerType,onBlur:T.handleBlur,onChange:T.handleChange,style:{height:29,padding:"0px 5px"},children:[Object(y.jsx)("option",{value:"CUS",children:"Customer"}),Object(y.jsx)("option",{value:"SUP",children:"Supplier"})]})]})})]}),Object(y.jsxs)(i.a,{style:{marginTop:-15},children:[Object(y.jsx)(l.a,{lg:"6",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"customerTin",children:"Ghana Card/TIN"})," ",Object(y.jsxs)("code",{style:{color:"darkred"},children:["*"," ",T.touched.customerTin&&T.errors.customerTin]}),Object(y.jsx)(v.a,{className:"form-control font-sm",placeholder:"Ghana Card/TIN",id:"customerTin",name:"customerTin",type:"text",disabled:ue,value:T.values.customerTin,onBlur:T.handleBlur,onChange:T.handleChange,bsSize:"sm"})]})}),ue&&Object(y.jsx)(l.a,{lg:"6",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-status",children:"Status"})," ",Object(y.jsxs)(m.a,{className:"form-control font-sm",id:"status",name:"status",type:"button",color:"white",value:ye?"Active":"Inactive",onClick:function(){return Ne(!ye)},size:"sm",children:[Object(y.jsx)(P.d,{color:ye?"green":"red",style:{marginRight:20}})," ",ye?"Active":"Inactive"]})]})})]}),Object(y.jsxs)(i.a,{style:{marginTop:-15},children:[Object(y.jsx)(l.a,{lg:"6",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-email",children:"Email address"})," ",Object(y.jsxs)("code",{style:{color:"darkred"},children:["*"," ",T.touched.customerEmail&&T.errors.customerEmail]}),Object(y.jsx)(v.a,{className:"form-control font-sm",id:"customerEmail",disabled:ue,name:"customerEmail",placeholder:"somename@somemail.com",type:"email",value:T.values.customerEmail,onBlur:T.handleBlur,onChange:T.handleChange,bsSize:"sm"})]})}),Object(y.jsx)(l.a,{lg:"6",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-last-name",children:"Phone Number"})," ",Object(y.jsxs)("code",{style:{color:"darkred"},children:["*"," ",T.touched.customerPhone&&T.errors.customerPhone]}),Object(y.jsx)(v.a,{className:"form-control font-sm",id:"customerPhone",name:"customerPhone",placeholder:"phone",type:"tel",value:T.values.customerPhone,onBlur:T.handleBlur,onChange:T.handleChange,bsSize:"sm"})]})})]})]}),Object(y.jsx)("hr",{className:"my-2"}),Object(y.jsx)("h6",{className:"heading-small text-muted",children:"Contact information"}),Object(y.jsxs)("div",{children:[Object(y.jsx)(i.a,{style:{marginTop:-10},children:Object(y.jsx)(l.a,{md:"12",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-address",children:"Address"}),Object(y.jsx)(v.a,{className:"form-control font-sm",id:"customerAddress",name:"customerAddress",placeholder:"Address",type:"text",value:T.values.customerAddress,onBlur:T.handleBlur,onChange:T.handleChange,bsSize:"sm"})]})})}),Object(y.jsxs)(i.a,{style:{marginTop:-15},children:[Object(y.jsx)(l.a,{lg:"6",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-city",children:"City"}),Object(y.jsx)(v.a,{className:"form-control font-sm",id:"customerCity",name:"customerCity",placeholder:"City",type:"text",value:T.values.customerCity,onBlur:T.handleBlur,onChange:T.handleChange,bsSize:"sm"})]})}),Object(y.jsx)(l.a,{lg:"6",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("label",{className:"form-control-label",htmlFor:"input-country",children:"Ghana Post Service"}),Object(y.jsx)(v.a,{className:"form-control font-sm",id:"customerDigitalAddress",name:"customerDigitalAddress",placeholder:"GA-XXX-XXXX",type:"text",value:T.values.customerDigitalAddress,onBlur:T.handleBlur,onChange:T.handleChange,bsSize:"sm"})]})})]}),Object(y.jsx)(i.a,{children:Object(y.jsxs)(l.a,{lg:"12",className:"text-align",style:{display:"flex",flexDirection:"row-reverse"},children:[Object(y.jsx)(m.a,{color:"success",onClick:T.handleSubmit,size:"sm",disabled:!1,children:ue?"Update":"Save"}),Object(y.jsx)(m.a,{style:{marginRight:10},color:"secondary",disabled:Ct||St,ref:jt,onClick:function(){de(!1),T.resetForm()},size:"sm",children:"Clear"})]})})]})]})})]})})]})}),Object(y.jsx)(w,{show:Z,setShow:$,setCustomerList:N,setIsSearched:Ae}),Object(y.jsx)(k,{message:'Are you sure you want to proceed with deleting  "'.concat(null===Fe||void 0===Fe?void 0:Fe.customerName,'"?'),showPrompt:Ie,setShowPrompt:Le,customerToDelete:Fe,setCustomerList:N,setLoading:K,getCustomerList:pt,getSupplierList:ft,resetFormBtn:jt}),Y||St||Ct?Object(y.jsx)(C.a,{}):null]})]})},{body:{marginTop:0,height:"inherit",maxHeight:"inherit",overflow:"auto",marginBottom:40}})}}]);